(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{QKnv:function(t,e,a){"use strict";a.r(e),a.d(e,"ComplaintsModule",function(){return $t});var i=a("ofXK"),n=a("tyNb");class o{}class s{constructor(t){this.id=t.id,this.regNo=t.regNo,this.remedialAction=t.remedialAction,this.reasonForTheComplaint=t.reasonForTheComplaint,this.addressedTo=t.addressedTo,this.dataSubject=t.dataSubject,this.personalDataAffected=t.personalDataAffected,this.status=t.status,this.complaintDetails=t.complaintDetails,this.lastModificationDate=t.lastModificationDate,this.name=t.dataSubject.name,this.phone=t.dataSubject.name,this.comments=t.comments}}var r=function(t){return t.NATIONALITY="Nationality",t.AGE="Age / Date of Birth",t.MARITAL_STATUS="Marital Status",t.EDUCATION="Education Level",t.IDENTIFICATION="Identification Number e.g NIN, TIN, Driving Permit Number",t.IDENTITY_DATA="Identity Data",t.PHILOSPHICAL_BELIEFS="Philosophical Beliefs",t.POLITICAL_OPINION="Political Opinion",t.SEXUAL_LIFE="Sexual Life",t.FINANCIAL_INFORMATION="Financial Information",t.MEDICAL="Medical Records",t}({}),c=function(t){return t.CORRECT_THE_INFORMATION="Correct the information",t.DELETE_OR_DESTROY_THE_INFORMATION=" Delete or Destroy  The information",t.NOTIFIY_THE_THIRD_PARTIES="Write to or notify the third parties whom then data has been shared",t}({});const m={id:1,regNo:"C202100001",personalDataAffected:[r.NATIONALITY,r.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},l=[{id:1,regNo:"C202100001",addressedTo:"Uganda Revenue Authority",personalDataAffected:[r.NATIONALITY,r.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},{id:1,regNo:"C202100003",addressedTo:"Airtel Uganda",personalDataAffected:[r.NATIONALITY,r.AGE],status:"Submitted",reasonForTheComplaint:"Infringement / Violation of Act",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"jkalungi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"John Kalungi",phone:"0792310084",email:"jkalungi@gmail.com"}},{id:1,regNo:"C202100004",addressedTo:"Airtel Uganda",personalDataAffected:[r.NATIONALITY,r.AGE],status:"Submitted",reasonForTheComplaint:"Inaccurate personal data in the possession of data controllers",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Isaac Akileng",phone:"0792310084",email:"iakileng@gmail.com"}}];var d=a("pbD1"),u=a("+0xr"),p=a("M9IT"),b=a("Dh3D"),h=a("jtHE"),f=a("LRne"),g=a("pLZG"),y=a("Ku73"),C=a("nStZ"),T=a("M2Gj"),I=a("3eU1"),w=a("j7tn"),D=a("fXoL"),S=a("0IaG"),U=a("aTx8"),O=a("xBcV"),F=a("Hbgg"),A=a("rnAf"),v=a("rvYj"),x=a("a+RD"),L=a("bSwM"),E=a("bTqV"),k=a("STbY"),R=a("NFeN");const N=["autosize"];function M(t,e){1&t&&(D.Ub(0,"th",13),D.Ub(1,"mat-checkbox",14),D.cc("click",function(t){return t.stopPropagation()}),D.Tb(),D.Tb())}function P(t,e){1&t&&(D.Ub(0,"td",15),D.Ub(1,"mat-checkbox",14),D.cc("click",function(t){return t.stopPropagation()}),D.Tb(),D.Tb())}function j(t,e){if(1&t&&(D.Ub(0,"th",20),D.Qc(1),D.Tb()),2&t){const t=D.gc(2).$implicit;D.Cb(1),D.Sc(" ",t.name,"")}}function Q(t,e){if(1&t&&(D.Ub(0,"td",21),D.Qc(1),D.Tb()),2&t){const t=e.$implicit,a=D.gc(2).$implicit;D.Cb(1),D.Sc(" ",t[a.property]," ")}}function G(t,e){if(1&t&&(D.Sb(0,17),D.Oc(1,j,2,1,"th",18),D.Oc(2,Q,2,1,"td",19),D.Rb()),2&t){const t=D.gc().$implicit;D.nc("matColumnDef",t.property)}}function V(t,e){if(1&t&&(D.Sb(0),D.Oc(1,G,3,1,"ng-container",16),D.Rb()),2&t){const t=e.$implicit;D.Cb(1),D.nc("ngIf",t.isModelProperty)}}function _(t,e){1&t&&D.Pb(0,"th",22)}const z=function(){return["/complaints/view-complaint"]};function H(t,e){if(1&t&&(D.Ub(0,"td",15),D.Ub(1,"button",23),D.cc("click",function(t){return t.stopPropagation()}),D.Ub(2,"mat-icon"),D.Qc(3,"more_vert"),D.Tb(),D.Tb(),D.Ub(4,"mat-menu",24,25),D.Ub(6,"a",26),D.Ub(7,"mat-icon"),D.Qc(8,"visibility"),D.Tb(),D.Ub(9,"span"),D.Qc(10,"View"),D.Tb(),D.Tb(),D.Ub(11,"button",27),D.Ub(12,"mat-icon"),D.Qc(13,"settings"),D.Tb(),D.Ub(14,"span"),D.Qc(15,"Manage"),D.Tb(),D.Tb(),D.Tb(),D.Tb()),2&t){const t=D.Ac(5);D.Cb(1),D.nc("matMenuTriggerFor",t),D.Cb(5),D.nc("routerLink",D.qc(2,z))}}function $(t,e){1&t&&D.Pb(0,"tr",28)}function B(t,e){1&t&&D.Pb(0,"tr",29)}const q=function(){return["Complaints"]};let W=(()=>{class t extends T.a{constructor(t,e,a,i,n){super(a,i,n),this.dialog=t,this.route=e,this.authService=a,this._workflowService=i,this.registrationService=n,this.subject$=new h.a(1),this.data$=this.subject$.asObservable(),this.statusList=[],this.statuses=[{code:"001",description:"Form 9"},{code:"002",description:"FORM 6"},{code:"003",description:"FORM 11"}],this.columns=[{name:"id",property:"",visible:!1,isModelProperty:!0},{name:"Reference No",property:"regNo",visible:!0,isModelProperty:!0},{name:"Reason for the complaint",property:"reasonForTheComplaint",visible:!0,isModelProperty:!0},{name:"Addressed To",property:"addressedTo",visible:!0,isModelProperty:!0},{name:"Subject Name",property:"name",visible:!0,isModelProperty:!0},{name:"Subject Phone",property:"phone",visible:!0,isModelProperty:!0},{name:"Status",property:"status",visible:!0,isModelProperty:!0},{name:"Updated Date",property:"lastModificationDate",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){return Object(f.a)(l.map(t=>new s(t)))}ngOnInit(){this.getData().subscribe(t=>{this.subject$.next(t)}),this.dataSource=new u.o,this.data$.pipe(Object(g.a)(t=>!!t)).subscribe(t=>{this.complaints=t,this.dataSource.data=t}),this.route.paramMap.subscribe(t=>{console.log(t.has("navigationPrams"))}),this.statusList=this.getGenericDDL(this.statuses,{key:"code",label:"description"},!1),this.defineSearchFields()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}defineSearchFields(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:d.e,dataType:d.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:d.e,dataType:d.a.TEXT},{label:"Form Types",fieldName:"Form",operators:d.d,dataType:d.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:d.e,dataType:d.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:d.e,dataType:d.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:d.c,dataType:d.a.DATETIME}]}}return t.\u0275fac=function(e){return new(e||t)(D.Ob(S.b),D.Ob(n.a),D.Ob(U.c),D.Ob(I.a),D.Ob(w.a))},t.\u0275cmp=D.Ib({type:t,selectors:[["fury-complaints-find"]],viewQuery:function(t,e){if(1&t&&(D.Jc(p.a,!0),D.Jc(b.a,!0),D.Uc(N,!0)),2&t){let t;D.zc(t=D.dc())&&(e.paginator=t.first),D.zc(t=D.dc())&&(e.sort=t.first),D.zc(t=D.dc())&&(e.autosize=t.first)}},inputs:{columns:"columns"},features:[D.zb],decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Complaints","finderDialogTitle","Complaints Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"routerLink"],["mat-menu-item",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(D.Ub(0,"fury-page-layout",0),D.Ub(1,"fury-page-layout-header"),D.Pb(2,"fury-breadcrumbs",1),D.Tb(),D.Ub(3,"fury-page-layout-content"),D.Ub(4,"fury-list",2),D.cc("filterChange",function(t){return e.onFilterChange(t)}),D.Ub(5,"table",3),D.Sb(6,4),D.Oc(7,M,2,0,"th",5),D.Oc(8,P,2,0,"td",6),D.Rb(),D.Oc(9,V,2,1,"ng-container",7),D.Sb(10,8),D.Oc(11,_,1,0,"th",9),D.Oc(12,H,16,3,"td",6),D.Rb(),D.Oc(13,$,1,0,"tr",10),D.Oc(14,B,1,0,"tr",11),D.Tb(),D.Pb(15,"mat-paginator",12),D.Tb(),D.Tb(),D.Tb()),2&t&&(D.Cb(2),D.nc("@fadeInRight",void 0)("crumbs",D.qc(10,q)),D.Cb(1),D.nc("@fadeInUp",void 0),D.Cb(1),D.nc("columns",e.columns)("searchFields",e.searchFields),D.Cb(1),D.nc("dataSource",e.dataSource),D.Cb(4),D.nc("ngForOf",e.columns),D.Cb(4),D.nc("matHeaderRowDef",e.visibleColumns),D.Cb(1),D.nc("matRowDefColumns",e.visibleColumns),D.Cb(1),D.nc("pageSize",e.pageSize))},directives:[O.a,F.a,A.a,v.a,x.a,u.n,b.a,u.c,u.i,u.b,i.n,u.k,u.m,p.a,u.h,L.a,u.a,i.o,b.b,E.a,k.e,R.a,k.a,n.i,k.c,n.h,u.j,u.l],styles:[""],data:{animation:[y.a,C.a]}}),t})();var Y=a("sF9m"),X=a("3Pt+"),J=a("KGtp"),K=a("XiUz"),Z=a("4FRi"),tt=a("kmnG"),et=a("d3UM"),at=a("FKr1"),it=a("qFsG"),nt=a("ihCf");class ot{}var st=a("znSr");function rt(t,e){1&t&&(D.Ub(0,"mat-error",26),D.Qc(1,"Comment required "),D.Tb())}function ct(t,e){if(1&t){const t=D.Vb();D.Ub(0,"div",27),D.Ub(1,"button",28),D.cc("click",function(){D.Ec(t);const e=D.gc(2);return e.addOrUpdateComment(e.isEditingComment?2:1)}),D.Ub(2,"mat-icon"),D.Qc(3),D.Tb(),D.Ub(4,"span"),D.Qc(5),D.Tb(),D.Tb(),D.Qc(6,"\xa0 "),D.Tb()}if(2&t){const t=D.gc(2);D.Cb(1),D.nc("disabled",!t.commentsFormGroup.valid),D.Cb(2),D.Rc(t.commentButtonIcon),D.Cb(2),D.Rc(t.commentButtonLabel)}}function mt(t,e){if(1&t&&(D.Ub(0,"form",21),D.Ub(1,"mat-form-field",22),D.Pb(2,"textarea",23),D.Oc(3,rt,2,0,"mat-error",24),D.Tb(),D.Oc(4,ct,7,3,"div",25),D.Tb()),2&t){const t=D.gc();D.nc("formGroup",t.commentsFormGroup),D.Cb(3),D.nc("ngIf",t.commentsFormGroup.get("commentCtrl").hasError("required")),D.Cb(1),D.nc("ngIf",!t.isViewOnly)}}function lt(t,e){1&t&&(D.Ub(0,"th",29),D.Qc(1,"#"),D.Tb())}function dt(t,e){if(1&t&&(D.Ub(0,"td",30),D.Qc(1),D.Tb()),2&t){const t=e.index;D.Cb(1),D.Sc(" ",t+1,"")}}function ut(t,e){1&t&&(D.Ub(0,"th",31),D.Qc(1," Comment"),D.Tb())}function pt(t,e){if(1&t&&(D.Ub(0,"td",32),D.Qc(1),D.Tb()),2&t){const t=e.$implicit;D.Cb(1),D.Sc(" ",t.comment,"")}}function bt(t,e){1&t&&(D.Ub(0,"th",33),D.Qc(1," Date"),D.Tb())}function ht(t,e){if(1&t&&(D.Ub(0,"td",32),D.Qc(1),D.Tb()),2&t){const t=e.$implicit;D.Cb(1),D.Sc(" ",t.creationDate,"")}}function ft(t,e){1&t&&(D.Ub(0,"th",34),D.Qc(1," User"),D.Tb())}function gt(t,e){if(1&t&&(D.Ub(0,"td",32),D.Qc(1),D.Tb()),2&t){const t=e.$implicit;D.Cb(1),D.Sc(" ",t.username,"")}}function yt(t,e){1&t&&D.Pb(0,"th",34)}function Ct(t,e){if(1&t){const t=D.Vb();D.Sb(0),D.Ub(1,"a",37),D.cc("click",function(){D.Ec(t);const e=D.gc().index;return D.gc().manageComment(2,e)}),D.Ub(2,"mat-icon",38),D.Qc(3,"edit"),D.Tb(),D.Tb(),D.Qc(4,"\xa0\xa0 "),D.Ub(5,"a",37),D.cc("click",function(){D.Ec(t);const e=D.gc().index;return D.gc().deleteComment(e)}),D.Ub(6,"mat-icon",39),D.Qc(7,"delete"),D.Tb(),D.Tb(),D.Rb()}}function Tt(t,e){if(1&t&&(D.Ub(0,"td",35),D.Oc(1,Ct,8,0,"ng-container",36),D.Tb()),2&t){const t=e.index,a=D.gc();D.Cb(1),D.nc("ngIf",!a.isViewOnly&&a.isCommentAuthor(t))}}function It(t,e){1&t&&(D.Ub(0,"td",40),D.Qc(1," There is no comments in the application! "),D.Tb())}function wt(t,e){1&t&&D.Pb(0,"tr",41)}function Dt(t,e){1&t&&D.Pb(0,"tr",42)}const St=function(t){return{hide:t}};function Ut(t,e){if(1&t&&D.Pb(0,"tr",43),2&t){const t=D.gc();D.nc("ngClass",D.rc(1,St,!(0==(null==t.list?null:t.list.length))))}}const Ot=function(){return["noData"]};let Ft=(()=>{class t{constructor(t,e){this._formBuilder=t,this.auth=e,this.commentChange=new D.o,this.dateTimeEvent=new D.o,this.processingEvent=new D.o,this.errorsEvent=new D.o,this.displayedColumns=["nber","comment","creationDate","username","actions"],this.list=[],this.isEditingComment=!1,this.commentButtonIcon="add_circle_outline",this.commentButtonLabel=" Add new comment",this.commentEditId=0,this.dateTimeRowId=0,this.comment=new ot}ngOnInit(){this.processingEvent.subscribe(t=>console.log(t)),this.errorsEvent.subscribe(t=>{this.commentChange.emit(this.applicationComments)}),this.commentsFormGroup=this._formBuilder.group({commentCtrl:["",X.u.required]}),this.dateTimeEvent.subscribe(t=>{t&&(this.list[this.dateTimeRowId-1].creationDate=t),this.commentChange.emit(this.applicationComments)}),this.applicationComments&&this.applicationComments.forEach(t=>{this.list.push(t)})}addOrUpdateComment(t){this.commentsFormGroup.valid&&(this.mapCommentToControl(1),1===t?(this.comment.username=this.auth.getUsername(),this.list.push(this.comment),this.applicationComments.push(this.comment),this.list=[...this.list],this.dateTimeRowId=this.list.length):(this.list[this.commentEditId]=this.comment,this.applicationComments[this.commentEditId]=this.comment,this.list=[...this.list],this.dateTimeRowId=this.commentEditId+1),this.resetComment())}mapCommentToControl(t){1===t?this.comment.comment=this.commentsFormGroup.get("commentCtrl").value:this.commentsFormGroup.get("commentCtrl").setValue(this.comment.comment)}resetComment(){this.commentsFormGroup.reset(),this.commentsFormGroup.markAsPristine(),this.commentsFormGroup.markAsUntouched(),this.comment=new ot,this.validateCommentLabels(1),this.manageComment(1)}manageComment(t,e){2===t?(this.comment=this.applicationComments[e],this.isEditingComment=!0,this.commentEditId=e,this.mapCommentToControl(t)):(this.isEditingComment=!1,this.comment=new ot,this.commentEditId=0),this.validateCommentLabels(t)}validateCommentLabels(t){1===t?(this.commentButtonIcon="add_circle_outline",this.commentButtonLabel="Add new comment"):(this.commentButtonIcon="save",this.commentButtonLabel="Save")}deleteComment(t){this.list[t].userName===this.auth.getUsername()&&(this.list.splice(t,1),this.applicationComments.splice(t,1),this.list=[...this.list],this.commentChange.emit(this.applicationComments)),this.isEditingComment=!1}isCommentAuthor(t){return this.list[t].userName===this.auth.getUsername()&&!this.list[t].id}}return t.\u0275fac=function(e){return new(e||t)(D.Ob(X.d),D.Ob(U.c))},t.\u0275cmp=D.Ib({type:t,selectors:[["fury-comments"]],inputs:{applicationComments:"applicationComments",isViewOnly:"isViewOnly"},outputs:{commentChange:"commentChange"},decls:23,vars:8,consts:[[3,"formGroup",4,"ngIf"],[1,"list","comments-table",3,"hideHeader"],["mat-table","","mat-table","","matSort","",3,"dataSource"],["matColumnDef","nber"],["mat-header-cell","","style","width: 5%","class","tableFontSize firstColumnTable",4,"matHeaderCellDef"],["mat-cell","","class","tableFontSize firstColumnTable",4,"matCellDef"],["matColumnDef","comment"],["mat-header-cell","","class","tableFontSize ","style","width: 50%",4,"matHeaderCellDef"],["mat-cell","","class","tableFontSize ",4,"matCellDef"],["matColumnDef","creationDate"],["mat-header-cell","","style","width: 25%",4,"matHeaderCellDef"],["mat-cell","","class","tableFontSize",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","style","width: 10%",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-cell","","class","actions",4,"matCellDef"],["matColumnDef","noData"],["mat-footer-cell","","colspan","5",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],[3,"formGroup"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","placeholder","Comment","type","text","rows","3","formControlName","commentCtrl"],["align","end",4,"ngIf"],["style","text-align: right; padding-top: 5px; padding-bottom: 5px;",4,"ngIf"],["align","end"],[2,"text-align","right","padding-top","5px","padding-bottom","5px"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-header-cell","",1,"tableFontSize","firstColumnTable",2,"width","5%"],["mat-cell","",1,"tableFontSize","firstColumnTable"],["mat-header-cell","",1,"tableFontSize",2,"width","50%"],["mat-cell","",1,"tableFontSize"],["mat-header-cell","",2,"width","25%"],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"actions"],[4,"ngIf"],[1,"link",3,"click"],["color","primary"],["color","warn"],["mat-footer-cell","","colspan","5"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"]],template:function(t,e){1&t&&(D.Oc(0,mt,5,3,"form",0),D.Ub(1,"fury-list",1),D.Ub(2,"table",2),D.Sb(3,3),D.Oc(4,lt,2,0,"th",4),D.Oc(5,dt,2,1,"td",5),D.Rb(),D.Sb(6,6),D.Oc(7,ut,2,0,"th",7),D.Oc(8,pt,2,1,"td",8),D.Rb(),D.Sb(9,9),D.Oc(10,bt,2,0,"th",10),D.Oc(11,ht,2,1,"td",11),D.Rb(),D.Sb(12,12),D.Oc(13,ft,2,0,"th",13),D.Oc(14,gt,2,1,"td",11),D.Rb(),D.Sb(15,14),D.Oc(16,yt,1,0,"th",13),D.Oc(17,Tt,2,1,"td",15),D.Rb(),D.Sb(18,16),D.Oc(19,It,2,0,"td",17),D.Rb(),D.Oc(20,wt,1,0,"tr",18),D.Oc(21,Dt,1,0,"tr",19),D.Oc(22,Ut,1,3,"tr",20),D.Tb(),D.Tb()),2&t&&(D.nc("ngIf",!e.isViewOnly),D.Cb(1),D.nc("hideHeader",!0),D.Cb(1),D.nc("dataSource",e.list),D.Cb(18),D.nc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),D.Cb(1),D.nc("matRowDefColumns",e.displayedColumns),D.Cb(1),D.nc("matFooterRowDef",D.qc(7,Ot)))},directives:[i.o,x.a,u.n,b.a,u.c,u.i,u.b,u.e,u.k,u.m,u.g,X.v,X.o,X.h,tt.d,K.b,it.b,X.c,X.n,X.g,tt.c,E.a,R.a,u.h,u.a,u.d,u.j,u.l,u.f,i.m,st.a],styles:[""]}),t})();const At=["autosize"];function vt(t,e){if(1&t&&(D.Ub(0,"mat-option",22),D.Qc(1),D.Tb()),2&t){const t=e.$implicit;D.nc("value",t),D.Cb(1),D.Sc("",t.key," ")}}function xt(t,e){if(1&t&&(D.Ub(0,"mat-option",22),D.Qc(1),D.Tb()),2&t){const t=e.$implicit;D.nc("value",t),D.Cb(1),D.Sc("",t.key," ")}}const Lt=function(){return["Complaints"]};let Et=(()=>{class t extends T.a{constructor(t,e,a,i,n){super(a,i,n),this.formBuilder=t,this.activateRoute=e,this.authService=a,this._workflowService=i,this.registrationService=n,this.subject$=new h.a(1),this.data$=this.subject$.asObservable(),this.application=new o,this.personalDataAffected=[],this.RemedialActions=[],this.list=[],this.displayColumns=["nber","impact","actions"],this._gap=16,this.gap=this._gap+"px",this.col2=`1 1 calc(50% - ${this._gap/2}px)`,this.col3=`1 1 calc(33.3333% - ${this._gap/1.5}px)`,this.operationType=e.routeConfig.data.action,console.log(this.operationType),"EDIT"===this.operationType?(this.isEditMode=!0,this.application.comments=[]):"CREATE"===this.operationType?(this.isEditMode=!1,this.application.comments=[]):"VIEW"===this.operationType&&(this.isEditMode=!1,this.isViewOnly=!0)}ngOnInit(){this.initForm(),this.personalDataAffected=Object.entries(r).map(([t,e])=>({key:t,value:e})),this.RemedialActions=Object.entries(c).map(([t,e])=>({key:t,value:e})),this.getSampleJson.subscribe(t=>{this.application=t}),this.mapFields(),this.disableFieldsByStatus(),this.isViewOnly&&this.disableAllControls()}mapFields(){this.isApplicationValid=!0,this.complaintForm.get("personalDataAffected").setValue(this.application.personalDataAffected),this.complaintForm.get("reasonForTheComplaint").setValue(this.application.reasonForTheComplaint),this.complaintForm.get("complaintDetails").setValue(this.application.complaintDetails),this.complaintForm.get("remedialActions").setValue(this.application.remedialAction),this.complaintForm.get("lastModificationDate").setValue(this.application.lastModificationDate),this.complaintForm.get("dataSubjectName").setValue(this.application.dataSubject.name),this.complaintForm.get("dataSubjectPhone").setValue(this.application.dataSubject.phone),this.complaintForm.get("dataSubjectEmail").setValue(this.application.dataSubject.email)}initForm(){this.complaintForm=this.formBuilder.group({personalDataAffected:["",X.u.compose([X.u.required])],reasonForTheComplaint:["",X.u.compose([X.u.required])],complaintDetails:["",X.u.compose([X.u.required])],remedialActions:["",X.u.compose([X.u.required])],dataSubjectName:["",X.u.compose([X.u.required])],dataSubjectPhone:["",X.u.compose([X.u.required])],dataSubjectEmail:["",X.u.compose([X.u.required])],lastModificationDate:[]})}disableFieldsByStatus(){this.application&&"NEW"!==this.application.status&&"STORED"!==this.application.status&&"ISSUED"===this.application.status&&this.disableAllControls()}disableAllControls(){this.complaintForm.disable()}onCommentChange(t){t&&(this.application.comments=t)}formTriggler(t){switch(t){case"EDIT":case"CREATE":break;case"VIEW":this.isViewOnly=!0}}get getSampleJson(){return Object(f.a)(m)}}return t.\u0275fac=function(e){return new(e||t)(D.Ob(X.d),D.Ob(n.a),D.Ob(U.c),D.Ob(I.a),D.Ob(w.a))},t.\u0275cmp=D.Ib({type:t,selectors:[["fury-complaints-edit"]],viewQuery:function(t,e){if(1&t&&D.Uc(At,!0),2&t){let t;D.zc(t=D.dc())&&(e.autosize=t.first)}},features:[D.zb],decls:57,vars:12,consts:[["mode","card"],["current","View",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex",""],["formControlName","personalDataAffected","multiple",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","2 1 auto"],["formControlName","reasonForTheComplaint","matInput",""],["formControlName","remedialActions","multiple",""],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","complaintDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],[3,"applicationComments","isViewOnly","commentChange"],[3,"value"]],template:function(t,e){1&t&&(D.Ub(0,"fury-page-layout",0),D.Ub(1,"fury-page-layout-header"),D.Pb(2,"fury-breadcrumbs",1),D.Tb(),D.Ub(3,"fury-page-layout-content",2),D.Ub(4,"div",3),D.Ub(5,"fury-card",4),D.Ub(6,"fury-card-header"),D.Ub(7,"fury-card-header-heading"),D.Qc(8,"Complaint Information"),D.Tb(),D.Tb(),D.Ub(9,"fury-card-content",5),D.Ub(10,"form",6),D.Ub(11,"fieldset"),D.Ub(12,"legend"),D.Qc(13,"General Info"),D.Tb(),D.Ub(14,"div",7),D.Ub(15,"div",8),D.Ub(16,"mat-form-field",9),D.Ub(17,"mat-label"),D.Qc(18,"Personal Data Affected"),D.Tb(),D.Ub(19,"mat-select",10),D.Ub(20,"mat-option"),D.Qc(21,"Select Personal Data Affected"),D.Tb(),D.Oc(22,vt,2,2,"mat-option",11),D.Tb(),D.Tb(),D.Ub(23,"mat-form-field",12),D.Ub(24,"mat-label"),D.Qc(25,"Reason for the complaint"),D.Tb(),D.Pb(26,"input",13),D.Tb(),D.Ub(27,"mat-form-field",9),D.Ub(28,"mat-label"),D.Qc(29,"Remedial Actions"),D.Tb(),D.Ub(30,"mat-select",14),D.Ub(31,"mat-option"),D.Qc(32,"Select Remedial Action"),D.Tb(),D.Oc(33,xt,2,2,"mat-option",11),D.Tb(),D.Tb(),D.Tb(),D.Ub(34,"div",8),D.Ub(35,"mat-form-field",15),D.Ub(36,"mat-label"),D.Qc(37,"Complaint Details"),D.Tb(),D.Pb(38,"textarea",16,17),D.Tb(),D.Tb(),D.Tb(),D.Tb(),D.Ub(40,"fieldset"),D.Ub(41,"legend"),D.Qc(42,"Data Subject Details"),D.Tb(),D.Ub(43,"div",8),D.Ub(44,"mat-form-field",12),D.Ub(45,"mat-label"),D.Qc(46,"Data subject name"),D.Tb(),D.Pb(47,"input",18),D.Tb(),D.Ub(48,"mat-form-field",12),D.Ub(49,"mat-label"),D.Qc(50,"Data Subject Email"),D.Tb(),D.Pb(51,"input",19),D.Tb(),D.Ub(52,"mat-form-field",12),D.Ub(53,"mat-label"),D.Qc(54,"Data Subject Phone"),D.Tb(),D.Pb(55,"input",20),D.Tb(),D.Tb(),D.Tb(),D.Tb(),D.Tb(),D.Tb(),D.Tb(),D.Ub(56,"fury-comments",21),D.cc("commentChange",function(t){return e.onCommentChange(t)}),D.Tb(),D.Tb(),D.Tb()),2&t&&(D.Cb(2),D.nc("@fadeInRight",void 0)("crumbs",D.qc(11,Lt)),D.Cb(1),D.nc("fxLayoutGap",e.gap),D.Cb(1),D.nc("fxLayoutGap",e.gap),D.Cb(1),D.nc("fxFlex.gt-sm",e.col2)("@fadeInUp",void 0),D.Cb(5),D.nc("formGroup",e.complaintForm),D.Cb(12),D.nc("ngForOf",e.personalDataAffected),D.Cb(11),D.nc("ngForOf",e.RemedialActions),D.Cb(23),D.nc("applicationComments",e.application.comments)("isViewOnly",e.isViewOnly))},directives:[O.a,F.a,A.a,v.a,K.e,K.f,K.b,K.d,Z.a,Z.d,Z.g,Z.c,X.v,X.o,X.h,tt.d,tt.h,et.a,X.n,X.g,at.m,i.n,X.c,it.b,nt.b,Ft],styles:[".source[_ngcontent-%COMP%]{margin-bottom:12px;margin-left:-24px;margin-right:-24px}.result[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0 0 8px}fieldset[_ngcontent-%COMP%]{border-width:1px!important;border-color:#f5f5f5!important}legend[_ngcontent-%COMP%]{padding:5px}.form-padding[_ngcontent-%COMP%]{padding-top:15px}"],data:{animation:[y.a,C.a,J.a]}}),t})();const kt=[{path:"find",component:W,canActivate:[Y.a],data:{roles:["view.complaint","find.complaint"],action:"FIND"}},{path:"view-complaint",component:Et,canActivate:[Y.a],data:{roles:["view.complaint"],action:"VIEW"}},{path:"report-complaint",component:Et,canActivate:[Y.a],data:{roles:["report.complaint"],action:"EDIT"}}];let Rt=(()=>{class t{}return t.\u0275mod=D.Mb({type:t}),t.\u0275inj=D.Lb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(kt)],n.j]}),t})();var Nt=a("q8Jb"),Mt=a("WCGO"),Pt=a("0jmt"),jt=a("6BeY"),Qt=a("KthW"),Gt=a("AyUp"),Vt=a("QMK6"),_t=a("VE2z"),zt=a("hVPj"),Ht=a("VCcF");let $t=(()=>{class t{}return t.\u0275mod=D.Mb({type:t}),t.\u0275inj=D.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Rt,Qt.a,Mt.a,Gt.a,X.s,Ht.a,Pt.a,zt.a,Vt.a,_t.a,jt.a,Nt.a]]}),t})()}}]);