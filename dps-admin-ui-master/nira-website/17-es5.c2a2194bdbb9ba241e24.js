!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return a}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function i(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=l(t);if(e){var i=l(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return m(this,a)}}function m(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{QKnv:function(a,n,i){"use strict";i.r(n),i.d(n,"ComplaintsModule",function(){return ae});var s=i("ofXK"),m=i("tyNb"),l=function t(){u(this,t)},d=function t(e){u(this,t),this.id=e.id,this.regNo=e.regNo,this.remedialAction=e.remedialAction,this.reasonForTheComplaint=e.reasonForTheComplaint,this.addressedTo=e.addressedTo,this.dataSubject=e.dataSubject,this.personalDataAffected=e.personalDataAffected,this.status=e.status,this.complaintDetails=e.complaintDetails,this.lastModificationDate=e.lastModificationDate,this.name=e.dataSubject.name,this.phone=e.dataSubject.name,this.comments=e.comments},p=function(t){return t.NATIONALITY="Nationality",t.AGE="Age / Date of Birth",t.MARITAL_STATUS="Marital Status",t.EDUCATION="Education Level",t.IDENTIFICATION="Identification Number e.g NIN, TIN, Driving Permit Number",t.IDENTITY_DATA="Identity Data",t.PHILOSPHICAL_BELIEFS="Philosophical Beliefs",t.POLITICAL_OPINION="Political Opinion",t.SEXUAL_LIFE="Sexual Life",t.FINANCIAL_INFORMATION="Financial Information",t.MEDICAL="Medical Records",t}({}),b=function(t){return t.CORRECT_THE_INFORMATION="Correct the information",t.DELETE_OR_DESTROY_THE_INFORMATION=" Delete or Destroy  The information",t.NOTIFIY_THE_THIRD_PARTIES="Write to or notify the third parties whom then data has been shared",t}({}),f={id:1,regNo:"C202100001",personalDataAffected:[p.NATIONALITY,p.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},h=[{id:1,regNo:"C202100001",addressedTo:"Uganda Revenue Authority",personalDataAffected:[p.NATIONALITY,p.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},{id:1,regNo:"C202100003",addressedTo:"Airtel Uganda",personalDataAffected:[p.NATIONALITY,p.AGE],status:"Submitted",reasonForTheComplaint:"Infringement / Violation of Act",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"jkalungi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"John Kalungi",phone:"0792310084",email:"jkalungi@gmail.com"}},{id:1,regNo:"C202100004",addressedTo:"Airtel Uganda",personalDataAffected:[p.NATIONALITY,p.AGE],status:"Submitted",reasonForTheComplaint:"Inaccurate personal data in the possession of data controllers",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Isaac Akileng",phone:"0792310084",email:"iakileng@gmail.com"}}],g=i("pbD1"),y=i("+0xr"),C=i("M9IT"),T=i("Dh3D"),v=i("jtHE"),I=i("LRne"),w=i("pLZG"),D=i("Ku73"),S=i("nStZ"),O=i("M2Gj"),A=i("3eU1"),U=i("j7tn"),k=i("fXoL"),F=i("0IaG"),E=i("aTx8"),x=i("xBcV"),L=i("Hbgg"),R=i("rnAf"),j=i("rvYj"),N=i("a+RD"),P=i("bSwM"),M=i("bTqV"),_=i("STbY"),Q=i("NFeN"),G=["autosize"];function V(t,e){1&t&&(k.Ub(0,"th",13),k.Ub(1,"mat-checkbox",14),k.cc("click",function(t){return t.stopPropagation()}),k.Tb(),k.Tb())}function z(t,e){1&t&&(k.Ub(0,"td",15),k.Ub(1,"mat-checkbox",14),k.cc("click",function(t){return t.stopPropagation()}),k.Tb(),k.Tb())}function H(t,e){if(1&t&&(k.Ub(0,"th",20),k.Qc(1),k.Tb()),2&t){var a=k.gc(2).$implicit;k.Cb(1),k.Sc(" ",a.name,"")}}function B(t,e){if(1&t&&(k.Ub(0,"td",21),k.Qc(1),k.Tb()),2&t){var a=e.$implicit,n=k.gc(2).$implicit;k.Cb(1),k.Sc(" ",a[n.property]," ")}}function $(t,e){if(1&t&&(k.Sb(0,17),k.Oc(1,H,2,1,"th",18),k.Oc(2,B,2,1,"td",19),k.Rb()),2&t){var a=k.gc().$implicit;k.nc("matColumnDef",a.property)}}function q(t,e){if(1&t&&(k.Sb(0),k.Oc(1,$,3,1,"ng-container",16),k.Rb()),2&t){var a=e.$implicit;k.Cb(1),k.nc("ngIf",a.isModelProperty)}}function W(t,e){1&t&&k.Pb(0,"th",22)}var Y=function(){return["/complaints/view-complaint"]};function X(t,e){if(1&t&&(k.Ub(0,"td",15),k.Ub(1,"button",23),k.cc("click",function(t){return t.stopPropagation()}),k.Ub(2,"mat-icon"),k.Qc(3,"more_vert"),k.Tb(),k.Tb(),k.Ub(4,"mat-menu",24,25),k.Ub(6,"a",26),k.Ub(7,"mat-icon"),k.Qc(8,"visibility"),k.Tb(),k.Ub(9,"span"),k.Qc(10,"View"),k.Tb(),k.Tb(),k.Ub(11,"button",27),k.Ub(12,"mat-icon"),k.Qc(13,"settings"),k.Tb(),k.Ub(14,"span"),k.Qc(15,"Manage"),k.Tb(),k.Tb(),k.Tb(),k.Tb()),2&t){var a=k.Ac(5);k.Cb(1),k.nc("matMenuTriggerFor",a),k.Cb(5),k.nc("routerLink",k.qc(2,Y))}}function J(t,e){1&t&&k.Pb(0,"tr",28)}function K(t,e){1&t&&k.Pb(0,"tr",29)}var Z,tt=function(){return["Complaints"]},et=((Z=function(t){r(a,t);var e=c(a);function a(t,n,i,o,r){var s;return u(this,a),(s=e.call(this,i,o,r)).dialog=t,s.route=n,s.authService=i,s._workflowService=o,s.registrationService=r,s.subject$=new v.a(1),s.data$=s.subject$.asObservable(),s.statusList=[],s.statuses=[{code:"001",description:"Form 9"},{code:"002",description:"FORM 6"},{code:"003",description:"FORM 11"}],s.columns=[{name:"id",property:"",visible:!1,isModelProperty:!0},{name:"Reference No",property:"regNo",visible:!0,isModelProperty:!0},{name:"Reason for the complaint",property:"reasonForTheComplaint",visible:!0,isModelProperty:!0},{name:"Addressed To",property:"addressedTo",visible:!0,isModelProperty:!0},{name:"Subject Name",property:"name",visible:!0,isModelProperty:!0},{name:"Subject Phone",property:"phone",visible:!0,isModelProperty:!0},{name:"Status",property:"status",visible:!0,isModelProperty:!0},{name:"Updated Date",property:"lastModificationDate",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],s.pageSize=10,s}return o(a,[{key:"getData",value:function(){return Object(I.a)(h.map(function(t){return new d(t)}))}},{key:"ngOnInit",value:function(){var t=this;this.getData().subscribe(function(e){t.subject$.next(e)}),this.dataSource=new y.o,this.data$.pipe(Object(w.a)(function(t){return!!t})).subscribe(function(e){t.complaints=e,t.dataSource.data=e}),this.route.paramMap.subscribe(function(t){console.log(t.has("navigationPrams"))}),this.statusList=this.getGenericDDL(this.statuses,{key:"code",label:"description"},!1),this.defineSearchFields()}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"onFilterChange",value:function(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}},{key:"ngOnDestroy",value:function(){}},{key:"defineSearchFields",value:function(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:g.e,dataType:g.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:g.e,dataType:g.a.TEXT},{label:"Form Types",fieldName:"Form",operators:g.d,dataType:g.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:g.e,dataType:g.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:g.e,dataType:g.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:g.c,dataType:g.a.DATETIME}]}},{key:"visibleColumns",get:function(){return this.columns.filter(function(t){return t.visible}).map(function(t){return t.property})}}]),a}(O.a)).\u0275fac=function(t){return new(t||Z)(k.Ob(F.b),k.Ob(m.a),k.Ob(E.c),k.Ob(A.a),k.Ob(U.a))},Z.\u0275cmp=k.Ib({type:Z,selectors:[["fury-complaints-find"]],viewQuery:function(t,e){var a;1&t&&(k.Jc(C.a,!0),k.Jc(T.a,!0),k.Uc(G,!0)),2&t&&(k.zc(a=k.dc())&&(e.paginator=a.first),k.zc(a=k.dc())&&(e.sort=a.first),k.zc(a=k.dc())&&(e.autosize=a.first))},inputs:{columns:"columns"},features:[k.zb],decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Complaints","finderDialogTitle","Complaints Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"routerLink"],["mat-menu-item",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(k.Ub(0,"fury-page-layout",0),k.Ub(1,"fury-page-layout-header"),k.Pb(2,"fury-breadcrumbs",1),k.Tb(),k.Ub(3,"fury-page-layout-content"),k.Ub(4,"fury-list",2),k.cc("filterChange",function(t){return e.onFilterChange(t)}),k.Ub(5,"table",3),k.Sb(6,4),k.Oc(7,V,2,0,"th",5),k.Oc(8,z,2,0,"td",6),k.Rb(),k.Oc(9,q,2,1,"ng-container",7),k.Sb(10,8),k.Oc(11,W,1,0,"th",9),k.Oc(12,X,16,3,"td",6),k.Rb(),k.Oc(13,J,1,0,"tr",10),k.Oc(14,K,1,0,"tr",11),k.Tb(),k.Pb(15,"mat-paginator",12),k.Tb(),k.Tb(),k.Tb()),2&t&&(k.Cb(2),k.nc("@fadeInRight",void 0)("crumbs",k.qc(10,tt)),k.Cb(1),k.nc("@fadeInUp",void 0),k.Cb(1),k.nc("columns",e.columns)("searchFields",e.searchFields),k.Cb(1),k.nc("dataSource",e.dataSource),k.Cb(4),k.nc("ngForOf",e.columns),k.Cb(4),k.nc("matHeaderRowDef",e.visibleColumns),k.Cb(1),k.nc("matRowDefColumns",e.visibleColumns),k.Cb(1),k.nc("pageSize",e.pageSize))},directives:[x.a,L.a,R.a,j.a,N.a,y.n,T.a,y.c,y.i,y.b,s.n,y.k,y.m,C.a,y.h,P.a,y.a,s.o,T.b,M.a,_.e,Q.a,_.a,m.i,_.c,m.h,y.j,y.l],styles:[""],data:{animation:[D.a,S.a]}}),Z),at=i("sF9m"),nt=i("3Pt+"),it=i("KGtp"),ot=i("XiUz"),rt=i("4FRi"),st=i("kmnG"),ct=i("d3UM"),mt=i("FKr1"),lt=i("qFsG"),ut=i("ihCf"),dt=function t(){u(this,t)},pt=i("znSr");function bt(t,e){1&t&&(k.Ub(0,"mat-error",26),k.Qc(1,"Comment required "),k.Tb())}function ft(t,e){if(1&t){var a=k.Vb();k.Ub(0,"div",27),k.Ub(1,"button",28),k.cc("click",function(){k.Ec(a);var t=k.gc(2);return t.addOrUpdateComment(t.isEditingComment?2:1)}),k.Ub(2,"mat-icon"),k.Qc(3),k.Tb(),k.Ub(4,"span"),k.Qc(5),k.Tb(),k.Tb(),k.Qc(6,"\xa0 "),k.Tb()}if(2&t){var n=k.gc(2);k.Cb(1),k.nc("disabled",!n.commentsFormGroup.valid),k.Cb(2),k.Rc(n.commentButtonIcon),k.Cb(2),k.Rc(n.commentButtonLabel)}}function ht(t,e){if(1&t&&(k.Ub(0,"form",21),k.Ub(1,"mat-form-field",22),k.Pb(2,"textarea",23),k.Oc(3,bt,2,0,"mat-error",24),k.Tb(),k.Oc(4,ft,7,3,"div",25),k.Tb()),2&t){var a=k.gc();k.nc("formGroup",a.commentsFormGroup),k.Cb(3),k.nc("ngIf",a.commentsFormGroup.get("commentCtrl").hasError("required")),k.Cb(1),k.nc("ngIf",!a.isViewOnly)}}function gt(t,e){1&t&&(k.Ub(0,"th",29),k.Qc(1,"#"),k.Tb())}function yt(t,e){if(1&t&&(k.Ub(0,"td",30),k.Qc(1),k.Tb()),2&t){var a=e.index;k.Cb(1),k.Sc(" ",a+1,"")}}function Ct(t,e){1&t&&(k.Ub(0,"th",31),k.Qc(1," Comment"),k.Tb())}function Tt(t,e){if(1&t&&(k.Ub(0,"td",32),k.Qc(1),k.Tb()),2&t){var a=e.$implicit;k.Cb(1),k.Sc(" ",a.comment,"")}}function vt(t,e){1&t&&(k.Ub(0,"th",33),k.Qc(1," Date"),k.Tb())}function It(t,e){if(1&t&&(k.Ub(0,"td",32),k.Qc(1),k.Tb()),2&t){var a=e.$implicit;k.Cb(1),k.Sc(" ",a.creationDate,"")}}function wt(t,e){1&t&&(k.Ub(0,"th",34),k.Qc(1," User"),k.Tb())}function Dt(t,e){if(1&t&&(k.Ub(0,"td",32),k.Qc(1),k.Tb()),2&t){var a=e.$implicit;k.Cb(1),k.Sc(" ",a.username,"")}}function St(t,e){1&t&&k.Pb(0,"th",34)}function Ot(t,e){if(1&t){var a=k.Vb();k.Sb(0),k.Ub(1,"a",37),k.cc("click",function(){k.Ec(a);var t=k.gc().index;return k.gc().manageComment(2,t)}),k.Ub(2,"mat-icon",38),k.Qc(3,"edit"),k.Tb(),k.Tb(),k.Qc(4,"\xa0\xa0 "),k.Ub(5,"a",37),k.cc("click",function(){k.Ec(a);var t=k.gc().index;return k.gc().deleteComment(t)}),k.Ub(6,"mat-icon",39),k.Qc(7,"delete"),k.Tb(),k.Tb(),k.Rb()}}function At(t,e){if(1&t&&(k.Ub(0,"td",35),k.Oc(1,Ot,8,0,"ng-container",36),k.Tb()),2&t){var a=e.index,n=k.gc();k.Cb(1),k.nc("ngIf",!n.isViewOnly&&n.isCommentAuthor(a))}}function Ut(t,e){1&t&&(k.Ub(0,"td",40),k.Qc(1," There is no comments in the application! "),k.Tb())}function kt(t,e){1&t&&k.Pb(0,"tr",41)}function Ft(t,e){1&t&&k.Pb(0,"tr",42)}var Et=function(t){return{hide:t}};function xt(t,e){if(1&t&&k.Pb(0,"tr",43),2&t){var a=k.gc();k.nc("ngClass",k.rc(1,Et,!(0==(null==a.list?null:a.list.length))))}}var Lt,Rt=function(){return["noData"]},jt=((Lt=function(){function t(e,a){u(this,t),this._formBuilder=e,this.auth=a,this.commentChange=new k.o,this.dateTimeEvent=new k.o,this.processingEvent=new k.o,this.errorsEvent=new k.o,this.displayedColumns=["nber","comment","creationDate","username","actions"],this.list=[],this.isEditingComment=!1,this.commentButtonIcon="add_circle_outline",this.commentButtonLabel=" Add new comment",this.commentEditId=0,this.dateTimeRowId=0,this.comment=new dt}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.processingEvent.subscribe(function(t){return console.log(t)}),this.errorsEvent.subscribe(function(e){t.commentChange.emit(t.applicationComments)}),this.commentsFormGroup=this._formBuilder.group({commentCtrl:["",nt.u.required]}),this.dateTimeEvent.subscribe(function(e){e&&(t.list[t.dateTimeRowId-1].creationDate=e),t.commentChange.emit(t.applicationComments)}),this.applicationComments&&this.applicationComments.forEach(function(e){t.list.push(e)})}},{key:"addOrUpdateComment",value:function(t){this.commentsFormGroup.valid&&(this.mapCommentToControl(1),1===t?(this.comment.username=this.auth.getUsername(),this.list.push(this.comment),this.applicationComments.push(this.comment),this.list=e(this.list),this.dateTimeRowId=this.list.length):(this.list[this.commentEditId]=this.comment,this.applicationComments[this.commentEditId]=this.comment,this.list=e(this.list),this.dateTimeRowId=this.commentEditId+1),this.resetComment())}},{key:"mapCommentToControl",value:function(t){1===t?this.comment.comment=this.commentsFormGroup.get("commentCtrl").value:this.commentsFormGroup.get("commentCtrl").setValue(this.comment.comment)}},{key:"resetComment",value:function(){this.commentsFormGroup.reset(),this.commentsFormGroup.markAsPristine(),this.commentsFormGroup.markAsUntouched(),this.comment=new dt,this.validateCommentLabels(1),this.manageComment(1)}},{key:"manageComment",value:function(t,e){2===t?(this.comment=this.applicationComments[e],this.isEditingComment=!0,this.commentEditId=e,this.mapCommentToControl(t)):(this.isEditingComment=!1,this.comment=new dt,this.commentEditId=0),this.validateCommentLabels(t)}},{key:"validateCommentLabels",value:function(t){1===t?(this.commentButtonIcon="add_circle_outline",this.commentButtonLabel="Add new comment"):(this.commentButtonIcon="save",this.commentButtonLabel="Save")}},{key:"deleteComment",value:function(t){this.list[t].userName===this.auth.getUsername()&&(this.list.splice(t,1),this.applicationComments.splice(t,1),this.list=e(this.list),this.commentChange.emit(this.applicationComments)),this.isEditingComment=!1}},{key:"isCommentAuthor",value:function(t){return this.list[t].userName===this.auth.getUsername()&&!this.list[t].id}}]),t}()).\u0275fac=function(t){return new(t||Lt)(k.Ob(nt.d),k.Ob(E.c))},Lt.\u0275cmp=k.Ib({type:Lt,selectors:[["fury-comments"]],inputs:{applicationComments:"applicationComments",isViewOnly:"isViewOnly"},outputs:{commentChange:"commentChange"},decls:23,vars:8,consts:[[3,"formGroup",4,"ngIf"],[1,"list","comments-table",3,"hideHeader"],["mat-table","","mat-table","","matSort","",3,"dataSource"],["matColumnDef","nber"],["mat-header-cell","","style","width: 5%","class","tableFontSize firstColumnTable",4,"matHeaderCellDef"],["mat-cell","","class","tableFontSize firstColumnTable",4,"matCellDef"],["matColumnDef","comment"],["mat-header-cell","","class","tableFontSize ","style","width: 50%",4,"matHeaderCellDef"],["mat-cell","","class","tableFontSize ",4,"matCellDef"],["matColumnDef","creationDate"],["mat-header-cell","","style","width: 25%",4,"matHeaderCellDef"],["mat-cell","","class","tableFontSize",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","style","width: 10%",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-cell","","class","actions",4,"matCellDef"],["matColumnDef","noData"],["mat-footer-cell","","colspan","5",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],[3,"formGroup"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","placeholder","Comment","type","text","rows","3","formControlName","commentCtrl"],["align","end",4,"ngIf"],["style","text-align: right; padding-top: 5px; padding-bottom: 5px;",4,"ngIf"],["align","end"],[2,"text-align","right","padding-top","5px","padding-bottom","5px"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-header-cell","",1,"tableFontSize","firstColumnTable",2,"width","5%"],["mat-cell","",1,"tableFontSize","firstColumnTable"],["mat-header-cell","",1,"tableFontSize",2,"width","50%"],["mat-cell","",1,"tableFontSize"],["mat-header-cell","",2,"width","25%"],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"actions"],[4,"ngIf"],[1,"link",3,"click"],["color","primary"],["color","warn"],["mat-footer-cell","","colspan","5"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",3,"ngClass"]],template:function(t,e){1&t&&(k.Oc(0,ht,5,3,"form",0),k.Ub(1,"fury-list",1),k.Ub(2,"table",2),k.Sb(3,3),k.Oc(4,gt,2,0,"th",4),k.Oc(5,yt,2,1,"td",5),k.Rb(),k.Sb(6,6),k.Oc(7,Ct,2,0,"th",7),k.Oc(8,Tt,2,1,"td",8),k.Rb(),k.Sb(9,9),k.Oc(10,vt,2,0,"th",10),k.Oc(11,It,2,1,"td",11),k.Rb(),k.Sb(12,12),k.Oc(13,wt,2,0,"th",13),k.Oc(14,Dt,2,1,"td",11),k.Rb(),k.Sb(15,14),k.Oc(16,St,1,0,"th",13),k.Oc(17,At,2,1,"td",15),k.Rb(),k.Sb(18,16),k.Oc(19,Ut,2,0,"td",17),k.Rb(),k.Oc(20,kt,1,0,"tr",18),k.Oc(21,Ft,1,0,"tr",19),k.Oc(22,xt,1,3,"tr",20),k.Tb(),k.Tb()),2&t&&(k.nc("ngIf",!e.isViewOnly),k.Cb(1),k.nc("hideHeader",!0),k.Cb(1),k.nc("dataSource",e.list),k.Cb(18),k.nc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),k.Cb(1),k.nc("matRowDefColumns",e.displayedColumns),k.Cb(1),k.nc("matFooterRowDef",k.qc(7,Rt)))},directives:[s.o,N.a,y.n,T.a,y.c,y.i,y.b,y.e,y.k,y.m,y.g,nt.v,nt.o,nt.h,st.d,ot.b,lt.b,nt.c,nt.n,nt.g,st.c,M.a,Q.a,y.h,y.a,y.d,y.j,y.l,y.f,s.m,pt.a],styles:[""]}),Lt),Nt=["autosize"];function Pt(t,e){if(1&t&&(k.Ub(0,"mat-option",22),k.Qc(1),k.Tb()),2&t){var a=e.$implicit;k.nc("value",a),k.Cb(1),k.Sc("",a.key," ")}}function Mt(t,e){if(1&t&&(k.Ub(0,"mat-option",22),k.Qc(1),k.Tb()),2&t){var a=e.$implicit;k.nc("value",a),k.Cb(1),k.Sc("",a.key," ")}}var _t,Qt,Gt,Vt=function(){return["Complaints"]},zt=((_t=function(e){r(n,e);var a=c(n);function n(t,e,i,o,r){var s;return u(this,n),(s=a.call(this,i,o,r)).formBuilder=t,s.activateRoute=e,s.authService=i,s._workflowService=o,s.registrationService=r,s.subject$=new v.a(1),s.data$=s.subject$.asObservable(),s.application=new l,s.personalDataAffected=[],s.RemedialActions=[],s.list=[],s.displayColumns=["nber","impact","actions"],s._gap=16,s.gap=s._gap+"px",s.col2="1 1 calc(50% - ".concat(s._gap/2,"px)"),s.col3="1 1 calc(33.3333% - ".concat(s._gap/1.5,"px)"),s.operationType=e.routeConfig.data.action,console.log(s.operationType),"EDIT"===s.operationType?(s.isEditMode=!0,s.application.comments=[]):"CREATE"===s.operationType?(s.isEditMode=!1,s.application.comments=[]):"VIEW"===s.operationType&&(s.isEditMode=!1,s.isViewOnly=!0),s}return o(n,[{key:"ngOnInit",value:function(){var e=this;this.initForm(),this.personalDataAffected=Object.entries(p).map(function(e){var a=t(e,2);return{key:a[0],value:a[1]}}),this.RemedialActions=Object.entries(b).map(function(e){var a=t(e,2);return{key:a[0],value:a[1]}}),this.getSampleJson.subscribe(function(t){e.application=t}),this.mapFields(),this.disableFieldsByStatus(),this.isViewOnly&&this.disableAllControls()}},{key:"mapFields",value:function(){this.isApplicationValid=!0,this.complaintForm.get("personalDataAffected").setValue(this.application.personalDataAffected),this.complaintForm.get("reasonForTheComplaint").setValue(this.application.reasonForTheComplaint),this.complaintForm.get("complaintDetails").setValue(this.application.complaintDetails),this.complaintForm.get("remedialActions").setValue(this.application.remedialAction),this.complaintForm.get("lastModificationDate").setValue(this.application.lastModificationDate),this.complaintForm.get("dataSubjectName").setValue(this.application.dataSubject.name),this.complaintForm.get("dataSubjectPhone").setValue(this.application.dataSubject.phone),this.complaintForm.get("dataSubjectEmail").setValue(this.application.dataSubject.email)}},{key:"initForm",value:function(){this.complaintForm=this.formBuilder.group({personalDataAffected:["",nt.u.compose([nt.u.required])],reasonForTheComplaint:["",nt.u.compose([nt.u.required])],complaintDetails:["",nt.u.compose([nt.u.required])],remedialActions:["",nt.u.compose([nt.u.required])],dataSubjectName:["",nt.u.compose([nt.u.required])],dataSubjectPhone:["",nt.u.compose([nt.u.required])],dataSubjectEmail:["",nt.u.compose([nt.u.required])],lastModificationDate:[]})}},{key:"disableFieldsByStatus",value:function(){this.application&&"NEW"!==this.application.status&&"STORED"!==this.application.status&&"ISSUED"===this.application.status&&this.disableAllControls()}},{key:"disableAllControls",value:function(){this.complaintForm.disable()}},{key:"onCommentChange",value:function(t){t&&(this.application.comments=t)}},{key:"formTriggler",value:function(t){switch(t){case"EDIT":case"CREATE":break;case"VIEW":this.isViewOnly=!0}}},{key:"getSampleJson",get:function(){return Object(I.a)(f)}}]),n}(O.a)).\u0275fac=function(t){return new(t||_t)(k.Ob(nt.d),k.Ob(m.a),k.Ob(E.c),k.Ob(A.a),k.Ob(U.a))},_t.\u0275cmp=k.Ib({type:_t,selectors:[["fury-complaints-edit"]],viewQuery:function(t,e){var a;1&t&&k.Uc(Nt,!0),2&t&&k.zc(a=k.dc())&&(e.autosize=a.first)},features:[k.zb],decls:57,vars:12,consts:[["mode","card"],["current","View",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex",""],["formControlName","personalDataAffected","multiple",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","2 1 auto"],["formControlName","reasonForTheComplaint","matInput",""],["formControlName","remedialActions","multiple",""],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","complaintDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],[3,"applicationComments","isViewOnly","commentChange"],[3,"value"]],template:function(t,e){1&t&&(k.Ub(0,"fury-page-layout",0),k.Ub(1,"fury-page-layout-header"),k.Pb(2,"fury-breadcrumbs",1),k.Tb(),k.Ub(3,"fury-page-layout-content",2),k.Ub(4,"div",3),k.Ub(5,"fury-card",4),k.Ub(6,"fury-card-header"),k.Ub(7,"fury-card-header-heading"),k.Qc(8,"Complaint Information"),k.Tb(),k.Tb(),k.Ub(9,"fury-card-content",5),k.Ub(10,"form",6),k.Ub(11,"fieldset"),k.Ub(12,"legend"),k.Qc(13,"General Info"),k.Tb(),k.Ub(14,"div",7),k.Ub(15,"div",8),k.Ub(16,"mat-form-field",9),k.Ub(17,"mat-label"),k.Qc(18,"Personal Data Affected"),k.Tb(),k.Ub(19,"mat-select",10),k.Ub(20,"mat-option"),k.Qc(21,"Select Personal Data Affected"),k.Tb(),k.Oc(22,Pt,2,2,"mat-option",11),k.Tb(),k.Tb(),k.Ub(23,"mat-form-field",12),k.Ub(24,"mat-label"),k.Qc(25,"Reason for the complaint"),k.Tb(),k.Pb(26,"input",13),k.Tb(),k.Ub(27,"mat-form-field",9),k.Ub(28,"mat-label"),k.Qc(29,"Remedial Actions"),k.Tb(),k.Ub(30,"mat-select",14),k.Ub(31,"mat-option"),k.Qc(32,"Select Remedial Action"),k.Tb(),k.Oc(33,Mt,2,2,"mat-option",11),k.Tb(),k.Tb(),k.Tb(),k.Ub(34,"div",8),k.Ub(35,"mat-form-field",15),k.Ub(36,"mat-label"),k.Qc(37,"Complaint Details"),k.Tb(),k.Pb(38,"textarea",16,17),k.Tb(),k.Tb(),k.Tb(),k.Tb(),k.Ub(40,"fieldset"),k.Ub(41,"legend"),k.Qc(42,"Data Subject Details"),k.Tb(),k.Ub(43,"div",8),k.Ub(44,"mat-form-field",12),k.Ub(45,"mat-label"),k.Qc(46,"Data subject name"),k.Tb(),k.Pb(47,"input",18),k.Tb(),k.Ub(48,"mat-form-field",12),k.Ub(49,"mat-label"),k.Qc(50,"Data Subject Email"),k.Tb(),k.Pb(51,"input",19),k.Tb(),k.Ub(52,"mat-form-field",12),k.Ub(53,"mat-label"),k.Qc(54,"Data Subject Phone"),k.Tb(),k.Pb(55,"input",20),k.Tb(),k.Tb(),k.Tb(),k.Tb(),k.Tb(),k.Tb(),k.Tb(),k.Ub(56,"fury-comments",21),k.cc("commentChange",function(t){return e.onCommentChange(t)}),k.Tb(),k.Tb(),k.Tb()),2&t&&(k.Cb(2),k.nc("@fadeInRight",void 0)("crumbs",k.qc(11,Vt)),k.Cb(1),k.nc("fxLayoutGap",e.gap),k.Cb(1),k.nc("fxLayoutGap",e.gap),k.Cb(1),k.nc("fxFlex.gt-sm",e.col2)("@fadeInUp",void 0),k.Cb(5),k.nc("formGroup",e.complaintForm),k.Cb(12),k.nc("ngForOf",e.personalDataAffected),k.Cb(11),k.nc("ngForOf",e.RemedialActions),k.Cb(23),k.nc("applicationComments",e.application.comments)("isViewOnly",e.isViewOnly))},directives:[x.a,L.a,R.a,j.a,ot.e,ot.f,ot.b,ot.d,rt.a,rt.d,rt.g,rt.c,nt.v,nt.o,nt.h,st.d,st.h,ct.a,nt.n,nt.g,mt.m,s.n,nt.c,lt.b,ut.b,jt],styles:[".source[_ngcontent-%COMP%]{margin-bottom:12px;margin-left:-24px;margin-right:-24px}.result[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0 0 8px}fieldset[_ngcontent-%COMP%]{border-width:1px!important;border-color:#f5f5f5!important}legend[_ngcontent-%COMP%]{padding:5px}.form-padding[_ngcontent-%COMP%]{padding-top:15px}"],data:{animation:[D.a,S.a,it.a]}}),_t),Ht=[{path:"find",component:et,canActivate:[at.a],data:{roles:["view.complaint","find.complaint"],action:"FIND"}},{path:"view-complaint",component:zt,canActivate:[at.a],data:{roles:["view.complaint"],action:"VIEW"}},{path:"report-complaint",component:zt,canActivate:[at.a],data:{roles:["report.complaint"],action:"EDIT"}}],Bt=((Qt=function t(){u(this,t)}).\u0275mod=k.Mb({type:Qt}),Qt.\u0275inj=k.Lb({factory:function(t){return new(t||Qt)},imports:[[m.j.forChild(Ht)],m.j]}),Qt),$t=i("q8Jb"),qt=i("WCGO"),Wt=i("0jmt"),Yt=i("6BeY"),Xt=i("KthW"),Jt=i("AyUp"),Kt=i("QMK6"),Zt=i("VE2z"),te=i("hVPj"),ee=i("VCcF"),ae=((Gt=function t(){u(this,t)}).\u0275mod=k.Mb({type:Gt}),Gt.\u0275inj=k.Lb({factory:function(t){return new(t||Gt)},imports:[[s.c,Bt,Xt.a,qt.a,Jt.a,nt.s,ee.a,Wt.a,te.a,Kt.a,Zt.a,Yt.a,$t.a]]}),Gt)}}])}();