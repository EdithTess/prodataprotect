!function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=s(t);if(e){var o=s(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return i(this,a)}}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{QKnv:function(t,n,i){"use strict";i.r(n),i.d(n,"ComplaintsModule",function(){return wa});var s=i("ofXK"),c=i("tyNb"),l=i("fXoL"),m=function t(){r(this,t)},p=function t(e){r(this,t),this.ComplaintID=e.ComplaintID,this.ComplaintSourceID=e.ComplaintSourceID,this.ComplaintTrackingNo=e.ComplaintTrackingNumber,this.ComplaintSourceName=e.ComplaintSourceName,this.EmailAddress=e.EmailAdress,this.FormName=e.FormName,this.FirstName=e.FirstName,this.FormID=e.FormID,this.FullDetailsOfComplaint=e.FullDetailsOfComplaint,this.HaveComplainedToOrganisationAlready=e.HaveComplainedToOrganisationAlready,this.LastName=e.LastName,this.OrganisationComplainedTo=e.OrganisationComplainedTo,this.OtherOrganisationComplainedTo=e.OtherOrganisationComplainedTo,this.PhoneNumber=e.PhoneNumber,this.PhysicalAddress=e.PhysicalAddress,this.ReasonsForComplaint=e.ReasonForTheComplaint,this.RemedialActions=e.RemedialActions,this.PersonalDataAffected=e.PersonalDataAffected,this.comments=e.comments},u=function(t){return t.NATIONALITY="Nationality",t.AGE="Age / Date of Birth",t.MARITAL_STATUS="Marital Status",t.EDUCATION="Education Level",t.IDENTIFICATION="Identification Number e.g NIN, TIN, Driving Permit Number",t.IDENTITY_DATA="Identity Data",t.PHILOSPHICAL_BELIEFS="Philosophical Beliefs",t.POLITICAL_OPINION="Political Opinion",t.SEXUAL_LIFE="Sexual Life",t.FINANCIAL_INFORMATION="Financial Information",t.MEDICAL="Medical Records",t}({}),b={id:1,regNo:"C202100001",personalDataAffected:[u.NATIONALITY,u.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},d=[{id:1,regNo:"C202100001",addressedTo:"Uganda Revenue Authority",personalDataAffected:[u.NATIONALITY,u.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},{id:1,regNo:"C202100003",addressedTo:"Airtel Uganda",personalDataAffected:[u.NATIONALITY,u.AGE],status:"Submitted",reasonForTheComplaint:"Infringement / Violation of Act",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"jkalungi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"John Kalungi",phone:"0792310084",email:"jkalungi@gmail.com"}},{id:1,regNo:"C202100004",addressedTo:"Airtel Uganda",personalDataAffected:[u.NATIONALITY,u.AGE],status:"Submitted",reasonForTheComplaint:"Inaccurate personal data in the possession of data controllers",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Isaac Akileng",phone:"0792310084",email:"iakileng@gmail.com"}}],f=[{personalDataAffected:[{dataCategory:{id:"3",name:"Biometric Information",subCategories:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}]},dataSubCategory:[]},{dataCategory:{id:"3",name:"Biometric Information",subCategories:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}]},dataSubCategory:[]}]}],g={id:"DAB/16/10/21/4651",incidentDate:"2021-02-02T21:00:00.000Z",howIncidentHappened:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",delayInReporting:!0,reasonForDelay:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",measuresInPlace:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",status:"SUBMITTED",policies:[{id:1,policy:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",explanation:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",implementationDate:"2021-02-02T21:00:00.000Z"}],personalDataAffected:[{dataCategory:{id:"3",name:"Biometric Information",subCategories:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}]},dataSubCategory:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}],toWhatExtent:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",affectedIndividuals:"5",recordsInvolved:"5",individualAwareness:!0,individualComplain:!0},{dataCategory:{id:"3",name:"Individual Commercial Information",subCategories:[{id:"1",value:"Records of personal propert"},{id:"2",value:"Purchasing habits."}]},dataSubCategory:[{id:"1",value:"Records of personal propert"},{id:"2",value:"Purchasing habits."}],toWhatExtent:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",affectedIndividuals:"5",recordsInvolved:"5",individualAwareness:!0,individualComplain:!0}],containmentAndRecovery:{actionTaken:!0,detailsOfActionTaken:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",hasDataBeenRecovered:!0,detailsOfRecovery:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",dateOfRecovery:"2021-02-02T21:00:00.000Z",preventionSteps:"Lorem Ipsum is simply dummy text of the printing and typesetting industry"},miscellaneous:{medialCoverageOfIncident:!0,regulatoryBodiesNotified:!0},registrationDate:"2021-02-02T21:00:00.000Z",impactOfBreach:[{id:"1",rating:"1",impact:"Affected Data subject will be required to submit information afresh or fill forms again"},{id:"2",rating:"1",impact:"Affected Data subject may receive unsolicited email as a result of the breach"}],potentialConsequences:[{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"A paper file or equipment is lost or stolen."},{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"Paper or equipment left accessible in an unsecured location.  "},{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"Mail lost or opened before being returned to sender.    "},{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"Hacking, malware (e.g. ransomware) and/ or phishing.    "}],controls:[],causes:[{cause:"Malicious internal act",code:"CA9238",id:"5"},{cause:"Accidental internal act",code:"C2333",id:"2"}],reportedBy:"enockm15",companyReporting:"MTN Uganda",assignedTo:"angella",lastModifiedDate:"2021-02-02T21:00:00.000Z"},h=i("pbD1"),C=i("+0xr"),T=i("M9IT"),v=i("Dh3D"),y=i("jtHE"),U=i("LRne"),R=i("Ku73"),x=i("nStZ"),O=i("M2Gj"),P=i("aYi0"),I=i("3eU1"),w=i("j7tn"),D=i("sFxA"),k=i("0IaG"),F=i("aTx8"),S=i("xBcV"),N=i("Hbgg"),E=i("rnAf"),A=i("rvYj"),M=i("a+RD"),L=i("bSwM"),_=i("bTqV"),j=i("STbY"),q=i("NFeN"),z=["autosize"];function G(t,e){1&t&&(l.Ub(0,"th",13),l.Ub(1,"mat-checkbox",14),l.cc("click",function(t){return t.stopPropagation()}),l.Tb(),l.Tb())}function V(t,e){1&t&&(l.Ub(0,"td",15),l.Ub(1,"mat-checkbox",14),l.cc("click",function(t){return t.stopPropagation()}),l.Tb(),l.Tb())}function $(t,e){if(1&t&&(l.Ub(0,"th",20),l.Rc(1),l.Tb()),2&t){var a=l.gc(2).$implicit;l.Cb(1),l.Tc(" ",a.name,"")}}function B(t,e){if(1&t&&(l.Ub(0,"td",21),l.Rc(1),l.Tb()),2&t){var a=e.$implicit,n=l.gc(2).$implicit;l.Cb(1),l.Tc(" ",a[n.property]," ")}}function W(t,e){if(1&t&&(l.Sb(0,17),l.Pc(1,$,2,1,"th",18),l.Pc(2,B,2,1,"td",19),l.Rb()),2&t){var a=l.gc().$implicit;l.nc("matColumnDef",a.property)}}function H(t,e){if(1&t&&(l.Sb(0),l.Pc(1,W,3,1,"ng-container",16),l.Rb()),2&t){var a=e.$implicit;l.Cb(1),l.nc("ngIf",a.isModelProperty)}}function K(t,e){1&t&&l.Pb(0,"th",22)}function X(t,e){if(1&t){var a=l.Vb();l.Ub(0,"td",15),l.Ub(1,"button",23),l.cc("click",function(t){return t.stopPropagation()}),l.Ub(2,"mat-icon"),l.Rc(3,"more_vert"),l.Tb(),l.Tb(),l.Ub(4,"mat-menu",24,25),l.Ub(6,"button",26),l.cc("click",function(t){l.Ec(a);var n=e.$implicit;return l.gc().manageComplaint(n,t)}),l.Ub(7,"mat-icon"),l.Rc(8,"settings"),l.Tb(),l.Ub(9,"span"),l.Rc(10,"Manage"),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.Ac(5);l.Cb(1),l.nc("matMenuTriggerFor",n)}}function Y(t,e){1&t&&l.Pb(0,"tr",27)}function J(t,e){1&t&&l.Pb(0,"tr",28)}var Q,Z=function(){return["Complaints"]},tt=((Q=function(t){a(i,t);var n=o(i);function i(t,e,a,o,s,c,m,p){var u;return r(this,i),(u=n.call(this,a,s,c,m)).dialog=t,u.route=e,u.authService=a,u.router=o,u._workflowService=s,u.registrationService=c,u.complaintService=m,u.routingService=p,u.subject$=new y.a(1),u.data$=u.subject$.asObservable(),u.$processingEvent=new l.o,u.$errorsEvent=new l.o,u.$resultComplaintsEvent=new l.o,u.statusList=[],u.pageIndex=u.routingService.complaintsTablePageIndex,u.pageSize=10,u.subscriptions=[],u.statuses=[{code:"001",description:"Form 9"},{code:"002",description:"FORM 6"},{code:"003",description:"FORM 11"}],u.columns=[{name:"Complaint Tracking Number",property:"ComplaintTrackingNo",visible:!0,isModelProperty:!0},{name:"Complaint Source",property:"ComplaintSourceName",visible:!0,isModelProperty:!0},{name:"Type of Complaint",property:"FormName",visible:!0,isModelProperty:!0},{name:"Email Address",property:"EmailAddress",visible:!0,isModelProperty:!0},{name:"First Name",property:"FirstName",visible:!0,isModelProperty:!0},{name:"Last Name",property:"LastName",visible:!0,isModelProperty:!0},{name:"Phone Number",property:"PhoneNumber",visible:!0,isModelProperty:!0},{name:"Have Complained to Organisation?",property:"HaveComplainedToOrganisationAlready",visible:!0,isModelProperty:!0},{name:"Organisation Complained To",property:"OrganisationComplainedToName",visible:!0,isModelProperty:!0},{name:"Complaint Timeline",property:"Status",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],u.dataSource=new C.o,u}return e(i,[{key:"getData",value:function(){return Object(U.a)(d.map(function(t){return new p(t)}))}},{key:"ngOnInit",value:function(){console.log(this.pageIndex),this.dataSource.paginator=this.paginator,this.getComplaints(),console.log(this.getComplaints),this.route.paramMap.subscribe(function(t){console.log(t.has("navigationPrams"))}),this.statusList=this.getGenericDDL(this.statuses,{key:"code",label:"description"},!1),this.defineSearchFields()}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.paginator.pageIndex=t.pageIndex,t.subscriptions.$resultComplaintsEvent=t.$resultComplaintsEvent.subscribe(function(e){e?(t.complaints=e,t.dataSource.data=e,t.isLoaded=!0):console.log("expected")})},0)}},{key:"onFilterChange",value:function(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}},{key:"ngOnDestroy",value:function(){}},{key:"defineSearchFields",value:function(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:h.e,dataType:h.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:h.e,dataType:h.a.TEXT},{label:"Form Types",fieldName:"Form",operators:h.d,dataType:h.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:h.e,dataType:h.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:h.e,dataType:h.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:h.c,dataType:h.a.DATETIME}]}},{key:"getComplaints",value:function(){this.complaintService.getComplaints(this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent)}},{key:"viewComplaint",value:function(t){this.router.navigate(["/complaints/view-complaint"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo}}).then()}},{key:"manageComplaint",value:function(t){this.routingService.complaintsTablePageIndex=this.pageIndex,this.router.navigate(["/complaints/complaints-edit"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo,ComplaintSourceID:t.ComplaintSourceID}}).then()}},{key:"onPaginateChange",value:function(t){this.pageIndex=t.pageIndex,console.log(this.pageIndex)}},{key:"visibleColumns",get:function(){return this.columns.filter(function(t){return t.visible}).map(function(t){return t.property})}}]),i}(O.a)).\u0275fac=function(t){return new(t||Q)(l.Ob(k.b),l.Ob(c.a),l.Ob(F.c),l.Ob(c.f),l.Ob(I.a),l.Ob(w.a),l.Ob(P.a),l.Ob(D.a))},Q.\u0275cmp=l.Ib({type:Q,selectors:[["fury-complaints-find"]],viewQuery:function(t,e){var a;1&t&&(l.Kc(T.a,!0),l.Kc(v.a,!0),l.Vc(z,!0)),2&t&&(l.zc(a=l.dc())&&(e.paginator=a.first),l.zc(a=l.dc())&&(e.sort=a.first),l.zc(a=l.dc())&&(e.autosize=a.first))},inputs:{columns:"columns"},features:[l.zb],decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Complaints","finderDialogTitle","Complaints Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","page"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(l.Ub(0,"fury-page-layout",0),l.Ub(1,"fury-page-layout-header"),l.Pb(2,"fury-breadcrumbs",1),l.Tb(),l.Ub(3,"fury-page-layout-content"),l.Ub(4,"fury-list",2),l.cc("filterChange",function(t){return e.onFilterChange(t)}),l.Ub(5,"table",3),l.Sb(6,4),l.Pc(7,G,2,0,"th",5),l.Pc(8,V,2,0,"td",6),l.Rb(),l.Pc(9,H,2,1,"ng-container",7),l.Sb(10,8),l.Pc(11,K,1,0,"th",9),l.Pc(12,X,11,1,"td",6),l.Rb(),l.Pc(13,Y,1,0,"tr",10),l.Pc(14,J,1,0,"tr",11),l.Tb(),l.Ub(15,"mat-paginator",12),l.cc("page",function(t){return e.onPaginateChange(t)}),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(2),l.nc("@fadeInRight",void 0)("crumbs",l.qc(10,Z)),l.Cb(1),l.nc("@fadeInUp",void 0),l.Cb(1),l.nc("columns",e.columns)("searchFields",e.searchFields),l.Cb(1),l.nc("dataSource",e.dataSource),l.Cb(4),l.nc("ngForOf",e.columns),l.Cb(4),l.nc("matHeaderRowDef",e.visibleColumns),l.Cb(1),l.nc("matRowDefColumns",e.visibleColumns),l.Cb(1),l.nc("pageSize",e.pageSize))},directives:[S.a,N.a,E.a,A.a,M.a,C.n,v.a,C.c,C.i,C.b,s.n,C.k,C.m,T.a,C.h,L.a,C.a,s.o,v.b,_.a,j.e,q.a,j.a,j.c,c.h,C.j,C.l],styles:[""],data:{animation:[R.a,x.a]}}),Q),et=i("3Pt+"),at=i("r9HN"),nt=i("2ChS"),ot=i("XiUz"),it=i("4FRi"),st=i("kmnG"),rt=i("qFsG"),ct=i("zkoq"),lt=i("ihCf"),mt=i("Qu3c"),pt=i("znSr"),ut=["autosize"];function bt(t,e){1&t&&(l.Ub(0,"mat-form-field",8),l.Ub(1,"mat-label"),l.Rc(2,"Organisation Complained From"),l.Tb(),l.Pb(3,"input",31),l.Tb())}function dt(t,e){1&t&&(l.Ub(0,"mat-form-field",8),l.Ub(1,"mat-label"),l.Rc(2,"Other Organisation"),l.Tb(),l.Pb(3,"input",32),l.Tb())}function ft(t,e){1&t&&(l.Ub(0,"mat-form-field",8),l.Ub(1,"mat-label"),l.Rc(2,"Other Organisation Complained To"),l.Tb(),l.Pb(3,"input",33),l.Tb())}function gt(t,e){if(1&t&&(l.Ub(0,"mat-grid-tile"),l.Rc(1),l.Tb()),2&t){var a=e.$implicit;l.Cb(1),l.Tc(" ",a.DataSubCategoryName," ")}}function ht(t,e){if(1&t&&(l.Ub(0,"mat-grid-tile"),l.Rc(1),l.Tb()),2&t){var a=e.$implicit;l.Cb(1),l.Tc(" ",a.ComplaintReasonName," ")}}function Ct(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&t){var a=l.gc();l.Cb(1),l.Tc(" - ",a.document.Size," Mbs")}}function Tt(t,e){1&t&&(l.Ub(0,"p",34),l.Rc(1,"No document found. Please attach"),l.Tb())}function vt(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&t){var a=l.gc();l.Cb(1),l.Tc(" - ",a.document.Size," Mbs")}}function yt(t,e){1&t&&(l.Ub(0,"p",34),l.Rc(1,"No document found. Please attach"),l.Tb())}var Ut,Rt=function(){return["Complaints"]},xt=function(){return{width:"100px",height:"100px"}},Ot=((Ut=function(t){a(i,t);var n=o(i);function i(t,e,a,o,s,c,p,u){var b;return r(this,i),(b=n.call(this,s,c,p,u)).formBuilder=t,b.activateRoute=e,b.route=a,b.bottomsheet=o,b.authService=s,b._workflowService=c,b.registrationService=p,b.complaintService=u,b.subject$=new y.a(1),b.data$=b.subject$.asObservable(),b.$processingEvent=new l.o,b.$errorsEvent=new l.o,b.$resultComplaintsEvent=new l.o,b.subscriptions=[],b.application=new m,b.personalData=[],b.complaintReasons=[],b.list=[],b.displayColumns=["nber","impact","actions"],b.resolutionComments=[],b._gap=16,b.gap=b._gap+"px",b.col2="1 1 calc(50% - ".concat(b._gap/2,"px)"),b.col3="1 1 calc(33.3333% - ".concat(b._gap/1.5,"px)"),b.operationType=e.routeConfig.data.action,b.ComplaintTrackingNumber=b.route.getCurrentNavigation().extras.state.ComplaintTrackingNumber,console.log(b.ComplaintTrackingNumber),console.log(b.operationType),"EDIT"===b.operationType?(b.isEditMode=!0,b.application.comments=[]):"CREATE"===b.operationType?(b.isEditMode=!1,b.application.comments=[]):"VIEW"===b.operationType&&(b.isEditMode=!1,b.isViewOnly=!0),b}return e(i,[{key:"ngOnInit",value:function(){var t=this;this.initForm(),this.getComplaint(),this.subscriptions.$resultComplaintsEvent=this.$resultComplaintsEvent.subscribe(function(e){e&&(t.application=e,console.log(t.application),t.mapFields())}),this.disableFieldsByStatus(),this.isViewOnly&&this.disableAllControls()}},{key:"mapFields",value:function(){this.isApplicationValid=!0,this.personalData=this.application.PersonalDataAffected,this.complaintReasons=this.application.ReasonsForComplaint,console.log(this.application.EvidenceOfComplaint),this.document={Document:null,Name:"Complaint Evidence.pdf",Size:null,Base64:this.application.EvidenceOfComplaint},console.log(this.document),this.complaintForm.get("reasonForTheComplaint").setValue(this.application.ReasonsForComplaint),this.complaintForm.get("complaintDetails").setValue(this.application.FullDetailsOfComplaint),this.complaintForm.get("remedialActions").setValue(this.application.RemedialActions),this.complaintForm.get("lastModificationDate").setValue(this.application.FirstName),this.complaintForm.get("dataSubjectName").setValue(this.application.FirstName+" "+this.application.LastName),this.complaintForm.get("dataSubjectPhone").setValue(this.application.PhoneNumber),this.complaintForm.get("dataSubjectEmail").setValue(this.application.EmailAddress),this.complaintForm.get("ComplaintCategory").setValue(this.application.ComplainerCategory),this.complaintForm.get("OrganisationComplainedTo").setValue(this.application.OrganisationComplainedToName),this.complaintForm.get("ContactFirstName").setValue(this.application.ContactPersonFirstName),this.complaintForm.get("ContactLastName").setValue(this.application.ContactPersonLastName),this.complaintForm.get("ContactEmailAddress").setValue(this.application.ContactPersonEmailAddress)}},{key:"initForm",value:function(){this.complaintForm=this.formBuilder.group({personalDataAffected:["",et.u.compose([et.u.required])],reasonForTheComplaint:["",et.u.compose([et.u.required])],complaintDetails:["",et.u.compose([et.u.required])],remedialActions:["",et.u.compose([et.u.required])],dataSubjectName:["",et.u.compose([et.u.required])],dataSubjectPhone:["",et.u.compose([et.u.required])],dataSubjectEmail:["",et.u.compose([et.u.required])],ContactFirstName:["",et.u.compose([et.u.required])],ContactLastName:["",et.u.compose([et.u.required])],ContactEmailAddress:["",et.u.compose([et.u.required])],OrganisationComplainedTo:["",et.u.compose([et.u.required])],OtherOrganisationComplainedTo:["",et.u.compose([et.u.required])],ComplaintCategory:["",et.u.compose([et.u.required])],OrganisationComplainedFrom:["",et.u.compose([et.u.required])],OtherOrganisationComplainedFrom:["",et.u.compose([et.u.required])],lastModificationDate:[]})}},{key:"onReadDocument",value:function(){this.bottomsheetRef=this.bottomsheet.open(at.a,{disableClose:!0,panelClass:["view-pdf-document-bottomsheet","bottomsheets"],data:{url:this.document.Base64,title:this.document.Name}})}},{key:"disableFieldsByStatus",value:function(){this.application&&"NEW"!==this.application.status&&"STORED"!==this.application.status&&"ISSUED"===this.application.status&&this.disableAllControls()}},{key:"disableAllControls",value:function(){this.complaintForm.disable()}},{key:"onCommentChange",value:function(t){t&&(this.application.comments=t)}},{key:"formTriggler",value:function(t){switch(t){case"EDIT":case"CREATE":break;case"VIEW":this.isViewOnly=!0}}},{key:"getComplaint",value:function(){this.complaintService.getComplaint(this.ComplaintTrackingNumber,this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent)}},{key:"getSampleJson",get:function(){return Object(U.a)(b)}}]),i}(O.a)).\u0275fac=function(t){return new(t||Ut)(l.Ob(et.d),l.Ob(c.a),l.Ob(c.f),l.Ob(nt.b),l.Ob(F.c),l.Ob(I.a),l.Ob(w.a),l.Ob(P.a))},Ut.\u0275cmp=l.Ib({type:Ut,selectors:[["fury-view-complaint"]],viewQuery:function(t,e){var a;1&t&&l.Vc(ut,!0),2&t&&l.zc(a=l.dc())&&(e.autosize=a.first)},features:[l.zb],decls:140,vars:25,consts:[["mode","card"],["current","View",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 1 auto"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],["formControlName","ComplaintCategory","matInput",""],["fxFlex","2 1 auto",4,"ngIf"],["formControlName","OrganisationComplainedTo","matInput",""],["formControlName","ContactFirstName","matInput",""],["formControlName","ContactLastName","matInput",""],["formControlName","ContactEmailAddress","matInput",""],["cols","4","rowHeight","4rem"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","2 1 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","complaintDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/img/pdf.png","alt","",3,"ngStyle"],[4,"ngIf"],["class","no-document-found",4,"ngIf"],["formControlName","TechnicalForwardedComments","matInput",""],["formControlName","LegalForwardedComments","matInput",""],["formControlName","MoreInformationRequired","matInput",""],["formControlName","OrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedTo","matInput",""],[1,"no-document-found"]],template:function(t,e){1&t&&(l.Ub(0,"fury-page-layout",0),l.Ub(1,"fury-page-layout-header"),l.Pb(2,"fury-breadcrumbs",1),l.Tb(),l.Ub(3,"fury-page-layout-content",2),l.Ub(4,"div",3),l.Ub(5,"fury-card",4),l.Ub(6,"fury-card-header"),l.Ub(7,"fury-card-header-heading"),l.Rc(8,"Complaint Information"),l.Tb(),l.Tb(),l.Ub(9,"fury-card-content",5),l.Ub(10,"form",6),l.Ub(11,"fieldset"),l.Ub(12,"legend"),l.Rc(13,"Data Subject Details"),l.Tb(),l.Ub(14,"div",7),l.Ub(15,"mat-form-field",8),l.Ub(16,"mat-label"),l.Rc(17,"Data subject name"),l.Tb(),l.Pb(18,"input",9),l.Tb(),l.Ub(19,"mat-form-field",8),l.Ub(20,"mat-label"),l.Rc(21,"Data Subject Email"),l.Tb(),l.Pb(22,"input",10),l.Tb(),l.Ub(23,"mat-form-field",8),l.Ub(24,"mat-label"),l.Rc(25,"Data Subject Phone"),l.Tb(),l.Pb(26,"input",11),l.Tb(),l.Tb(),l.Tb(),l.Ub(27,"fieldset"),l.Ub(28,"legend"),l.Rc(29,"Data Subject Organisation"),l.Tb(),l.Ub(30,"div",7),l.Ub(31,"mat-form-field",8),l.Ub(32,"mat-label"),l.Rc(33,"Who are you complaining as"),l.Tb(),l.Pb(34,"input",12),l.Tb(),l.Pc(35,bt,4,0,"mat-form-field",13),l.Pc(36,dt,4,0,"mat-form-field",13),l.Tb(),l.Tb(),l.Ub(37,"fieldset"),l.Ub(38,"legend"),l.Rc(39,"Details Organisation complained To"),l.Tb(),l.Ub(40,"div",7),l.Ub(41,"mat-form-field",8),l.Ub(42,"mat-label"),l.Rc(43,"Organisation Complained To"),l.Tb(),l.Pb(44,"input",14),l.Tb(),l.Pc(45,ft,4,0,"mat-form-field",13),l.Tb(),l.Tb(),l.Ub(46,"fieldset"),l.Ub(47,"legend"),l.Rc(48,"Organisation Contact Person Details"),l.Tb(),l.Ub(49,"div",7),l.Ub(50,"mat-form-field",8),l.Ub(51,"mat-label"),l.Rc(52,"Contact First Name"),l.Tb(),l.Pb(53,"input",15),l.Tb(),l.Ub(54,"mat-form-field",8),l.Ub(55,"mat-label"),l.Rc(56,"Contact Last Name"),l.Tb(),l.Pb(57,"input",16),l.Tb(),l.Ub(58,"mat-form-field",8),l.Ub(59,"mat-label"),l.Rc(60,"Contact Email"),l.Tb(),l.Pb(61,"input",17),l.Tb(),l.Tb(),l.Tb(),l.Ub(62,"fieldset"),l.Ub(63,"legend"),l.Rc(64,"Complaint in Brief"),l.Tb(),l.Ub(65,"mat-label"),l.Rc(66,"Personal Data Affected"),l.Tb(),l.Ub(67,"mat-grid-list",18),l.Pc(68,gt,2,1,"mat-grid-tile",19),l.Tb(),l.Tb(),l.Ub(69,"fieldset"),l.Ub(70,"legend"),l.Rc(71,"General Complaint Info"),l.Tb(),l.Ub(72,"div",20),l.Ub(73,"fieldset"),l.Ub(74,"legend"),l.Rc(75,"Complaint Reasons"),l.Tb(),l.Ub(76,"mat-label"),l.Rc(77,"Reasons for complaints"),l.Tb(),l.Ub(78,"mat-grid-list",18),l.Pc(79,ht,2,1,"mat-grid-tile",19),l.Tb(),l.Tb(),l.Ub(80,"div",7),l.Ub(81,"mat-form-field",21),l.Ub(82,"mat-label"),l.Rc(83,"Complaint Details"),l.Tb(),l.Pb(84,"textarea",22,23),l.Tb(),l.Tb(),l.Tb(),l.Ub(86,"fieldset"),l.Ub(87,"legend"),l.Rc(88,"Evidence Of Complaint"),l.Tb(),l.Ub(89,"div",24),l.cc("click",function(){return e.onReadDocument()}),l.Pb(90,"img",25),l.Ub(91,"span"),l.Rc(92),l.Pc(93,Ct,2,1,"span",26),l.Tb(),l.Tb(),l.Pc(94,Tt,2,0,"p",27),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(95,"fieldset"),l.Ub(96,"legend"),l.Rc(97,"Comments"),l.Tb(),l.Ub(98,"div",20),l.Ub(99,"fieldset"),l.Ub(100,"legend"),l.Rc(101,"Forwarded Comments"),l.Tb(),l.Ub(102,"div"),l.Ub(103,"div"),l.Ub(104,"mat-form-field",8),l.Ub(105,"mat-label"),l.Rc(106,"Technical Comments"),l.Tb(),l.Pb(107,"input",28),l.Tb(),l.Tb(),l.Ub(108,"div"),l.Ub(109,"mat-form-field",8),l.Ub(110,"mat-label"),l.Rc(111,"Legal Comments"),l.Tb(),l.Pb(112,"input",29),l.Tb(),l.Tb(),l.Ub(113,"div"),l.Ub(114,"mat-form-field",8),l.Ub(115,"mat-label"),l.Rc(116,"More Information Required"),l.Tb(),l.Pb(117,"input",30),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(118,"fieldset"),l.Ub(119,"legend"),l.Rc(120,"Investigation Comments"),l.Tb(),l.Ub(121,"textarea",22,23),l.Rc(123),l.Tb(),l.Tb(),l.Ub(124,"fieldset"),l.Ub(125,"legend"),l.Rc(126,"Resolution Comments"),l.Tb(),l.Ub(127,"textarea",22,23),l.Rc(129),l.Tb(),l.Ub(130,"div"),l.Ub(131,"fieldset"),l.Ub(132,"legend"),l.Rc(133,"Resolution Document"),l.Tb(),l.Ub(134,"div",24),l.cc("click",function(){return e.onReadDocument()}),l.Pb(135,"img",25),l.Ub(136,"span"),l.Rc(137),l.Pc(138,vt,2,1,"span",26),l.Tb(),l.Tb(),l.Pc(139,yt,2,0,"p",27),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(2),l.nc("@fadeInRight",void 0)("crumbs",l.qc(22,Rt)),l.Cb(1),l.nc("fxLayoutGap",e.gap),l.Cb(1),l.nc("fxLayoutGap",e.gap),l.Cb(1),l.nc("fxFlex.gt-sm",e.col2)("@fadeInUp",void 0),l.Cb(5),l.nc("formGroup",e.complaintForm),l.Cb(25),l.nc("ngIf","individual"===e.application.ComplainerCategory),l.Cb(1),l.nc("ngIf","individual"===e.application.ComplainerCategory),l.Cb(9),l.nc("ngIf",null==e.application.OrganisationComplainedTo),l.Cb(23),l.nc("ngForOf",e.personalData),l.Cb(11),l.nc("ngForOf",e.complaintReasons),l.Cb(11),l.nc("ngStyle",l.qc(23,xt)),l.Cb(2),l.Tc("Document: ",e.document.Name," "),l.Cb(1),l.nc("ngIf",e.document.Size),l.Cb(1),l.nc("ngIf",e.document&&!e.document.Base64),l.Cb(29),l.Sc(e.application.InvestigationComments),l.Cb(6),l.Sc(e.application.ResolutionComments),l.Cb(6),l.nc("ngStyle",l.qc(24,xt)),l.Cb(2),l.Tc("Document: ",e.document.Name," "),l.Cb(1),l.nc("ngIf",e.document.Size),l.Cb(1),l.nc("ngIf",e.document&&!e.document.Base64))},directives:[S.a,N.a,E.a,A.a,ot.d,ot.e,ot.b,ot.c,it.a,it.d,it.g,it.c,et.v,et.o,et.h,st.d,st.h,et.c,rt.b,et.n,et.g,s.o,ct.a,s.n,lt.b,mt.a,s.p,pt.c,ct.c],styles:[""],data:{animation:[R.a,x.a]}}),Ut),Pt=i("sF9m"),It=i("KGtp"),wt=(i("6xCn"),i("JIr8")),Dt=i("7R0Y"),kt=i("H+bZ"),Ft=i("YStQ"),St=i("AytR"),Nt=i("UjNt"),Et=i("1n7x"),At=i("tk/3");function Mt(t,e){1&t&&(l.Ub(0,"p",6),l.Rc(1," For: National Personal Data Protection Director "),l.Tb())}function Lt(t,e){1&t&&(l.Ub(0,"p",6),l.Rc(1," National Personal Data Protection Director "),l.Tb())}var _t,jt=((_t=function(){function t(e,a,n,o,i){r(this,t),this.dialogRef=e,this.http=a,this.service=n,this.endpoints=o,this.parent_data=i,this.downloading=!1,this.processing=!1,this.todayDate=new Date,this.pipe=new s.f("en-US"),this.todayWithPipe=null,this.isDirector=!1}return e(t,[{key:"ngOnInit",value:function(){this.todayWithPipe=this.pipe.transform(Date.now(),"dd-MM-yyyy"),console.log(this.parent_data)}},{key:"onCloseWindow",value:function(){this.dialogRef.close()}},{key:"onDownload",value:function(){var t=this;setTimeout(function(){t.service.openSnackBar("Downloading. Please wait.","success");var e={filename:t.data.ComplaintForm.FirstName+"'s Complaint Letter.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:15},a=document.getElementById("letterBodyContainer");Et().from(a).set(e).save().then(function(e){setTimeout(function(){t.downloading=!1,t.onCloseWindow(),t.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},500)}}]),t}()).\u0275fac=function(t){return new(t||_t)(l.Ob(k.g),l.Ob(At.b),l.Ob(kt.a),l.Ob(Dt.a),l.Ob(k.a))},_t.\u0275cmp=l.Ib({type:_t,selectors:[["fury-appropriate-security-measures-letter"]],decls:28,vars:9,consts:[["mat-button","",1,"close-window-btn",3,"disabled","click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],[1,"letter-body",2,"padding","65px 40px 45px","font-family","none"],[2,"font-weight","700","font-size","17px","text-transform","uppercase","text-align","center","font-family","none","color","#000","margin-top","0px"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000"],[2,"font-size","14px","font-family","none","margin","-3px 5px 0px 2px","text-transform","lowercase"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000","text-align","center"],["style","font-size: 15px;font-family: none;line-height: 21px;color: #000000; text-align: center;",4,"ngIf"]],template:function(t,e){1&t&&(l.Ub(0,"main"),l.Ub(1,"button",0),l.cc("click",function(){return e.onCloseWindow()}),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Tb(),l.Ub(4,"article",1),l.Ub(5,"section",2),l.Ub(6,"div"),l.Ub(7,"h1",3),l.Rc(8," DECISION ON COMPLAINT CONCERNING PROCESSING PERSONAL DATA WITHOUT APPROPRIATE SECURITY MEASURES "),l.Tb(),l.Tb(),l.Ub(9,"div"),l.Ub(10,"p",4),l.Rc(11),l.Tb(),l.Ub(12,"p",4),l.Rc(13),l.Pb(14,"sup",5),l.Tb(),l.Ub(15,"p",4),l.Rc(16),l.Tb(),l.Ub(17,"p",4),l.Rc(18),l.Tb(),l.Tb(),l.Ub(19,"div"),l.Ub(20,"p"),l.Rc(21),l.Pb(22,"sup",5),l.Tb(),l.Tb(),l.Ub(23,"div"),l.Ub(24,"p",6),l.Rc(25," ...................................................................................... "),l.Tb(),l.Pc(26,Mt,2,0,"p",7),l.Pc(27,Lt,2,0,"p",7),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.nc("disabled",e.downloading),l.Cb(10),l.Uc(" TO: ",e.parent_data.complaint.FirstName," ",e.parent_data.complaint.LastName," "),l.Cb(2),l.Tc(" Having reviewed your complaint lodged with the Personal Data Protection Office on ",e.parent_data.complaint.CreatedAt,", concerning; "),l.Cb(3),l.Tc(" ",e.parent_data.complaint.FullDetailsOfComplaint,". "),l.Cb(2),l.Tc(" The decision of the Office is as follows; ",e.parent_data.data.Comments," "),l.Cb(3),l.Tc(" Date of the Decision: ",e.todayWithPipe," "),l.Cb(5),l.nc("ngIf",0==e.parent_data.isDirector),l.Cb(1),l.nc("ngIf",1==e.parent_data.isDirector))},directives:[_.a,q.a,s.o],styles:["main[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;padding:0;z-index:1}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 24px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin:0 0 5px;font-weight:400}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:300;text-align:justify;color:#bf212f;line-height:22px;margin:5px 0 0}main[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{width:100%;margin:30px 0}"]}),_t);function qt(t,e){1&t&&(l.Ub(0,"p",8),l.Rc(1," For: National Personal Data Protection Director "),l.Tb())}function zt(t,e){1&t&&(l.Ub(0,"p",8),l.Rc(1," National Personal Data Protection Director "),l.Tb())}var Gt,Vt=((Gt=function(){function t(e,a,n,o,i){r(this,t),this.dialogRef=e,this.http=a,this.service=n,this.endpoints=o,this.parent_data=i,this.downloading=!1,this.processing=!1,this.todayDate=new Date,this.pipe=new s.f("en-US"),this.todayWithPipe=null,this.isDirector=!1}return e(t,[{key:"ngOnInit",value:function(){this.todayWithPipe=this.pipe.transform(Date.now(),"dd-MM-yyyy"),console.log(this.parent_data)}},{key:"onCloseWindow",value:function(){this.dialogRef.close()}},{key:"onDownload",value:function(){var t=this;setTimeout(function(){t.service.openSnackBar("Downloading. Please wait.","success");var e={filename:t.data.ComplaintForm.FirstName+"'s Complaint Letter.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:15},a=document.getElementById("letterBodyContainer");Et().from(a).set(e).save().then(function(e){setTimeout(function(){t.downloading=!1,t.onCloseWindow(),t.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},500)}}]),t}()).\u0275fac=function(t){return new(t||Gt)(l.Ob(k.g),l.Ob(At.b),l.Ob(kt.a),l.Ob(Dt.a),l.Ob(k.a))},Gt.\u0275cmp=l.Ib({type:Gt,selectors:[["fury-infringement-letter"]],decls:32,vars:9,consts:[["mat-button","",1,"close-window-btn",3,"disabled","click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],[1,"letter-body",2,"padding","65px 40px 45px","font-family","none"],[2,"text-align","right","font-weight","700","color","#000","font-size","17px","font-family","none"],[2,"text-align","center","font-weight","700","font-size","17px","color","#000"],[2,"font-weight","700","font-size","17px","text-transform","uppercase","text-align","center","font-family","none","color","#000","margin-top","0px"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000"],[2,"font-size","14px","font-family","none","margin","-3px 5px 0px 2px","text-transform","lowercase"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000","text-align","center"],["style","font-size: 15px;font-family: none;line-height: 21px;color: #000000; text-align: center;",4,"ngIf"]],template:function(t,e){1&t&&(l.Ub(0,"main"),l.Ub(1,"button",0),l.cc("click",function(){return e.onCloseWindow()}),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Tb(),l.Ub(4,"article",1),l.Ub(5,"section",2),l.Ub(6,"h1",3),l.Rc(7,"Regulation 39(5)"),l.Tb(),l.Ub(8,"div"),l.Ub(9,"h1",4),l.Rc(10,"FORM 10"),l.Tb(),l.Ub(11,"h1",5),l.Rc(12," DECISION ON COMPLAINT IN RESPECT OF INACCURATE PERSONAL DATA IN THE POSSESION OF DATA CONTROLLER "),l.Tb(),l.Tb(),l.Ub(13,"div"),l.Ub(14,"p",6),l.Rc(15),l.Tb(),l.Ub(16,"p",6),l.Rc(17),l.Pb(18,"sup",7),l.Tb(),l.Ub(19,"p",6),l.Rc(20),l.Tb(),l.Ub(21,"p",6),l.Rc(22),l.Tb(),l.Tb(),l.Ub(23,"div"),l.Ub(24,"p"),l.Rc(25),l.Pb(26,"sup",7),l.Tb(),l.Tb(),l.Ub(27,"div"),l.Ub(28,"p",8),l.Rc(29," ...................................................................................... "),l.Tb(),l.Pc(30,qt,2,0,"p",9),l.Pc(31,zt,2,0,"p",9),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.nc("disabled",e.downloading),l.Cb(14),l.Uc(" TO: ",e.parent_data.complaint.FirstName," ",e.parent_data.complaint.LastName," "),l.Cb(2),l.Tc(" Having reviewed your complaint lodged with the Personal Data Protection Office on ",e.parent_data.complaint.CreatedAt,", concerning; "),l.Cb(3),l.Tc(" ",e.parent_data.complaint.FullDetailsOfComplaint,". "),l.Cb(2),l.Tc(" The decision of the Office is as follows; ",e.parent_data.data.Comments," "),l.Cb(3),l.Tc(" Date of the Decision: ",e.todayWithPipe," "),l.Cb(5),l.nc("ngIf",0==e.parent_data.isDirector),l.Cb(1),l.nc("ngIf",1==e.parent_data.isDirector))},directives:[_.a,q.a,s.o],styles:["main[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;padding:0;z-index:1}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 24px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin:0 0 5px;font-weight:400}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:300;text-align:justify;color:#bf212f;line-height:22px;margin:5px 0 0}main[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{width:100%;margin:30px 0}"]}),Gt);function $t(t,e){1&t&&(l.Ub(0,"p",8),l.Rc(1," For: National Personal Data Protection Director "),l.Tb())}function Bt(t,e){1&t&&(l.Ub(0,"p",8),l.Rc(1," National Personal Data Protection Director "),l.Tb())}var Wt,Ht=((Wt=function(){function t(e,a,n,o,i){r(this,t),this.dialogRef=e,this.http=a,this.service=n,this.endpoints=o,this.parent_data=i,this.downloading=!1,this.processing=!1,this.todayDate=new Date,this.pipe=new s.f("en-US"),this.todayWithPipe=null,this.isDirector=!1,this.CreatedAt=null}return e(t,[{key:"ngOnInit",value:function(){this.todayWithPipe=this.pipe.transform(Date.now(),"dd-MM-yyyy"),console.log(this.parent_data)}},{key:"onCloseWindow",value:function(){this.dialogRef.close()}},{key:"onDownload",value:function(){var t=this;setTimeout(function(){t.service.openSnackBar("Downloading. Please wait.","success");var e={filename:t.data.ComplaintForm.FirstName+"'s Complaint Letter.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:15},a=document.getElementById("letterBodyContainer");Et().from(a).set(e).save().then(function(e){setTimeout(function(){t.downloading=!1,t.onCloseWindow(),t.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},500)}}]),t}()).\u0275fac=function(t){return new(t||Wt)(l.Ob(k.g),l.Ob(At.b),l.Ob(kt.a),l.Ob(Dt.a),l.Ob(k.a))},Wt.\u0275cmp=l.Ib({type:Wt,selectors:[["fury-violation-of-the-act-letter"]],decls:32,vars:9,consts:[["mat-button","",1,"close-window-btn",3,"disabled","click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],[1,"letter-body",2,"padding","65px 40px 45px","font-family","none"],[2,"text-align","right","font-weight","700","color","#000","font-size","17px","font-family","none"],[2,"text-align","center","font-weight","700","font-size","17px","color","#000"],[2,"font-weight","700","font-size","17px","text-transform","uppercase","text-align","center","font-family","none","color","#000","margin-top","0px"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000"],[2,"font-size","14px","font-family","none","margin","-3px 5px 0px 2px","text-transform","lowercase"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000","text-align","center"],["style","font-size: 15px;font-family: none;line-height: 21px;color: #000000; text-align: center;",4,"ngIf"]],template:function(t,e){1&t&&(l.Ub(0,"main"),l.Ub(1,"button",0),l.cc("click",function(){return e.onCloseWindow()}),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Tb(),l.Ub(4,"article",1),l.Ub(5,"section",2),l.Ub(6,"h1",3),l.Rc(7,"Regulation 45(2)"),l.Tb(),l.Ub(8,"div"),l.Ub(9,"h1",4),l.Rc(10,"FORM 12"),l.Tb(),l.Ub(11,"h1",5),l.Rc(12," DECISION ON COMPLAINT OF COMPLAINT CONCERNING INFRINGEMENT OR VIOLATION OF THE ACT "),l.Tb(),l.Tb(),l.Ub(13,"div"),l.Ub(14,"p",6),l.Rc(15),l.Tb(),l.Ub(16,"p",6),l.Rc(17),l.Pb(18,"sup",7),l.Tb(),l.Ub(19,"p",6),l.Rc(20),l.Tb(),l.Ub(21,"p",6),l.Rc(22),l.Tb(),l.Tb(),l.Ub(23,"div"),l.Ub(24,"p"),l.Rc(25),l.Pb(26,"sup",7),l.Tb(),l.Tb(),l.Ub(27,"div"),l.Ub(28,"p",8),l.Rc(29," ...................................................................................... "),l.Tb(),l.Pc(30,$t,2,0,"p",9),l.Pc(31,Bt,2,0,"p",9),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.nc("disabled",e.downloading),l.Cb(14),l.Uc(" TO: ",e.parent_data.complaint.FirstName," ",e.parent_data.complaint.LastName," "),l.Cb(2),l.Tc(" Having reviewed your complaint lodged with the Personal Data Protection Office on ",e.parent_data.complaint.CreatedAt,", concerning; "),l.Cb(3),l.Tc(" ",e.parent_data.complaint.FullDetailsOfComplaint,". "),l.Cb(2),l.Tc(" The decision of the Office is as follows; ",e.parent_data.data.Comments," "),l.Cb(3),l.Tc(" Date of the Decision: ",e.todayWithPipe," "),l.Cb(5),l.nc("ngIf",0==e.parent_data.isDirector),l.Cb(1),l.nc("ngIf",1==e.parent_data.isDirector))},directives:[_.a,q.a,s.o],styles:[""]}),Wt);function Kt(t,e){if(1&t){var a=l.Vb();l.Ub(0,"button",14),l.cc("click",function(){return l.Ec(a),l.gc().onRemoveDocument()}),l.Ub(1,"div",9),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Ub(4,"span"),l.Rc(5," Remove Document "),l.Tb(),l.Tb(),l.Tb()}}function Xt(t,e){if(1&t){var a=l.Vb();l.Ub(0,"div",15),l.cc("click",function(){l.Ec(a);var t=l.gc();return t.onReadDocument(t.evidenceDocument)}),l.Pb(1,"img",16),l.Ub(2,"span"),l.Rc(3),l.Ub(4,"span"),l.Rc(5),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.gc();l.Cb(3),l.Tc("",null==n.evidenceDocument?null:n.evidenceDocument.Name," "),l.Cb(2),l.Tc(" - ",null==n.evidenceDocument?null:n.evidenceDocument.Size," Mbs")}}function Yt(t,e){if(1&t){var a=l.Vb();l.Ub(0,"button",13),l.cc("click",function(){return l.Ec(a),l.gc().onPreview()}),l.Ub(1,"span"),l.Rc(2,"Preview decision"),l.Tb(),l.Tb()}}var Jt,Qt,Zt,te=function(){return{"margin-bottom":"20px","margin-top":"20px","background-color":"#ABC334",color:"#000"}},ee=((Jt=function(){function t(e,a,n,o,i,s,c,m){r(this,t),this.fb=e,this.endpoints=a,this.http=n,this.service=o,this.dialog=i,this.route=s,this.allDialogRef=c,this.parent_data=m,this.ComplaintCommentsFormGroup=this.fb.group({}),this.$processingEvent=new l.o,this.$errorsEvent=new l.o,this.$resultComplaintsEvent=new l.o,this.processing=!1}return e(t,[{key:"ngOnInit",value:function(){this.ComplaintCommentsFormGroup=this.fb.group({Comments:new et.e("",[et.u.required])}),console.log(this.parent_data)}},{key:"getFormData",value:function(){return{Comments:this.ComplaintCommentsFormGroup.get("Comments").value,ComplaintTrackingNo:this.parent_data.ComplaintTrackingNumber,Status:this.parent_data.Status,RequestInformation:0,EvidenceFile:""}}},{key:"onPreview",value:function(){var t=this,e=this.getFormData();this.httpSub=this.http.get(this.endpoints.getComplaint,{params:{ComplaintTrackingNo:e.ComplaintTrackingNo}}).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(a){t.previewDialog=t.dialog.open(6==a.FormID?jt:9==a.FormID?Vt:Ht,{panelClass:["complaint-letter-dialog","dialogs"],disableClose:!0,data:{data:e,complaint:a,isDirector:t.parent_data.isDirector}}),t.processing=!1},function(e){t.processing=!1,t.service.determineErrorResponse(e)})}},{key:"onSubmit",value:function(){var t=this;this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.updateComplaintStatus,this.getFormData()).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:e.message,status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:St.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}},{key:"onUploadAttachments",value:function(){var t=this;this.dialogRef=this.dialog.open(Nt.a,{panelClass:["resolution-upload-dialog","dialogs"],disableClose:!0,data:{multiple:!1,maxSize:3}}),this.dialogRef.afterClosed().subscribe(function(e){e.status&&(t.evidenceDocument=e.row,console.log(t.evidenceDocument))})}}]),t}()).\u0275fac=function(t){return new(t||Jt)(l.Ob(et.d),l.Ob(Dt.a),l.Ob(At.c),l.Ob(kt.a),l.Ob(k.b),l.Ob(c.f),l.Ob(k.b),l.Ob(k.a))},Jt.\u0275cmp=l.Ib({type:Jt,selectors:[["fury-complaint-comments"]],decls:27,vars:7,consts:[[2,"padding","10px"],["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],[1,"buttons"],["mat-button","","color","primary",1,"add-item-button",3,"ngStyle","click"],[1,"button-label"],["mat-button","","color","primary","class","remove-button",3,"click",4,"ngIf"],["class","uploaded-document","matTooltip","Open Document",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",1,"remove-button",3,"click"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/images/pdf.png","alt",""]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Rc(2,"Make Comments"),l.Tb(),l.Ub(3,"form",2),l.Ub(4,"mat-dialog-content"),l.Ub(5,"div",3),l.Ub(6,"div",4),l.Ub(7,"mat-form-field",5),l.Ub(8,"mat-label"),l.Rc(9,"Provide Comments"),l.Tb(),l.Pb(10,"textarea",6),l.Ub(11,"mat-hint"),l.Rc(12,"Review Comments"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"section"),l.Ub(14,"div",7),l.Ub(15,"button",8),l.cc("click",function(){return e.onUploadAttachments()}),l.Ub(16,"div",9),l.Ub(17,"span"),l.Rc(18),l.Tb(),l.Tb(),l.Tb(),l.Pc(19,Kt,6,0,"button",10),l.Tb(),l.Pc(20,Xt,6,2,"div",11),l.Tb(),l.Pc(21,Yt,3,0,"button",12),l.Rc(22,"\xa0 "),l.Ub(23,"button",13),l.cc("click",function(){return e.onSubmit()}),l.Ub(24,"span"),l.Rc(25,"Submit"),l.Tb(),l.Tb(),l.Rc(26,"\xa0 "),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.nc("formGroup",e.ComplaintCommentsFormGroup),l.Cb(12),l.nc("ngStyle",l.qc(6,te)),l.Cb(3),l.Tc(" ",e.evidenceDocument?"Replace Document":"Upload A Document"," "),l.Cb(1),l.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Name),l.Cb(1),l.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Base64),l.Cb(1),l.nc("ngIf",6===e.parent_data.Status))},directives:[k.h,et.v,et.o,et.h,k.e,ot.d,ot.e,st.d,ot.b,st.h,rt.b,lt.b,et.c,et.n,et.g,st.g,_.a,s.p,pt.c,s.o,q.a,mt.a],styles:[""]}),Jt),ae=i("Nd1k"),ne=i("CKU1"),oe=((Qt=function(){function t(e,a,n,o,i,s,c,l){r(this,t),this.fb=e,this.endpoints=a,this.http=n,this.service=o,this.dialog=i,this.route=s,this.allDialogRef=c,this.parent_data=l,this.processing=!1,this.ComplaintCommentsFormGroup=this.fb.group({}),this.BreachCommentsFormGroup=this.fb.group({})}return e(t,[{key:"ngOnInit",value:function(){this.ComplaintCommentsFormGroup=this.fb.group({Comments:new et.e("",[et.u.required]),RequestedInformation:new et.e}),this.ComplaintCommentsFormGroup.get("RequestedInformation").setValue(this.parent_data.RequestedInformation)}},{key:"getFormData",value:function(){return{Comments:this.ComplaintCommentsFormGroup.get("Comments").value,ComplaintTrackingNo:this.parent_data.ComplaintTrackingNumber}}},{key:"onSubmit",value:function(){var t=this;(this.processing=!0)&&(console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.CheckComplaintRequestForInfo,this.getFormData()).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Updated information ",message:"Updated information successfully",status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find/"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:St.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)}))}}]),t}()).\u0275fac=function(t){return new(t||Qt)(l.Ob(et.d),l.Ob(Dt.a),l.Ob(At.c),l.Ob(kt.a),l.Ob(k.b),l.Ob(c.f),l.Ob(k.b),l.Ob(k.a))},Qt.\u0275cmp=l.Ib({type:Qt,selectors:[["fury-complaint-manage-more-information"]],decls:22,vars:2,consts:[[2,"padding","10px"],["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","2 1 auto"],["formControlName","RequestedInformation","matInput","",3,"readonly"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Rc(2,"Make Comments"),l.Tb(),l.Ub(3,"form",2),l.Ub(4,"mat-dialog-content"),l.Ub(5,"div",3),l.Ub(6,"div"),l.Ub(7,"mat-form-field",4),l.Ub(8,"mat-label"),l.Rc(9,"Requested Information"),l.Tb(),l.Pb(10,"input",5),l.Tb(),l.Tb(),l.Ub(11,"div",6),l.Ub(12,"mat-form-field",7),l.Ub(13,"mat-label"),l.Rc(14,"Provide Comments"),l.Tb(),l.Pb(15,"textarea",8),l.Ub(16,"mat-hint"),l.Rc(17,"Review Comments"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(18,"button",9),l.cc("click",function(){return e.onSubmit()}),l.Ub(19,"span"),l.Rc(20,"Submit"),l.Tb(),l.Tb(),l.Rc(21,"\xa0 "),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.nc("formGroup",e.ComplaintCommentsFormGroup),l.Cb(7),l.nc("readonly",!0))},directives:[k.h,et.v,et.o,et.h,k.e,ot.d,ot.e,st.d,ot.b,st.h,et.c,rt.b,et.n,et.g,lt.b,st.g,_.a],styles:[""]}),Qt),ie=i("zqeb"),se=i("aViL"),re=i("QibW"),ce=((Zt=function(){function t(e,a,n,o,i,s,c,l){r(this,t),this.fb=e,this.endpoints=a,this.http=n,this.service=o,this.dialog=i,this.route=s,this.allDialogRef=c,this.parent_data=l,this.processing=!1,this.ComplaintCommentsFormGroup=this.fb.group({})}return e(t,[{key:"ngOnInit",value:function(){this.ComplaintCommentsFormGroup=this.fb.group({Comments:new et.e("",[et.u.required]),Status:new et.e("",[et.u.required])})}},{key:"getFormData",value:function(){return{Comments:this.ComplaintCommentsFormGroup.get("Comments").value,ComplaintTrackingNo:this.parent_data.ComplaintTrackingNumber,Status:parseInt(this.ComplaintCommentsFormGroup.get("Status").value)}}},{key:"onSubmit",value:function(){var t=this;this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.updateComplaintStatus,this.getFormData()).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:"More information required successfully",status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:St.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}}]),t}()).\u0275fac=function(t){return new(t||Zt)(l.Ob(et.d),l.Ob(Dt.a),l.Ob(At.c),l.Ob(kt.a),l.Ob(k.b),l.Ob(c.f),l.Ob(k.b),l.Ob(k.a))},Zt.\u0275cmp=l.Ib({type:Zt,selectors:[["fury-more-information"]],decls:26,vars:1,consts:[[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],[1,"grouped-items"],["color","primary","formControlName","Status"],["value","8"],["value","9"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"div"),l.Ub(1,"form",0),l.Ub(2,"mat-dialog-content"),l.Ub(3,"div",1),l.Ub(4,"div",2),l.Ub(5,"mat-form-field",3),l.Ub(6,"mat-label"),l.Rc(7,"What more information is needed"),l.Tb(),l.Pb(8,"textarea",4),l.Ub(9,"mat-hint"),l.Rc(10,"Request more Information"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(11,"br"),l.Ub(12,"div",5),l.Ub(13,"h3"),l.Rc(14,"More information from:"),l.Tb(),l.Ub(15,"mat-radio-group",6),l.Ub(16,"mat-radio-button",7),l.Rc(17,"Technical"),l.Tb(),l.Ub(18,"mat-radio-button",8),l.Rc(19,"Legal"),l.Tb(),l.Tb(),l.Tb(),l.Pb(20,"br"),l.Ub(21,"div"),l.Ub(22,"button",9),l.cc("click",function(){return e.onSubmit()}),l.Ub(23,"span"),l.Rc(24,"Submit"),l.Tb(),l.Tb(),l.Rc(25,"\xa0 "),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.nc("formGroup",e.ComplaintCommentsFormGroup))},directives:[et.v,et.o,et.h,k.e,ot.d,ot.e,st.d,ot.b,st.h,rt.b,lt.b,et.c,et.n,et.g,st.g,re.b,re.a,_.a],styles:[""]}),Zt),le=i("jm8W"),me=i("bv9b");function pe(t,e){1&t&&l.Pb(0,"mat-progress-bar",5)}var ue,be=function(t,e){return{"status-true":t,"status-false":e}},de=((ue=function(){function t(e,a){r(this,t),this.data=e,this.dialogRef=a,this.processing=!1}return e(t,[{key:"ngOnInit",value:function(){}},{key:"onCloseDialog",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||ue)(l.Ob(k.a),l.Ob(k.g))},ue.\u0275cmp=l.Ib({type:ue,selectors:[["fury-save-message"]],decls:10,vars:7,consts:[[3,"ngClass"],[1,"mat-progress-bar-container"],["mode","indeterminate",4,"ngIf"],[3,"innerHTML"],["mat-button","",3,"click"],["mode","indeterminate"]],template:function(t,e){1&t&&(l.Ub(0,"main",0),l.Ub(1,"div",1),l.Pc(2,pe,1,0,"mat-progress-bar",2),l.Tb(),l.Ub(3,"header"),l.Pb(4,"h1",3),l.Ub(5,"button",4),l.cc("click",function(){return e.onCloseDialog()}),l.Ub(6,"mat-icon"),l.Rc(7,"clear"),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"section"),l.Pb(9,"p",3),l.Tb(),l.Tb()),2&t&&(l.nc("ngClass",l.sc(4,be,!0===e.data.status,!1===e.data.status)),l.Cb(2),l.nc("ngIf",e.processing),l.Cb(2),l.nc("innerHTML",e.data.title,l.Fc),l.Cb(5),l.nc("innerHTML",e.data.message,l.Fc))},directives:[s.m,pt.a,s.o,_.a,q.a,me.a],styles:["main[_ngcontent-%COMP%]{position:relative;flex-direction:column}main[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;height:56px;margin-bottom:-10px;margin-top:10px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin:0;font-weight:300}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;display:flex;align-items:center;justify-content:center;padding:0}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 20px 20px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;font-size:13px;font-weight:500;color:#373636}main.status-true[_ngcontent-%COMP%]{border:3px solid #6cbd45}main.status-true[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#6cbd45}main.status-false[_ngcontent-%COMP%]{border:3px solid #f44336}main.status-false[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f44336}"]}),ue);function fe(t,e){if(1&t){var a=l.Vb();l.Ub(0,"button",14),l.cc("click",function(){return l.Ec(a),l.gc().onDownloadLetter()}),l.Ub(1,"div",15),l.Ub(2,"mat-icon"),l.Rc(3,"cloud_download"),l.Tb(),l.Ub(4,"span"),l.Rc(5,"Download "),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.gc();l.nc("disabled",n.downloading)}}function ge(t,e){if(1&t&&(l.Ub(0,"span"),l.Ub(1,"span",16),l.Rc(2),l.Tb(),l.Rc(3),l.Tb()),2&t){var a=e.$implicit,n=e.index;l.Cb(2),l.Sc(n>0?",":""),l.Cb(1),l.Tc(" ",a.ComplaintReasonName," ")}}function he(t,e){if(1&t&&(l.Ub(0,"span"),l.Ub(1,"span",16),l.Rc(2),l.Tb(),l.Rc(3),l.Tb()),2&t){var a=e.$implicit,n=e.index;l.Cb(2),l.Sc(n>0?",":""),l.Cb(1),l.Tc(" ",a.DataSubCategoryName," ")}}var Ce,Te=((Ce=function(){function t(e,a,n,o){r(this,t),this.dialog=e,this.dialogRef=a,this.data=n,this.service=o,this.downloading=!1}return e(t,[{key:"ngOnInit",value:function(){console.log("data:",this.data),this.data.download&&this.onDownloadLetter()}},{key:"onCloseWindow",value:function(){this.dialogRef.close()}},{key:"onDownloadLetter",value:function(){var t=this;this.downloading=!0,setTimeout(function(){t.service.openSnackBar("Downloading. Please wait.","nuetral");var e={filename:t.data.row.ComplaintTrackingNo+" - Complaint.pdf",image:{type:"jpeg",quality:1},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:[10,2,2,2]},a=document.getElementById("letterBodyContainer");Et().from(a).set(e).save().then(function(e){setTimeout(function(){t.downloading=!1,t.data.download&&t.onCloseWindow(),t.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},1e3)}}]),t}()).\u0275fac=function(t){return new(t||Ce)(l.Ob(k.b),l.Ob(k.g),l.Ob(k.a),l.Ob(kt.a))},Ce.\u0275cmp=l.Ib({type:Ce,selectors:[["fury-download-complaint"]],decls:102,vars:18,consts:[[2,"border","1px solid red"],["mat-button","",1,"close-window-btn",3,"click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],["mat-button","","color","primary","class","download-button",3,"disabled","click",4,"ngIf"],[1,"letter-body",2,"padding","0px 40px 45px"],[2,"margin-bottom","20px"],[2,"font-weight","700","font-size","14px","text-transform","uppercase","text-align","center","color","#000","margin-top","0px","margin","-30px 0px 25px 0px"],[2,"font-weight","700","letter-spacing","1px","font-size","14px","text-transform","uppercase","text-align","left","color","#000","margin","0px 0px -10px 0px"],[2,"font-size","11px","line-height","14px","font-weight","400","color","#000","text-align","left","display","flex","flex-direction","column","gap","3px","margin","0px"],[2,"font-weight","600"],[2,"margin","15px 0px","display","grid","grid-template-columns","repeat(auto-fit,minmax(200px, 1fr))","gap","20px 25px"],[2,"grid-column","1/-1","font-size","11px","line-height","14px","font-weight","400","color","#000","text-align","left","display","flex","flex-direction","column","gap","3px","margin","0px"],[2,"font-weight","600","margin-left","3px","text-align","justify"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",1,"download-button",3,"disabled","click"],[1,"button-label"],[2,"margin-left","-3px"]],template:function(t,e){1&t&&(l.Ub(0,"main",0),l.Ub(1,"button",1),l.cc("click",function(){return e.onCloseWindow()}),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Tb(),l.Ub(4,"article",2),l.Pc(5,fe,6,1,"button",3),l.Ub(6,"section",4),l.Ub(7,"div",5),l.Ub(8,"h1",6),l.Rc(9," Complaint Information "),l.Tb(),l.Tb(),l.Ub(10,"div"),l.Ub(11,"h3",7),l.Rc(12," Complaint Information "),l.Tb(),l.Tb(),l.Ub(13,"div"),l.Ub(14,"p",8),l.Ub(15,"span"),l.Rc(16,"Source of complaint"),l.Tb(),l.Ub(17,"b",9),l.Rc(18),l.Tb(),l.Tb(),l.Tb(),l.Ub(19,"div"),l.Ub(20,"p",8),l.Ub(21,"span"),l.Rc(22,"Complaint Tracking Number"),l.Tb(),l.Ub(23,"b",9),l.Rc(24),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div"),l.Ub(26,"h3",7),l.Rc(27," Complainant Details "),l.Tb(),l.Tb(),l.Ub(28,"div",10),l.Ub(29,"p",8),l.Ub(30,"span"),l.Rc(31,"Name of Complainant"),l.Tb(),l.Ub(32,"b",9),l.Rc(33),l.Tb(),l.Tb(),l.Ub(34,"p",8),l.Ub(35,"span"),l.Rc(36,"Email Address of Complainant"),l.Tb(),l.Ub(37,"b",9),l.Rc(38),l.Tb(),l.Tb(),l.Ub(39,"p",8),l.Ub(40,"span"),l.Rc(41,"Contact of Complainant"),l.Tb(),l.Ub(42,"b",9),l.Rc(43),l.Tb(),l.Tb(),l.Ub(44,"h3",7),l.Rc(45," Organisation Complained To "),l.Tb(),l.Ub(46,"p",8),l.Ub(47,"span"),l.Rc(48,"Organisation"),l.Tb(),l.Ub(49,"b",9),l.Rc(50),l.Tb(),l.Tb(),l.Ub(51,"h3",7),l.Rc(52," Organisation Contact Person Details "),l.Tb(),l.Ub(53,"p",8),l.Ub(54,"span"),l.Rc(55,"Name of contact person"),l.Tb(),l.Ub(56,"b",9),l.Rc(57),l.Tb(),l.Tb(),l.Ub(58,"p",8),l.Ub(59,"span"),l.Rc(60,"Email Address of contact person"),l.Tb(),l.Ub(61,"b",9),l.Rc(62),l.Tb(),l.Tb(),l.Ub(63,"p",8),l.Ub(64,"span"),l.Rc(65,"Contact of contact person"),l.Tb(),l.Ub(66,"b",9),l.Rc(67),l.Tb(),l.Tb(),l.Ub(68,"h3",7),l.Rc(69," Type of complaint "),l.Tb(),l.Ub(70,"p",8),l.Ub(71,"b",9),l.Rc(72),l.Tb(),l.Tb(),l.Ub(73,"h3",7),l.Rc(74," Reasons for complaint "),l.Tb(),l.Ub(75,"p",11),l.Ub(76,"b",12),l.Pc(77,ge,4,2,"span",13),l.Tb(),l.Tb(),l.Ub(78,"h3",7),l.Rc(79," Personal Data Affected "),l.Tb(),l.Ub(80,"p",11),l.Ub(81,"b",12),l.Pc(82,he,4,2,"span",13),l.Tb(),l.Tb(),l.Ub(83,"h3",7),l.Rc(84," Details of complaint "),l.Tb(),l.Ub(85,"p",8),l.Ub(86,"span"),l.Rc(87,"Full details of complaint"),l.Tb(),l.Ub(88,"b",9),l.Rc(89),l.Tb(),l.Tb(),l.Ub(90,"h3",7),l.Rc(91," Comments "),l.Tb(),l.Ub(92,"p",8),l.Ub(93,"span"),l.Rc(94,"Technical comments"),l.Tb(),l.Ub(95,"b",9),l.Rc(96),l.Tb(),l.Tb(),l.Ub(97,"p",8),l.Ub(98,"span"),l.Rc(99,"Legal comments"),l.Tb(),l.Ub(100,"b",9),l.Rc(101),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(5),l.nc("ngIf",!e.downloading),l.Cb(13),l.Sc(e.data.row.ComplaintSourceName),l.Cb(6),l.Sc(e.data.row.ComplaintTrackingNo),l.Cb(9),l.Uc("",e.data.row.FirstName," ",e.data.row.LastName,""),l.Cb(5),l.Sc(e.data.row.EmailAddress),l.Cb(5),l.Sc(e.data.row.PhoneNumber),l.Cb(7),l.Sc(e.data.row.OrganisationComplainedToName),l.Cb(7),l.Uc("",e.data.row.ContactPersonFirstName," ",e.data.row.ContactPersonLastName,""),l.Cb(5),l.Sc(e.data.row.ContactPersonEmailAddress),l.Cb(5),l.Sc(e.data.row.ContactPersonPhoneNumber),l.Cb(5),l.Sc(e.data.row.FormName),l.Cb(5),l.nc("ngForOf",e.data.row.ReasonsForComplaint),l.Cb(5),l.nc("ngForOf",e.data.row.PersonalDataAffected),l.Cb(7),l.Sc(e.data.row.FullDetailsOfComplaint),l.Cb(7),l.Sc(e.data.row.TechnicalComments),l.Cb(5),l.Sc(e.data.row.LegalComments))},directives:[_.a,q.a,s.o,s.n],styles:[""]}),Ce),ve=i("/t3+"),ye=["autosize"],Ue=function(){return{"margin-left":"30px"}};function Re(t,e){if(1&t){var a=l.Vb();l.Ub(0,"button",42),l.cc("click",function(){return l.Ec(a),l.gc(2).manageRequestForMoreInfo()}),l.Ub(1,"span"),l.Rc(2,"Manage request for more information"),l.Tb(),l.Tb()}2&t&&l.nc("ngStyle",l.qc(1,Ue))}var xe=function(){return{"margin-left":"500px"}};function Oe(t,e){if(1&t){var a=l.Vb();l.Ub(0,"button",42),l.cc("click",function(){return l.Ec(a),l.gc(2).onSave()}),l.Ub(1,"span"),l.Rc(2,"Save Changes"),l.Tb(),l.Tb()}2&t&&l.nc("ngStyle",l.qc(1,xe))}function Pe(t,e){if(1&t){var a=l.Vb();l.Ub(0,"div",37),l.Ub(1,"mat-toolbar"),l.Ub(2,"mat-toolbar-row"),l.Pb(3,"span",38),l.Ub(4,"button",39),l.cc("click",function(){return l.Ec(a),l.gc().markAsResolved()}),l.Ub(5,"span"),l.Rc(6,"Mark as resolved"),l.Tb(),l.Tb(),l.Ub(7,"button",40),l.cc("click",function(){return l.Ec(a),l.gc().forwardComplaint()}),l.Ub(8,"span"),l.Rc(9,"Forward Complaint"),l.Tb(),l.Tb(),l.Pc(10,Re,3,2,"button",41),l.Pc(11,Oe,3,2,"button",41),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.gc();l.Cb(4),l.nc("disabled",1==n.disableResolve),l.Cb(3),l.nc("disabled",1==n.disableForward)("ngStyle",l.qc(5,Ue)),l.Cb(3),l.nc("ngIf",1==n.manageRequestForInfo),l.Cb(1),l.nc("ngIf",1==n.application.ComplaintSourceID)}}var Ie=function(){return{"margin-right":"30px"}};function we(t,e){if(1&t){var a=l.Vb();l.Ub(0,"div",37),l.Ub(1,"mat-toolbar"),l.Ub(2,"mat-toolbar-row"),l.Ub(3,"button",43),l.cc("click",function(){return l.Ec(a),l.gc().markUnderInvestigation()}),l.Ub(4,"span"),l.Rc(5," Investigate "),l.Tb(),l.Tb(),l.Ub(6,"button",39),l.cc("click",function(){return l.Ec(a),l.gc().markAsResolved()}),l.Ub(7,"span"),l.Rc(8,"Mark as resolved"),l.Tb(),l.Tb(),l.Ub(9,"button",44),l.cc("click",function(){return l.Ec(a),l.gc().moreInformation()}),l.Ub(10,"span"),l.Rc(11,"Request for more information"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.gc();l.Cb(3),l.nc("ngStyle",l.qc(5,Ie))("disabled",1==n.disableResolve),l.Cb(3),l.nc("disabled",1==n.disableResolve),l.Cb(3),l.nc("disabled",1==n.disableResolve)("ngStyle",l.qc(6,Ue))}}function De(t,e){1&t&&(l.Ub(0,"mat-form-field",9),l.Ub(1,"mat-label"),l.Rc(2,"Who are you complaining as"),l.Tb(),l.Pb(3,"input",45),l.Tb())}function ke(t,e){1&t&&(l.Ub(0,"mat-form-field",9),l.Ub(1,"mat-label"),l.Rc(2,"Who are you complaining as"),l.Tb(),l.Pb(3,"input",46),l.Tb()),2&t&&(l.Cb(3),l.nc("disabled",!0))}function Fe(t,e){1&t&&(l.Ub(0,"mat-form-field",9),l.Ub(1,"mat-label"),l.Rc(2,"Organisation Complained From"),l.Tb(),l.Pb(3,"input",47),l.Tb())}function Se(t,e){1&t&&(l.Ub(0,"mat-form-field",9),l.Ub(1,"mat-label"),l.Rc(2,"Other Organisation"),l.Tb(),l.Pb(3,"input",48),l.Tb())}function Ne(t,e){1&t&&(l.Ub(0,"mat-form-field",9),l.Ub(1,"mat-label"),l.Rc(2,"Other Organisation Complained To"),l.Tb(),l.Pb(3,"input",49),l.Tb())}function Ee(t,e){if(1&t&&(l.Ub(0,"mat-grid-tile"),l.Rc(1),l.Tb()),2&t){var a=e.$implicit;l.Cb(1),l.Tc(" ",a.DataSubCategoryName," ")}}function Ae(t,e){if(1&t&&(l.Ub(0,"fieldset"),l.Ub(1,"legend"),l.Rc(2,"Complaint in Brief"),l.Tb(),l.Ub(3,"mat-label"),l.Rc(4,"Personal Data Affected"),l.Tb(),l.Ub(5,"mat-grid-list",21),l.Pc(6,Ee,2,1,"mat-grid-tile",22),l.Tb(),l.Tb()),2&t){var a=l.gc();l.Cb(6),l.nc("ngForOf",a.personalData)}}function Me(t,e){1&t&&l.Pb(0,"mat-grid-tile")}function Le(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&t){var a=l.gc(3);l.Cb(1),l.Tc(" - ",a.ComplaintEvidence.Size," Mbs")}}function _e(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Pc(2,Le,2,1,"span",19),l.Tb()),2&t){var a=l.gc(2);l.Cb(1),l.Tc("Document: ",a.ComplaintEvidence.Name," "),l.Cb(1),l.nc("ngIf",a.ComplaintEvidence&&a.ComplaintEvidence.Size)}}function je(t,e){1&t&&(l.Ub(0,"p",50),l.Rc(1,"No document found. Please attach"),l.Tb())}var qe=function(){return{width:"100px",height:"100px"}};function ze(t,e){if(1&t){var a=l.Vb();l.Ub(0,"fieldset"),l.Ub(1,"legend"),l.Rc(2,"Evidence Of Complaint"),l.Tb(),l.Ub(3,"div",30),l.cc("click",function(){return l.Ec(a),l.gc().onReadDocument()}),l.Pb(4,"img",31),l.Pc(5,_e,3,2,"span",19),l.Tb(),l.Pc(6,je,2,0,"p",32),l.Tb()}if(2&t){var n=l.gc();l.Cb(4),l.nc("ngStyle",l.qc(3,qe)),l.Cb(1),l.nc("ngIf",n.ComplaintEvidence&&n.ComplaintEvidence.Name),l.Cb(1),l.nc("ngIf",n.ComplaintEvidence&&!n.ComplaintEvidence.Base64)}}function Ge(t,e){if(1&t){var a=l.Vb();l.Ub(0,"button",54),l.cc("click",function(){return l.Ec(a),l.gc(2).onRemoveDocument()}),l.Ub(1,"div",35),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Ub(4,"span"),l.Rc(5," Remove Document "),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.gc(2);l.nc("disabled",n.processing)}}function Ve(t,e){if(1&t){var a=l.Vb();l.Ub(0,"div",30),l.cc("click",function(){l.Ec(a);var t=l.gc(2);return t.onReadDocument(t.ComplaintEvidence)}),l.Pb(1,"img",55),l.Ub(2,"span"),l.Rc(3),l.Ub(4,"span"),l.Rc(5),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.gc(2);l.Cb(3),l.Tc("Document: ",n.ComplaintEvidence.Name," "),l.Cb(2),l.Tc(" - ",n.ComplaintEvidence.Size," Mbs")}}function $e(t,e){if(1&t){var a=l.Vb();l.Ub(0,"fieldset"),l.Ub(1,"div",33),l.Ub(2,"button",51),l.cc("click",function(){return l.Ec(a),l.gc().onUploadAttachments()}),l.Ub(3,"div",35),l.Ub(4,"mat-icon"),l.Rc(5,"add"),l.Tb(),l.Ub(6,"span"),l.Rc(7),l.Tb(),l.Tb(),l.Tb(),l.Pc(8,Ge,6,1,"button",52),l.Tb(),l.Pc(9,Ve,6,2,"div",53),l.Tb()}if(2&t){var n=l.gc();l.Cb(2),l.nc("disabled",n.processing),l.Cb(5),l.Tc(" ",n.ComplaintEvidence.Base64?"Replace Document":"Upload Attachment"," "),l.Cb(1),l.nc("ngIf",n.ComplaintEvidence.Base64),l.Cb(1),l.nc("ngIf",n.ComplaintEvidence.Base64)}}function Be(t,e){1&t&&(l.Ub(0,"span"),l.Rc(1,"(To, Technical)"),l.Tb())}function We(t,e){1&t&&(l.Ub(0,"span"),l.Rc(1,"(To, Legal)"),l.Tb())}function He(t,e){if(1&t&&(l.Ub(0,"mat-grid-tile",58),l.Ub(1,"mat-grid-tile-header"),l.Rc(2),l.Pc(3,Be,2,0,"span",19),l.Pc(4,We,2,0,"span",19),l.Tb(),l.Ub(5,"p"),l.Rc(6),l.Tb(),l.Tb()),2&t){var a=e.$implicit;l.Cb(2),l.Tc(" ",a.Comments," "),l.Cb(1),l.nc("ngIf",8==a.ComplaintStatus),l.Cb(1),l.nc("ngIf",9==a.ComplaintStatus),l.Cb(2),l.Tc(" ",a.Feedback," ")}}function Ke(t,e){if(1&t&&(l.Ub(0,"mat-grid-list",56),l.Rc(1," test "),l.Pc(2,He,7,4,"mat-grid-tile",57),l.Tb()),2&t){var a=l.gc();l.Cb(2),l.nc("ngForOf",a.RequestedInforamationTrack)}}function Xe(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&t){var a=l.gc(2);l.Cb(1),l.Tc(" - ",a.document.Size," Mbs")}}function Ye(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Pc(2,Xe,2,1,"span",19),l.Tb()),2&t){var a=l.gc();l.Cb(1),l.Tc("Document: ",a.document.Name," "),l.Cb(1),l.nc("ngIf",a.document.Size)}}function Je(t,e){1&t&&(l.Ub(0,"p",50),l.Rc(1,"No document found. Please attach"),l.Tb())}var Qe,Ze=function(){return["Complaints"]},ta=((Qe=function(t){a(i,t);var n=o(i);function i(t,e,a,o,s,c,p,u,b,d,f,g,h,C,T,v){var U;return r(this,i),(U=n.call(this,h,C,T,v)).formBuilder=t,U.activateRoute=e,U.route=a,U.dialog=o,U.bottomsheet=s,U.endpoints=c,U.http=p,U.service=u,U.allDialogRef=b,U.auth=d,U.utilService=f,U.snackBar=g,U.authService=h,U._workflowService=C,U.registrationService=T,U.complaintService=v,U.subject$=new y.a(1),U.data$=U.subject$.asObservable(),U.sub$=new y.a(1),U.dat$=U.sub$.asObservable(),U.$processingEvent=new l.o,U.$errorsEvent=new l.o,U.$resultComplaintsEvent=new l.o,U.subscriptions=[],U.ActionTakenCheckboxValue=0,U.disableResolve=!0,U.disableForward=!1,U.processing=!1,U.isDirector=!1,U.manageRequestForInfo=!1,U.RequestedInforamationTrack=[],U.application=new m,U.DataSubjectsCategories=[],U.personalDataAffected=[],U.complaintReasons=[],U.list=[],U.displayColumns=["nber","personalDataCategory","personalDataSubCategory","actions"],U.permittedActions=[],U.dataCategories=[],U.$dataCategories=[],U.$subCategories=[],U.dataCategory=new et.e,U.dataSubCategory=new et.e,U.buttonIcon="add_circle_outline",U.buttonLabel="Add",U.isEditingPersonalData=!1,U.tableEditable=!0,U.personalDataIndex=0,U.personalNumber=1,U._gap=16,U.gap=U._gap+"px",U.col2="1 1 calc(50% - ".concat(U._gap/2,"px)"),U.col3="1 1 calc(33.3333% - ".concat(U._gap/1.5,"px)"),U.accesses=h.getKeycloakInstance().resourceAccess["dps-frontend"].roles,console.log(U.accesses),U.operationType=e.routeConfig.data.action,U.ComplaintTrackingNumber=U.route.getCurrentNavigation().extras.state.ComplaintTrackingNumber,U.ComplaintSourceID=U.route.getCurrentNavigation().extras.state.ComplaintSourceID,console.log(U.operationType),"EDIT"===U.operationType?(U.isEditMode=!0,U.application.comments=[],U.application.personalDataAffected=[]):"CREATE"===U.operationType?(U.isEditMode=!1,U.application.comments=[],U.application.personalDataAffected=[]):"VIEW"===U.operationType&&(1==U.ComplaintSourceID?(U.isEditMode=!0,U.isViewOnly=!1):(U.isEditMode=!1,U.isViewOnly=!0)),U}return e(i,[{key:"ngOnInit",value:function(){var t=this;this.initForm(),console.log(this.sampleJson),this.sampleJson().subscribe(function(e){t.$dataCategories=e}),this.accesses.includes("resolve.director.complaint")&&(this.isDirector=!0),console.log(this.$dataCategories),this.getComplaint(),this.subscriptions.$resultComplaintsEvent=this.$resultComplaintsEvent.subscribe(function(e){e&&(t.httpSub=t.http.get(t.endpoints.GetComplaintRequestForInfo+"?ComplaintTrackingNo="+t.ComplaintTrackingNumber).pipe(Object(wt.a)(t.service.handleError)).subscribe(function(e){t.RequestedInforamationTrack=e.data,t.processing=!1},function(e){t.processing=!1}),t.application=e,console.log(t.application),t.accesses.includes("resolve.technical.complaint")?2==t.application.StatusID?t.disableForward=!1:8==t.application.StatusID?(t.manageRequestForInfo=!0,t.disableForward=!0):t.disableForward=!0:t.accesses.includes("resolve.legal.complaint")?3==t.application.StatusID?t.disableForward=!1:9==t.application.StatusID?(t.manageRequestForInfo=!0,t.disableForward=!0):t.disableForward=!0:t.disableForward=!0,4==t.application.StatusID&&t.accesses.includes("resolve.director.complaint")?t.disableResolve=!1:6==t.application.FormID?t.disableResolve=!t.accesses.includes("resolve.technical.complaint"):9!=t.application.FormID&&11!=t.application.FormID||(t.disableResolve=!t.accesses.includes("resolve.legal.complaint")||3!=t.application.StatusID),t.mapFields()),e&&(t.application=e,console.log(t.application),t.mapFields())}),this.disableFieldsByStatus(),this.isViewOnly&&this.disableAllControls()}},{key:"mapFields",value:function(){this.isApplicationValid=!0,this.personalData=this.application.PersonalDataAffected,this.complaintReasons=this.application.ReasonsForComplaint,console.log(this.application),this.complaintForm.get("reasonForTheComplaint").setValue(this.application.ReasonsForComplaint),this.complaintForm.get("complaintDetails").setValue(this.application.FullDetailsOfComplaint),this.complaintForm.get("remedialActions").setValue(this.application.RemedialActions),this.complaintForm.get("lastModificationDate").setValue(this.application.FirstName),this.complaintForm.get("dataSubjectName").setValue(this.application.FirstName+" "+this.application.LastName),this.complaintForm.get("dataSubjectPhone").setValue(this.application.PhoneNumber),this.complaintForm.get("dataSubjectEmail").setValue(this.application.EmailAddress),this.complaintForm.get("ComplaintCategory").setValue(this.application.ComplainerCategory),this.complaintForm.get("OrganisationComplainedTo").setValue(this.application.OrganisationComplainedToName),this.complaintForm.get("ContactFirstName").setValue(this.application.ContactPersonFirstName),this.complaintForm.get("ContactLastName").setValue(this.application.ContactPersonLastName),this.complaintForm.get("ContactEmailAddress").setValue(this.application.ContactPersonEmailAddress),this.complaintForm.get("TechnicalForwardedComments").setValue(this.application.TechnicalComments),this.complaintForm.get("LegalForwardedComments").setValue(this.application.LegalComments),this.complaintForm.get("MoreInformationRequired").setValue(this.application.MoreInformation),this.isApplicationValid=!0,this.personalData=this.application.PersonalDataAffected,this.complaintReasons=this.application.ReasonsForComplaint,console.log(this.application.EvidenceOfComplaint),this.ComplaintEvidence={Document:null,Name:"Complaint Evidence.pdf",Size:null,Base64:this.application.EvidenceOfComplaint}}},{key:"initForm",value:function(){this.complaintForm=this.formBuilder.group({personalDataAffected:["",et.u.compose([et.u.required])],reasonForTheComplaint:["",et.u.compose([et.u.required])],complaintDetails:["",et.u.compose([et.u.required])],remedialActions:["",et.u.compose([et.u.required])],dataSubjectName:["",et.u.compose([et.u.required])],dataSubjectPhone:["",et.u.compose([et.u.required])],dataSubjectEmail:["",et.u.compose([et.u.required])],ContactFirstName:["",et.u.compose([et.u.required])],ContactLastName:["",et.u.compose([et.u.required])],ContactEmailAddress:["",et.u.compose([et.u.required])],OrganisationComplainedTo:["",et.u.compose([et.u.required])],OtherOrganisationComplainedTo:["",et.u.compose([et.u.required])],ComplaintCategory:["",et.u.compose([et.u.required])],OrganisationComplainedFrom:["",et.u.compose([et.u.required])],OtherOrganisationComplainedFrom:["",et.u.compose([et.u.required])],TechnicalForwardedComments:["",et.u.compose([et.u.required])],LegalForwardedComments:["",et.u.compose([et.u.required])],MoreInformationRequired:["",et.u.compose([et.u.required])],lastModificationDate:[]}),this.personalDataFormGroup=this.formBuilder.group({dataCategory:[null,et.u.required],dataSubCategory:[null,et.u.required]})}},{key:"ActionTakenCheckboxChange",value:function(t){this.ActionTakenCheckboxValue=t.checked?1:0}},{key:"onReadDocument",value:function(){this.bottomsheetRef=this.bottomsheet.open(at.a,{disableClose:!0,panelClass:["view-pdf-document-bottomsheet","bottomsheets"],data:{url:this.ComplaintEvidence.Base64,title:this.ComplaintEvidence.Name}})}},{key:"disableFieldsByStatus",value:function(){this.application&&"NEW"!==this.application.status&&"STORED"!==this.application.status&&"ISSUED"===this.application.status&&this.disableAllControls()}},{key:"disableAllControls",value:function(){this.complaintForm.disable()}},{key:"onCommentChange",value:function(t){t&&(this.application.comments=t)}},{key:"onPersonalDataChange",value:function(t){this.personalDataAffected=t}},{key:"acceptData",value:function(t){this.personalDataAffected=t}},{key:"formTriggler",value:function(t){switch(t){case"EDIT":case"CREATE":break;case"VIEW":this.isViewOnly=!0}}},{key:"getFormData",value:function(){var t=(this.complaintForm.get("dataSubjectName").value?this.complaintForm.get("dataSubjectName").value:"").split(" "),e=t[0],a=t[1];return console.log(t),{ComplainantFirstName:e,ComplainantLastName:a,ComplainantEmailAddress:this.complaintForm.get("dataSubjectEmail").value?this.complaintForm.get("dataSubjectEmail").value:"",ComplainantPhoneNumber:this.complaintForm.get("dataSubjectPhone").value?this.complaintForm.get("dataSubjectPhone").value:"",ComplainantPhysicalAddress:"",ComplainerCategory:"Individual",IsCustomerToOrganisation:"Yes",Organisation:this.complaintForm.get("OrganisationComplainedTo").value?this.complaintForm.get("OrganisationComplainedTo").value:"",ComplaintTrackingNo:this.ComplaintTrackingNumber,ComplaintEvidence:this.ComplaintEvidence.Base64?this.ComplaintEvidence.Base64:"",ContactFirstName:this.complaintForm.get("ContactFirstName").value?this.complaintForm.get("ContactFirstName").value:"",ContactLastName:this.complaintForm.get("ContactLastName").value?this.complaintForm.get("ContactLastName").value:"",ContactEmailAddress:this.complaintForm.get("ContactEmailAddress").value?this.complaintForm.get("ContactEmailAddress").value:"",ContactPhoneNumber:"",FullDetailsOfComplaint:this.complaintForm.get("complaintDetails").value?this.complaintForm.get("complaintDetails").value:"",PersonalDataAffected:this.personalDataFormGroup.get("dataCategory").value?this.personalDataFormGroup.get("dataCategory").value:""}}},{key:"getComplaint",value:function(){this.complaintService.getComplaint(this.ComplaintTrackingNumber,this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent)}},{key:"initForms",value:function(){this.personalDataFormGroup=this.formBuilder.group({dataCategory:[null,et.u.required],dataSubCategory:[null,et.u.required]})}},{key:"markUnderInvestigation",value:function(){this.dialog.open(ee,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,Status:5}}).afterClosed().subscribe(function(t){})}},{key:"markAsResolved",value:function(){this.dialog.open(ee,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,Status:6,isDirector:this.isDirector}})}},{key:"onForward",value:function(){var t=this;this.processing=!0,this.httpSub=this.http.post(this.endpoints.updateComplaintStatus,this.getFormData()).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(ae.a,{panelClass:["forward-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:"Forwarded successfully",status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(ae.a,{panelClass:["forward-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:St.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}},{key:"forwardComplaint",value:function(){var t;this.accesses.includes("resolve.technical.complaint")?t=3:this.accesses.includes("resolve.legal.complaint")&&(t=4),this.dialog.open(ee,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,Status:t}})}},{key:"moreInformation",value:function(){this.dialog.open(ce,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber}}).afterClosed().subscribe(function(t){})}},{key:"onSave",value:function(){var t=this,e=this.getFormData();console.log(e),this.processing=!0,this.httpSub=this.http.post(this.endpoints.updateComplaint,this.getFormData()).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(de,{panelClass:["save-message-dialog","dialogs"],disableClose:!0,data:{title:"Save Message",message:"Edit saved successfully",status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(ae.a,{panelClass:["forward-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:St.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}},{key:"ChildrenDataSubjectCategoryChange",value:function(t){if(t.checked)-1==this.DataSubjectsCategories.indexOf("children")&&this.DataSubjectsCategories.push("children"),console.log("here1");else{var e=this.DataSubjectsCategories.indexOf("children");-1!==e&&this.DataSubjectsCategories.splice(e,1)}}},{key:"AdultDataSubjectCategoryChange",value:function(t){if(t.checked)-1==this.DataSubjectsCategories.indexOf("adults")&&this.DataSubjectsCategories.push("adults"),console.log("here1");else{var e=this.DataSubjectsCategories.indexOf("adults");-1!==e&&this.DataSubjectsCategories.splice(e,1)}}},{key:"onSelectCategory",value:function(t){var e=this;this.$subCategories=[],this.$dataCategories.find(function(e){return e===t.value}).subCategories.forEach(function(t){return e.$subCategories.push(t)}),this.personalDataFormGroup.get("dataSubCategory").enable()}},{key:"disableSubCategories",value:function(){0===this.$subCategories.length&&this.personalDataFormGroup.get("dataSubCategory").disable()}},{key:"sampleJson",value:function(){return Object(U.a)(ne.a.map(function(t){return t}))}},{key:"onUploadAttachments",value:function(){var t=this;this.dialogRef=this.dialog.open(le.a,{panelClass:["organisation-upload-dialog","dialogs"],disableClose:!0,data:{multiple:!1}}),this.dialogRef.afterClosed().subscribe(function(e){console.log("row:",e.row),e.status&&(t.ComplaintEvidence=e.row),console.log(t.ComplaintEvidence)})}},{key:"manageRequestForMoreInfo",value:function(){var t=this;this.httpSub=this.http.get(this.endpoints.CheckComplaintRequestForInfo+"?ComplaintTrackingNo="+this.ComplaintTrackingNumber).pipe(Object(wt.a)(this.service.handleError)).subscribe(function(e){console.log(e.data.Comments),t.dialogRef=t.dialog.open(oe,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:t.ComplaintTrackingNumber,RequestedInformation:e.data.Comments}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(Ft.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:St.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}},{key:"getRequestInfoData",value:function(){return{ComplaintTrackingNo:this.ComplaintTrackingNumber,RequestCategory:"Complaints"}}},{key:"onPreviewForm",value:function(t){this.dialogRef=this.dialog.open(Te,{panelClass:["download-complaint-dialog","dialogs"],disableClose:!0,data:{download:t,row:this.application}})}},{key:"getData",get:function(){return Object(U.a)(g)}},{key:"getSampleJson",get:function(){return Object(U.a)(b)}},{key:"getSamplJson",get:function(){return Object(U.a)(f)}}]),i}(O.a)).\u0275fac=function(t){return new(t||Qe)(l.Ob(et.d),l.Ob(c.a),l.Ob(c.f),l.Ob(k.b),l.Ob(nt.b),l.Ob(Dt.a),l.Ob(At.c),l.Ob(kt.a),l.Ob(k.b),l.Ob(F.c),l.Ob(ie.a),l.Ob(se.a),l.Ob(F.c),l.Ob(I.a),l.Ob(w.a),l.Ob(P.a))},Qe.\u0275cmp=l.Ib({type:Qe,selectors:[["fury-complaints-edit"]],viewQuery:function(t,e){var a;1&t&&l.Vc(ye,!0),2&t&&l.zc(a=l.dc())&&(e.autosize=a.first)},features:[l.zb],decls:138,vars:28,consts:[["mode","card"],["current","Manage",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],["class","actions-button-padding",4,"ngIf"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 1 auto"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],["fxFlex","2 1 auto",4,"ngIf"],["formControlName","ContactFirstName","matInput",""],["formControlName","ContactLastName","matInput",""],["formControlName","ContactEmailAddress","matInput",""],["formControlName","OrganisationComplainedTo","matInput",""],["fxFlex","2 1 auto",4,"ngIfOrganisation","ngIf"],[4,"ngIf"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["cols","4","rowHeight","4rem"],[4,"ngFor","ngForOf"],["fxFlex","2 1 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","complaintDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["formControlName","TechnicalForwardedComments","matInput","",3,"disabled"],["formControlName","LegalForwardedComments","matInput","",3,"disabled"],["cols","4","rowHeight","10rem","gutterSize","20px",4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/img/pdf.png","alt","",3,"ngStyle"],["class","no-document-found",4,"ngIf"],[1,"buttons"],["mat-button","","color","primary","matTooltip","Keep a copy of the information you have filled in",1,"download",3,"click"],[1,"button-label"],["mat-button","","color","primary","matTooltip","Have a look at all the information you have filled in before sending.",1,"preview",3,"click"],[1,"actions-button-padding"],[1,"example-spacer"],["mat-raised-button","","matTooltip","View Timeline","color","primary",1,"actions-button-padding",3,"disabled","click"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"disabled","ngStyle","click"],["mat-raised-button","","class","actions-button-padding","color","primary",3,"ngStyle","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"ngStyle","click"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"ngStyle","disabled","click"],["mat-raised-button","","matTooltip","View Timeline","color","primary",1,"actions-button-padding",3,"disabled","ngStyle","click"],["formControlName","ComplaintCategory","matInput",""],["value","Individual","matInput","",3,"disabled"],["formControlName","OrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedTo","matInput",""],[1,"no-document-found"],["mat-button","","color","primary",1,"add-item-button",3,"disabled","click"],["mat-button","","color","primary","class","remove-button",3,"disabled","click",4,"ngIf"],["class","uploaded-document","matTooltip","Open Document",3,"click",4,"ngIf"],["mat-button","","color","primary",1,"remove-button",3,"disabled","click"],["src","./assets/img/pdf.png","alt",""],["cols","4","rowHeight","10rem","gutterSize","20px"],["style","background-color: rgb(153, 216, 245)",4,"ngFor","ngForOf"],[2,"background-color","rgb(153, 216, 245)"]],template:function(t,e){1&t&&(l.Ub(0,"fury-page-layout",0),l.Ub(1,"fury-page-layout-header"),l.Pb(2,"fury-breadcrumbs",1),l.Tb(),l.Ub(3,"fury-page-layout-content",2),l.Pc(4,Pe,12,6,"div",3),l.Pc(5,we,12,7,"div",3),l.Ub(6,"div",4),l.Ub(7,"fury-card",5),l.Ub(8,"fury-card-header"),l.Ub(9,"fury-card-header-heading"),l.Rc(10,"Complaint Information"),l.Tb(),l.Tb(),l.Ub(11,"fury-card-content",6),l.Ub(12,"form",7),l.Ub(13,"fieldset"),l.Ub(14,"legend"),l.Rc(15,"Data Subject Details"),l.Tb(),l.Ub(16,"div",8),l.Ub(17,"mat-form-field",9),l.Ub(18,"mat-label"),l.Rc(19,"Data subject name"),l.Tb(),l.Pb(20,"input",10),l.Tb(),l.Ub(21,"mat-form-field",9),l.Ub(22,"mat-label"),l.Rc(23,"Data Subject Email"),l.Tb(),l.Pb(24,"input",11),l.Tb(),l.Ub(25,"mat-form-field",9),l.Ub(26,"mat-label"),l.Rc(27,"Data Subject Phone"),l.Tb(),l.Pb(28,"input",12),l.Tb(),l.Tb(),l.Tb(),l.Ub(29,"fieldset"),l.Ub(30,"legend"),l.Rc(31,"Data Subject Organisation"),l.Tb(),l.Pc(32,De,4,0,"mat-form-field",13),l.Pc(33,ke,4,1,"mat-form-field",13),l.Pc(34,Fe,4,0,"mat-form-field",13),l.Pc(35,Se,4,0,"mat-form-field",13),l.Tb(),l.Ub(36,"fieldset"),l.Ub(37,"legend"),l.Rc(38,"Organisation Contact Person Details"),l.Tb(),l.Ub(39,"div",8),l.Ub(40,"mat-form-field",9),l.Ub(41,"mat-label"),l.Rc(42,"Contact First Name"),l.Tb(),l.Pb(43,"input",14),l.Tb(),l.Ub(44,"mat-form-field",9),l.Ub(45,"mat-label"),l.Rc(46,"Contact Last Name"),l.Tb(),l.Pb(47,"input",15),l.Tb(),l.Ub(48,"mat-form-field",9),l.Ub(49,"mat-label"),l.Rc(50,"Contact Email"),l.Tb(),l.Pb(51,"input",16),l.Tb(),l.Tb(),l.Tb(),l.Ub(52,"fieldset"),l.Ub(53,"legend"),l.Rc(54,"Details Organisation Complained To"),l.Tb(),l.Ub(55,"div",8),l.Ub(56,"mat-form-field",9),l.Ub(57,"mat-label"),l.Rc(58,"Organisation Complained To"),l.Tb(),l.Pb(59,"input",17),l.Tb(),l.Pc(60,Ne,4,0,"mat-form-field",18),l.Tb(),l.Tb(),l.Pc(61,Ae,7,1,"fieldset",19),l.Ub(62,"fieldset"),l.Ub(63,"legend"),l.Rc(64,"General Complaint Info"),l.Tb(),l.Ub(65,"div",20),l.Ub(66,"fieldset"),l.Ub(67,"legend"),l.Rc(68,"Complaint Reasons"),l.Tb(),l.Ub(69,"mat-label"),l.Rc(70,"Reasons for complaints"),l.Tb(),l.Ub(71,"mat-grid-list",21),l.Pc(72,Me,1,0,"mat-grid-tile",22),l.Tb(),l.Tb(),l.Ub(73,"div",8),l.Ub(74,"mat-form-field",23),l.Ub(75,"mat-label"),l.Rc(76,"Complaint Details"),l.Tb(),l.Pb(77,"textarea",24,25),l.Tb(),l.Tb(),l.Pc(79,ze,7,4,"fieldset",19),l.Pc(80,$e,10,4,"fieldset",19),l.Tb(),l.Tb(),l.Ub(81,"fieldset"),l.Ub(82,"legend"),l.Rc(83,"Forwarded Comments"),l.Tb(),l.Ub(84,"div"),l.Ub(85,"div"),l.Ub(86,"mat-form-field",9),l.Ub(87,"mat-label"),l.Rc(88,"Technical Comments"),l.Tb(),l.Pb(89,"input",26),l.Tb(),l.Tb(),l.Ub(90,"div"),l.Ub(91,"mat-form-field",9),l.Ub(92,"mat-label"),l.Rc(93,"Legal Comments"),l.Tb(),l.Pb(94,"input",27),l.Tb(),l.Tb(),l.Ub(95,"fieldset"),l.Ub(96,"legend"),l.Rc(97,"More Information"),l.Tb(),l.Ub(98,"mat-label"),l.Rc(99,"Requested Information"),l.Tb(),l.Pc(100,Ke,3,1,"mat-grid-list",28),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(101,"fieldset"),l.Ub(102,"legend"),l.Rc(103,"Comments"),l.Tb(),l.Ub(104,"div",20),l.Ub(105,"fieldset"),l.Ub(106,"legend"),l.Rc(107,"Investigation Comments"),l.Tb(),l.Ub(108,"textarea",29,25),l.Rc(110),l.Tb(),l.Tb(),l.Ub(111,"fieldset"),l.Ub(112,"legend"),l.Rc(113,"Resolution Comments"),l.Tb(),l.Ub(114,"textarea",29,25),l.Rc(116),l.Tb(),l.Ub(117,"div"),l.Ub(118,"fieldset"),l.Ub(119,"legend"),l.Rc(120,"Resolution Document"),l.Tb(),l.Ub(121,"div",30),l.cc("click",function(){return e.onReadDocument()}),l.Pb(122,"img",31),l.Pc(123,Ye,3,2,"span",19),l.Tb(),l.Pc(124,Je,2,0,"p",32),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(125,"div",33),l.Ub(126,"button",34),l.cc("click",function(){return e.onPreviewForm(!0)}),l.Ub(127,"div",35),l.Ub(128,"mat-icon"),l.Rc(129,"sim_card_download"),l.Tb(),l.Ub(130,"span"),l.Rc(131,"Download"),l.Tb(),l.Tb(),l.Tb(),l.Ub(132,"button",36),l.cc("click",function(){return e.onPreviewForm(!1)}),l.Ub(133,"div",35),l.Ub(134,"mat-icon"),l.Rc(135,"visibility"),l.Tb(),l.Ub(136,"span"),l.Rc(137,"Preview"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(2),l.nc("@fadeInRight",void 0)("crumbs",l.qc(26,Ze)),l.Cb(1),l.nc("fxLayoutGap",e.gap),l.Cb(1),l.nc("ngIf",0==e.isDirector),l.Cb(1),l.nc("ngIf",1==e.isDirector),l.Cb(1),l.nc("fxLayoutGap",e.gap),l.Cb(1),l.nc("fxFlex.gt-sm",e.col2)("@fadeInUp",void 0),l.Cb(5),l.nc("formGroup",e.complaintForm),l.Cb(20),l.nc("ngIf",2==e.application.ComplaintSourceID),l.Cb(1),l.nc("ngIf",1==e.application.ComplaintSourceID),l.Cb(1),l.nc("ngIf","individual"===e.application.ComplainerCategory),l.Cb(1),l.nc("ngIf","individual"===e.application.ComplainerCategory),l.Cb(25),l.nc("ngIf",null==e.application.OrganisationComplainedToName),l.Cb(1),l.nc("ngIf",2==e.application.ComplaintSourceID),l.Cb(11),l.nc("ngForOf",e.complaintReasons),l.Cb(7),l.nc("ngIf",2==e.application.ComplaintSourceID),l.Cb(1),l.nc("ngIf",1==e.application.ComplaintSourceID),l.Cb(9),l.nc("disabled",!0),l.Cb(5),l.nc("disabled",!0),l.Cb(6),l.nc("ngIf",e.RequestedInforamationTrack.length>0),l.Cb(10),l.Sc(e.application.InvestigationComments),l.Cb(6),l.Sc(e.application.ResolutionComments),l.Cb(6),l.nc("ngStyle",l.qc(27,qe)),l.Cb(1),l.nc("ngIf",e.document&&e.document.Name),l.Cb(1),l.nc("ngIf",e.document&&!e.document.Base64))},directives:[S.a,N.a,E.a,A.a,ot.d,ot.e,s.o,ot.b,ot.c,it.a,it.d,it.g,it.c,et.v,et.o,et.h,st.d,st.h,et.c,rt.b,et.n,et.g,ct.a,s.n,lt.b,mt.a,s.p,pt.c,_.a,q.a,ve.a,ve.c,ct.c,ct.e,ct.d],styles:[".source[_ngcontent-%COMP%]{margin-bottom:12px;margin-left:-24px;margin-right:-24px}.result[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0 0 8px}.form-padding[_ngcontent-%COMP%]{padding-top:15px}.title[_ngcontent-%COMP%]{color:#fff}tr.mat-header-row[_ngcontent-%COMP%]{height:30px;background:#e0e0e0!important}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}fieldset[_ngcontent-%COMP%]{border-width:1px!important;border-color:#f5f5f5!important}.hide[_ngcontent-%COMP%]{display:none}legend[_ngcontent-%COMP%]{padding:5px}.copyright[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;color:#fff}"],data:{animation:[R.a,x.a,It.a]}}),Qe),ea=["autosize"];function aa(t,e){1&t&&(l.Ub(0,"th",13),l.Ub(1,"mat-checkbox",14),l.cc("click",function(t){return t.stopPropagation()}),l.Tb(),l.Tb())}function na(t,e){1&t&&(l.Ub(0,"td",15),l.Ub(1,"mat-checkbox",14),l.cc("click",function(t){return t.stopPropagation()}),l.Tb(),l.Tb())}function oa(t,e){if(1&t&&(l.Ub(0,"th",20),l.Rc(1),l.Tb()),2&t){var a=l.gc(2).$implicit;l.Cb(1),l.Tc(" ",a.name,"")}}function ia(t,e){if(1&t&&(l.Ub(0,"td",21),l.Rc(1),l.Tb()),2&t){var a=e.$implicit,n=l.gc(2).$implicit;l.Cb(1),l.Tc(" ",a[n.property]," ")}}function sa(t,e){if(1&t&&(l.Sb(0,17),l.Pc(1,oa,2,1,"th",18),l.Pc(2,ia,2,1,"td",19),l.Rb()),2&t){var a=l.gc().$implicit;l.nc("matColumnDef",a.property)}}function ra(t,e){if(1&t&&(l.Sb(0),l.Pc(1,sa,3,1,"ng-container",16),l.Rb()),2&t){var a=e.$implicit;l.Cb(1),l.nc("ngIf",a.isModelProperty)}}function ca(t,e){1&t&&l.Pb(0,"th",22)}function la(t,e){if(1&t){var a=l.Vb();l.Ub(0,"td",15),l.Ub(1,"button",23),l.cc("click",function(t){return t.stopPropagation()}),l.Ub(2,"mat-icon"),l.Rc(3,"more_vert"),l.Tb(),l.Tb(),l.Ub(4,"mat-menu",24,25),l.Ub(6,"button",26),l.cc("click",function(t){l.Ec(a);var n=e.$implicit;return l.gc().manageComplaint(n,t)}),l.Ub(7,"mat-icon"),l.Rc(8,"settings"),l.Tb(),l.Ub(9,"span"),l.Rc(10,"Manage"),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var n=l.Ac(5);l.Cb(1),l.nc("matMenuTriggerFor",n)}}function ma(t,e){1&t&&l.Pb(0,"tr",27)}function pa(t,e){1&t&&l.Pb(0,"tr",28)}var ua,ba,da,fa=function(){return["Complaints"]},ga=[{path:"find",component:tt,canActivate:[Pt.a],data:{roles:["view.complaint","find.complaint"],action:"FIND"}},{path:"pending-tasks",component:(ua=function(t){a(i,t);var n=o(i);function i(t,e,a,o,s,c,m,p){var u;return r(this,i),(u=n.call(this,a,s,c,m)).dialog=t,u.route=e,u.authService=a,u.router=o,u._workflowService=s,u.registrationService=c,u.complaintService=m,u.routingService=p,u.subject$=new y.a(1),u.data$=u.subject$.asObservable(),u.$processingEvent=new l.o,u.$errorsEvent=new l.o,u.$resultComplaintsEvent=new l.o,u.statusList=[],u.pageIndex=u.routingService.complaintsTablePageIndex,u.pageSize=10,u.subscriptions=[],u.statuses=[{code:"001",description:"Form 9"},{code:"002",description:"FORM 6"},{code:"003",description:"FORM 11"}],u.columns=[{name:"Complaint Tracking Number",property:"ComplaintTrackingNo",visible:!0,isModelProperty:!0},{name:"Complaint Source",property:"ComplaintSourceName",visible:!0,isModelProperty:!0},{name:"Type of Complaint",property:"FormName",visible:!0,isModelProperty:!0},{name:"Email Address",property:"EmailAddress",visible:!0,isModelProperty:!0},{name:"First Name",property:"FirstName",visible:!0,isModelProperty:!0},{name:"Last Name",property:"LastName",visible:!0,isModelProperty:!0},{name:"Phone Number",property:"PhoneNumber",visible:!0,isModelProperty:!0},{name:"Have Complained to Organisation?",property:"HaveComplainedToOrganisationAlready",visible:!0,isModelProperty:!0},{name:"Organisation Complained To",property:"OrganisationComplainedToName",visible:!0,isModelProperty:!0},{name:"Complaint Timeline",property:"Status",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],u.dataSource=new C.o,u}return e(i,[{key:"getData",value:function(){return Object(U.a)(d.map(function(t){return new p(t)}))}},{key:"ngOnInit",value:function(){console.log(this.authService.getKeycloakInstance()),this.realmRole=this.authService.getKeycloakInstance().realmAccess.roles[0],console.log(this.realmRole),console.log(this.pageIndex),this.dataSource.paginator=this.paginator,this.getComplaints(),console.log(this.getComplaints),this.route.paramMap.subscribe(function(t){console.log(t.has("navigationPrams"))}),this.statusList=this.getGenericDDL(this.statuses,{key:"code",label:"description"},!1),this.defineSearchFields()}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.paginator.pageIndex=t.pageIndex,t.subscriptions.$resultComplaintsEvent=t.$resultComplaintsEvent.subscribe(function(e){e?(t.complaints=e,t.dataSource.data=e,t.isLoaded=!0):console.log("expected")})},0)}},{key:"onFilterChange",value:function(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}},{key:"ngOnDestroy",value:function(){}},{key:"defineSearchFields",value:function(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:h.e,dataType:h.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:h.e,dataType:h.a.TEXT},{label:"Form Types",fieldName:"Form",operators:h.d,dataType:h.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:h.e,dataType:h.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:h.e,dataType:h.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:h.c,dataType:h.a.DATETIME}]}},{key:"getComplaints",value:function(){this.complaintService.getComplaintPendingTasks(this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent,this.realmRole)}},{key:"viewComplaint",value:function(t){this.router.navigate(["/complaints/view-complaint"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo}}).then()}},{key:"manageComplaint",value:function(t){this.routingService.complaintsTablePageIndex=this.pageIndex,this.router.navigate(["/complaints/complaints-edit"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo,ComplaintSourceID:t.ComplaintSourceID}}).then()}},{key:"onPaginateChange",value:function(t){this.pageIndex=t.pageIndex,console.log(this.pageIndex)}},{key:"visibleColumns",get:function(){return this.columns.filter(function(t){return t.visible}).map(function(t){return t.property})}}]),i}(O.a),ua.\u0275fac=function(t){return new(t||ua)(l.Ob(k.b),l.Ob(c.a),l.Ob(F.c),l.Ob(c.f),l.Ob(I.a),l.Ob(w.a),l.Ob(P.a),l.Ob(D.a))},ua.\u0275cmp=l.Ib({type:ua,selectors:[["fury-complaint-pending-tasks"]],viewQuery:function(t,e){var a;1&t&&(l.Kc(T.a,!0),l.Kc(v.a,!0),l.Vc(ea,!0)),2&t&&(l.zc(a=l.dc())&&(e.paginator=a.first),l.zc(a=l.dc())&&(e.sort=a.first),l.zc(a=l.dc())&&(e.autosize=a.first))},inputs:{columns:"columns"},features:[l.zb],decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Complaints","finderDialogTitle","Complaints Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","page"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(l.Ub(0,"fury-page-layout",0),l.Ub(1,"fury-page-layout-header"),l.Pb(2,"fury-breadcrumbs",1),l.Tb(),l.Ub(3,"fury-page-layout-content"),l.Ub(4,"fury-list",2),l.cc("filterChange",function(t){return e.onFilterChange(t)}),l.Ub(5,"table",3),l.Sb(6,4),l.Pc(7,aa,2,0,"th",5),l.Pc(8,na,2,0,"td",6),l.Rb(),l.Pc(9,ra,2,1,"ng-container",7),l.Sb(10,8),l.Pc(11,ca,1,0,"th",9),l.Pc(12,la,11,1,"td",6),l.Rb(),l.Pc(13,ma,1,0,"tr",10),l.Pc(14,pa,1,0,"tr",11),l.Tb(),l.Ub(15,"mat-paginator",12),l.cc("page",function(t){return e.onPaginateChange(t)}),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(2),l.nc("@fadeInRight",void 0)("crumbs",l.qc(10,fa)),l.Cb(1),l.nc("@fadeInUp",void 0),l.Cb(1),l.nc("columns",e.columns)("searchFields",e.searchFields),l.Cb(1),l.nc("dataSource",e.dataSource),l.Cb(4),l.nc("ngForOf",e.columns),l.Cb(4),l.nc("matHeaderRowDef",e.visibleColumns),l.Cb(1),l.nc("matRowDefColumns",e.visibleColumns),l.Cb(1),l.nc("pageSize",e.pageSize))},directives:[S.a,N.a,E.a,A.a,M.a,C.n,v.a,C.c,C.i,C.b,s.n,C.k,C.m,T.a,C.h,L.a,C.a,s.o,v.b,_.a,j.e,q.a,j.a,j.c,c.h,C.j,C.l],styles:[""],data:{animation:[R.a,x.a]}}),ua),canActivate:[Pt.a],data:{roles:["view.complaint","find.complaint"],action:"FIND"}},{path:"view-complaint",component:Ot,canActivate:[Pt.a],data:{roles:["view.complaint"],action:"VIEW"}},{path:"complaints-edit",component:ta,canActivate:[Pt.a],data:{roles:["view.complaint"],action:"VIEW"}}],ha=((ba=function t(){r(this,t)}).\u0275mod=l.Mb({type:ba}),ba.\u0275inj=l.Lb({factory:function(t){return new(t||ba)},imports:[[c.j.forChild(ga)],c.j]}),ba),Ca=i("q8Jb"),Ta=i("WCGO"),va=i("0jmt"),ya=i("6BeY"),Ua=i("KthW"),Ra=i("AyUp"),xa=i("QMK6"),Oa=i("VE2z"),Pa=i("hVPj"),Ia=i("VCcF"),wa=((da=function t(){r(this,t)}).\u0275mod=l.Mb({type:da}),da.\u0275inj=l.Lb({factory:function(t){return new(t||da)},imports:[[C.p,s.c,ha,Ua.a,Ta.a,Ra.a,et.s,Ia.a,ct.b,va.a,Pa.a,xa.a,Oa.a,ya.a,Ca.a]]}),da)}}])}();