(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{QKnv:function(t,e,a){"use strict";a.r(e),a.d(e,"ComplaintsModule",function(){return ma});var i=a("ofXK"),o=a("tyNb"),n=a("fXoL");class s{}class r{constructor(t){this.ComplaintID=t.ComplaintID,this.ComplaintSourceID=t.ComplaintSourceID,this.ComplaintTrackingNo=t.ComplaintTrackingNumber,this.ComplaintSourceName=t.ComplaintSourceName,this.EmailAddress=t.EmailAdress,this.FormName=t.FormName,this.FirstName=t.FirstName,this.FormID=t.FormID,this.FullDetailsOfComplaint=t.FullDetailsOfComplaint,this.HaveComplainedToOrganisationAlready=t.HaveComplainedToOrganisationAlready,this.LastName=t.LastName,this.OrganisationComplainedTo=t.OrganisationComplainedTo,this.OtherOrganisationComplainedTo=t.OtherOrganisationComplainedTo,this.PhoneNumber=t.PhoneNumber,this.PhysicalAddress=t.PhysicalAddress,this.ReasonsForComplaint=t.ReasonForTheComplaint,this.RemedialActions=t.RemedialActions,this.PersonalDataAffected=t.PersonalDataAffected,this.comments=t.comments}}var c=function(t){return t.NATIONALITY="Nationality",t.AGE="Age / Date of Birth",t.MARITAL_STATUS="Marital Status",t.EDUCATION="Education Level",t.IDENTIFICATION="Identification Number e.g NIN, TIN, Driving Permit Number",t.IDENTITY_DATA="Identity Data",t.PHILOSPHICAL_BELIEFS="Philosophical Beliefs",t.POLITICAL_OPINION="Political Opinion",t.SEXUAL_LIFE="Sexual Life",t.FINANCIAL_INFORMATION="Financial Information",t.MEDICAL="Medical Records",t}({});const l={id:1,regNo:"C202100001",personalDataAffected:[c.NATIONALITY,c.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},m=[{id:1,regNo:"C202100001",addressedTo:"Uganda Revenue Authority",personalDataAffected:[c.NATIONALITY,c.AGE],status:"Submitted",reasonForTheComplaint:"Processing personal data without appropriate security measures",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Munyagwa Enock",phone:"0792310084",email:"enmunyagwa@gmail.com"}},{id:1,regNo:"C202100003",addressedTo:"Airtel Uganda",personalDataAffected:[c.NATIONALITY,c.AGE],status:"Submitted",reasonForTheComplaint:"Infringement / Violation of Act",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"jkalungi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"John Kalungi",phone:"0792310084",email:"jkalungi@gmail.com"}},{id:1,regNo:"C202100004",addressedTo:"Airtel Uganda",personalDataAffected:[c.NATIONALITY,c.AGE],status:"Submitted",reasonForTheComplaint:"Inaccurate personal data in the possession of data controllers",complaintDetails:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors.",remedialAction:"Write to or notify the third parties with whom the data has been shared.",comments:[{instanceId:23,username:"enmunyagwa",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry'sd  Lorem Ipsum has been the industry"},{instanceId:23,username:"mkajubi",creationDate:"23-02-2021 18:20:20",comment:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry Lorem Ipsum has been the industry"}],lastModificationDate:"23-02-2021 18:20:20",dataSubject:{id:28372,name:"Isaac Akileng",phone:"0792310084",email:"iakileng@gmail.com"}}],p=[{personalDataAffected:[{dataCategory:{id:"3",name:"Biometric Information",subCategories:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}]},dataSubCategory:[]},{dataCategory:{id:"3",name:"Biometric Information",subCategories:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}]},dataSubCategory:[]}]}],b={id:"DAB/16/10/21/4651",incidentDate:"2021-02-02T21:00:00.000Z",howIncidentHappened:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",delayInReporting:!0,reasonForDelay:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",measuresInPlace:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",status:"SUBMITTED",policies:[{id:1,policy:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",explanation:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",implementationDate:"2021-02-02T21:00:00.000Z"}],personalDataAffected:[{dataCategory:{id:"3",name:"Biometric Information",subCategories:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}]},dataSubCategory:[{id:"1",value:"Genetic"},{id:"2",value:"Physiological."},{id:"3",value:"Behavioural."},{id:"4",value:"Biological characteristics."}],toWhatExtent:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",affectedIndividuals:"5",recordsInvolved:"5",individualAwareness:!0,individualComplain:!0},{dataCategory:{id:"3",name:"Individual Commercial Information",subCategories:[{id:"1",value:"Records of personal propert"},{id:"2",value:"Purchasing habits."}]},dataSubCategory:[{id:"1",value:"Records of personal propert"},{id:"2",value:"Purchasing habits."}],toWhatExtent:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",affectedIndividuals:"5",recordsInvolved:"5",individualAwareness:!0,individualComplain:!0}],containmentAndRecovery:{actionTaken:!0,detailsOfActionTaken:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",hasDataBeenRecovered:!0,detailsOfRecovery:"Lorem Ipsum is simply dummy text of the printing and typesetting industry",dateOfRecovery:"2021-02-02T21:00:00.000Z",preventionSteps:"Lorem Ipsum is simply dummy text of the printing and typesetting industry"},miscellaneous:{medialCoverageOfIncident:!0,regulatoryBodiesNotified:!0},registrationDate:"2021-02-02T21:00:00.000Z",impactOfBreach:[{id:"1",rating:"1",impact:"Affected Data subject will be required to submit information afresh or fill forms again"},{id:"2",rating:"1",impact:"Affected Data subject may receive unsolicited email as a result of the breach"}],potentialConsequences:[{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"A paper file or equipment is lost or stolen."},{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"Paper or equipment left accessible in an unsecured location.  "},{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"Mail lost or opened before being returned to sender.    "},{id:"1",potentialConsquence:"Loss of Confidentiality",additional:"Hacking, malware (e.g. ransomware) and/ or phishing.    "}],controls:[],causes:[{cause:"Malicious internal act",code:"CA9238",id:"5"},{cause:"Accidental internal act",code:"C2333",id:"2"}],reportedBy:"enockm15",companyReporting:"MTN Uganda",assignedTo:"angella",lastModifiedDate:"2021-02-02T21:00:00.000Z"};var d=a("pbD1"),u=a("+0xr"),g=a("M9IT"),h=a("Dh3D"),f=a("jtHE"),C=a("LRne"),T=a("Ku73"),y=a("nStZ"),v=a("M2Gj"),U=a("aYi0"),R=a("3eU1"),x=a("j7tn"),O=a("sFxA"),I=a("0IaG"),P=a("aTx8"),w=a("xBcV"),D=a("Hbgg"),F=a("rnAf"),S=a("rvYj"),N=a("a+RD"),k=a("bSwM"),E=a("bTqV"),A=a("STbY"),M=a("NFeN");const L=["autosize"];function _(t,e){1&t&&(n.Ub(0,"th",13),n.Ub(1,"mat-checkbox",14),n.cc("click",function(t){return t.stopPropagation()}),n.Tb(),n.Tb())}function j(t,e){1&t&&(n.Ub(0,"td",15),n.Ub(1,"mat-checkbox",14),n.cc("click",function(t){return t.stopPropagation()}),n.Tb(),n.Tb())}function q(t,e){if(1&t&&(n.Ub(0,"th",20),n.Rc(1),n.Tb()),2&t){const t=n.gc(2).$implicit;n.Cb(1),n.Tc(" ",t.name,"")}}function z(t,e){if(1&t&&(n.Ub(0,"td",21),n.Rc(1),n.Tb()),2&t){const t=e.$implicit,a=n.gc(2).$implicit;n.Cb(1),n.Tc(" ",t[a.property]," ")}}function $(t,e){if(1&t&&(n.Sb(0,17),n.Pc(1,q,2,1,"th",18),n.Pc(2,z,2,1,"td",19),n.Rb()),2&t){const t=n.gc().$implicit;n.nc("matColumnDef",t.property)}}function G(t,e){if(1&t&&(n.Sb(0),n.Pc(1,$,3,1,"ng-container",16),n.Rb()),2&t){const t=e.$implicit;n.Cb(1),n.nc("ngIf",t.isModelProperty)}}function V(t,e){1&t&&n.Pb(0,"th",22)}function B(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",15),n.Ub(1,"button",23),n.cc("click",function(t){return t.stopPropagation()}),n.Ub(2,"mat-icon"),n.Rc(3,"more_vert"),n.Tb(),n.Tb(),n.Ub(4,"mat-menu",24,25),n.Ub(6,"button",26),n.cc("click",function(a){n.Ec(t);const i=e.$implicit;return n.gc().manageComplaint(i,a)}),n.Ub(7,"mat-icon"),n.Rc(8,"settings"),n.Tb(),n.Ub(9,"span"),n.Rc(10,"Manage"),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.Ac(5);n.Cb(1),n.nc("matMenuTriggerFor",t)}}function W(t,e){1&t&&n.Pb(0,"tr",27)}function H(t,e){1&t&&n.Pb(0,"tr",28)}const K=function(){return["Complaints"]};let X=(()=>{class t extends v.a{constructor(t,e,a,i,o,s,r,c){super(a,o,s,r),this.dialog=t,this.route=e,this.authService=a,this.router=i,this._workflowService=o,this.registrationService=s,this.complaintService=r,this.routingService=c,this.subject$=new f.a(1),this.data$=this.subject$.asObservable(),this.$processingEvent=new n.o,this.$errorsEvent=new n.o,this.$resultComplaintsEvent=new n.o,this.statusList=[],this.pageIndex=this.routingService.complaintsTablePageIndex,this.pageSize=10,this.subscriptions=[],this.statuses=[{code:"001",description:"Form 9"},{code:"002",description:"FORM 6"},{code:"003",description:"FORM 11"}],this.columns=[{name:"Complaint Tracking Number",property:"ComplaintTrackingNo",visible:!0,isModelProperty:!0},{name:"Complaint Source",property:"ComplaintSourceName",visible:!0,isModelProperty:!0},{name:"Type of Complaint",property:"FormName",visible:!0,isModelProperty:!0},{name:"Email Address",property:"EmailAddress",visible:!0,isModelProperty:!0},{name:"First Name",property:"FirstName",visible:!0,isModelProperty:!0},{name:"Last Name",property:"LastName",visible:!0,isModelProperty:!0},{name:"Phone Number",property:"PhoneNumber",visible:!0,isModelProperty:!0},{name:"Have Complained to Organisation?",property:"HaveComplainedToOrganisationAlready",visible:!0,isModelProperty:!0},{name:"Organisation Complained To",property:"OrganisationComplainedToName",visible:!0,isModelProperty:!0},{name:"Complaint Timeline",property:"Status",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.dataSource=new u.o}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){return Object(C.a)(m.map(t=>new r(t)))}ngOnInit(){console.log(this.pageIndex),this.dataSource.paginator=this.paginator,this.getComplaints(),console.log(this.getComplaints),this.route.paramMap.subscribe(t=>{console.log(t.has("navigationPrams"))}),this.statusList=this.getGenericDDL(this.statuses,{key:"code",label:"description"},!1),this.defineSearchFields()}ngAfterViewInit(){setTimeout(()=>{this.paginator.pageIndex=this.pageIndex,this.subscriptions.$resultComplaintsEvent=this.$resultComplaintsEvent.subscribe(t=>{t?(this.complaints=t,this.dataSource.data=t,this.isLoaded=!0):console.log("expected")})},0)}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}defineSearchFields(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:d.e,dataType:d.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:d.e,dataType:d.a.TEXT},{label:"Form Types",fieldName:"Form",operators:d.d,dataType:d.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:d.e,dataType:d.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:d.e,dataType:d.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:d.c,dataType:d.a.DATETIME}]}getComplaints(){this.complaintService.getComplaints(this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent)}viewComplaint(t){this.router.navigate(["/complaints/view-complaint"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo}}).then()}manageComplaint(t){this.routingService.complaintsTablePageIndex=this.pageIndex,this.router.navigate(["/complaints/complaints-edit"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo,ComplaintSourceID:t.ComplaintSourceID}}).then()}onPaginateChange(t){this.pageIndex=t.pageIndex,console.log(this.pageIndex)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.b),n.Ob(o.a),n.Ob(P.c),n.Ob(o.f),n.Ob(R.a),n.Ob(x.a),n.Ob(U.a),n.Ob(O.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-complaints-find"]],viewQuery:function(t,e){if(1&t&&(n.Kc(g.a,!0),n.Kc(h.a,!0),n.Vc(L,!0)),2&t){let t;n.zc(t=n.dc())&&(e.paginator=t.first),n.zc(t=n.dc())&&(e.sort=t.first),n.zc(t=n.dc())&&(e.autosize=t.first)}},inputs:{columns:"columns"},features:[n.zb],decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Complaints","finderDialogTitle","Complaints Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","page"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(n.Ub(0,"fury-page-layout",0),n.Ub(1,"fury-page-layout-header"),n.Pb(2,"fury-breadcrumbs",1),n.Tb(),n.Ub(3,"fury-page-layout-content"),n.Ub(4,"fury-list",2),n.cc("filterChange",function(t){return e.onFilterChange(t)}),n.Ub(5,"table",3),n.Sb(6,4),n.Pc(7,_,2,0,"th",5),n.Pc(8,j,2,0,"td",6),n.Rb(),n.Pc(9,G,2,1,"ng-container",7),n.Sb(10,8),n.Pc(11,V,1,0,"th",9),n.Pc(12,B,11,1,"td",6),n.Rb(),n.Pc(13,W,1,0,"tr",10),n.Pc(14,H,1,0,"tr",11),n.Tb(),n.Ub(15,"mat-paginator",12),n.cc("page",function(t){return e.onPaginateChange(t)}),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(2),n.nc("@fadeInRight",void 0)("crumbs",n.qc(10,K)),n.Cb(1),n.nc("@fadeInUp",void 0),n.Cb(1),n.nc("columns",e.columns)("searchFields",e.searchFields),n.Cb(1),n.nc("dataSource",e.dataSource),n.Cb(4),n.nc("ngForOf",e.columns),n.Cb(4),n.nc("matHeaderRowDef",e.visibleColumns),n.Cb(1),n.nc("matRowDefColumns",e.visibleColumns),n.Cb(1),n.nc("pageSize",e.pageSize))},directives:[w.a,D.a,F.a,S.a,N.a,u.n,h.a,u.c,u.i,u.b,i.n,u.k,u.m,g.a,u.h,k.a,u.a,i.o,h.b,E.a,A.e,M.a,A.a,A.c,o.h,u.j,u.l],styles:[""],data:{animation:[T.a,y.a]}}),t})();var Y=a("3Pt+"),J=a("r9HN"),Q=a("2ChS"),Z=a("XiUz"),tt=a("4FRi"),et=a("kmnG"),at=a("qFsG"),it=a("zkoq"),ot=a("ihCf"),nt=a("Qu3c"),st=a("znSr");const rt=["autosize"];function ct(t,e){1&t&&(n.Ub(0,"mat-form-field",8),n.Ub(1,"mat-label"),n.Rc(2,"Organisation Complained From"),n.Tb(),n.Pb(3,"input",31),n.Tb())}function lt(t,e){1&t&&(n.Ub(0,"mat-form-field",8),n.Ub(1,"mat-label"),n.Rc(2,"Other Organisation"),n.Tb(),n.Pb(3,"input",32),n.Tb())}function mt(t,e){1&t&&(n.Ub(0,"mat-form-field",8),n.Ub(1,"mat-label"),n.Rc(2,"Other Organisation Complained To"),n.Tb(),n.Pb(3,"input",33),n.Tb())}function pt(t,e){if(1&t&&(n.Ub(0,"mat-grid-tile"),n.Rc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Tc(" ",t.DataSubCategoryName," ")}}function bt(t,e){if(1&t&&(n.Ub(0,"mat-grid-tile"),n.Rc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Tc(" ",t.ComplaintReasonName," ")}}function dt(t,e){if(1&t&&(n.Ub(0,"span"),n.Rc(1),n.Tb()),2&t){const t=n.gc();n.Cb(1),n.Tc(" - ",t.document.Size," Mbs")}}function ut(t,e){1&t&&(n.Ub(0,"p",34),n.Rc(1,"No document found. Please attach"),n.Tb())}function gt(t,e){if(1&t&&(n.Ub(0,"span"),n.Rc(1),n.Tb()),2&t){const t=n.gc();n.Cb(1),n.Tc(" - ",t.document.Size," Mbs")}}function ht(t,e){1&t&&(n.Ub(0,"p",34),n.Rc(1,"No document found. Please attach"),n.Tb())}const ft=function(){return["Complaints"]},Ct=function(){return{width:"100px",height:"100px"}};let Tt=(()=>{class t extends v.a{constructor(t,e,a,i,o,r,c,l){super(o,r,c,l),this.formBuilder=t,this.activateRoute=e,this.route=a,this.bottomsheet=i,this.authService=o,this._workflowService=r,this.registrationService=c,this.complaintService=l,this.subject$=new f.a(1),this.data$=this.subject$.asObservable(),this.$processingEvent=new n.o,this.$errorsEvent=new n.o,this.$resultComplaintsEvent=new n.o,this.subscriptions=[],this.application=new s,this.personalData=[],this.complaintReasons=[],this.list=[],this.displayColumns=["nber","impact","actions"],this.resolutionComments=[],this._gap=16,this.gap=this._gap+"px",this.col2=`1 1 calc(50% - ${this._gap/2}px)`,this.col3=`1 1 calc(33.3333% - ${this._gap/1.5}px)`,this.operationType=e.routeConfig.data.action,this.ComplaintTrackingNumber=this.route.getCurrentNavigation().extras.state.ComplaintTrackingNumber,console.log(this.ComplaintTrackingNumber),console.log(this.operationType),"EDIT"===this.operationType?(this.isEditMode=!0,this.application.comments=[]):"CREATE"===this.operationType?(this.isEditMode=!1,this.application.comments=[]):"VIEW"===this.operationType&&(this.isEditMode=!1,this.isViewOnly=!0)}ngOnInit(){this.initForm(),this.getComplaint(),this.subscriptions.$resultComplaintsEvent=this.$resultComplaintsEvent.subscribe(t=>{t&&(this.application=t,console.log(this.application),this.mapFields())}),this.disableFieldsByStatus(),this.isViewOnly&&this.disableAllControls()}mapFields(){this.isApplicationValid=!0,this.personalData=this.application.PersonalDataAffected,this.complaintReasons=this.application.ReasonsForComplaint,console.log(this.application.EvidenceOfComplaint),this.document={Document:null,Name:"Complaint Evidence.pdf",Size:null,Base64:this.application.EvidenceOfComplaint},console.log(this.document),this.complaintForm.get("reasonForTheComplaint").setValue(this.application.ReasonsForComplaint),this.complaintForm.get("complaintDetails").setValue(this.application.FullDetailsOfComplaint),this.complaintForm.get("remedialActions").setValue(this.application.RemedialActions),this.complaintForm.get("lastModificationDate").setValue(this.application.FirstName),this.complaintForm.get("dataSubjectName").setValue(this.application.FirstName+" "+this.application.LastName),this.complaintForm.get("dataSubjectPhone").setValue(this.application.PhoneNumber),this.complaintForm.get("dataSubjectEmail").setValue(this.application.EmailAddress),this.complaintForm.get("ComplaintCategory").setValue(this.application.ComplainerCategory),this.complaintForm.get("OrganisationComplainedTo").setValue(this.application.OrganisationComplainedToName),this.complaintForm.get("ContactFirstName").setValue(this.application.ContactPersonFirstName),this.complaintForm.get("ContactLastName").setValue(this.application.ContactPersonLastName),this.complaintForm.get("ContactEmailAddress").setValue(this.application.ContactPersonEmailAddress)}initForm(){this.complaintForm=this.formBuilder.group({personalDataAffected:["",Y.u.compose([Y.u.required])],reasonForTheComplaint:["",Y.u.compose([Y.u.required])],complaintDetails:["",Y.u.compose([Y.u.required])],remedialActions:["",Y.u.compose([Y.u.required])],dataSubjectName:["",Y.u.compose([Y.u.required])],dataSubjectPhone:["",Y.u.compose([Y.u.required])],dataSubjectEmail:["",Y.u.compose([Y.u.required])],ContactFirstName:["",Y.u.compose([Y.u.required])],ContactLastName:["",Y.u.compose([Y.u.required])],ContactEmailAddress:["",Y.u.compose([Y.u.required])],OrganisationComplainedTo:["",Y.u.compose([Y.u.required])],OtherOrganisationComplainedTo:["",Y.u.compose([Y.u.required])],ComplaintCategory:["",Y.u.compose([Y.u.required])],OrganisationComplainedFrom:["",Y.u.compose([Y.u.required])],OtherOrganisationComplainedFrom:["",Y.u.compose([Y.u.required])],lastModificationDate:[]})}onReadDocument(){this.bottomsheetRef=this.bottomsheet.open(J.a,{disableClose:!0,panelClass:["view-pdf-document-bottomsheet","bottomsheets"],data:{url:this.document.Base64,title:this.document.Name}})}disableFieldsByStatus(){this.application&&"NEW"!==this.application.status&&"STORED"!==this.application.status&&"ISSUED"===this.application.status&&this.disableAllControls()}disableAllControls(){this.complaintForm.disable()}onCommentChange(t){t&&(this.application.comments=t)}formTriggler(t){switch(t){case"EDIT":case"CREATE":break;case"VIEW":this.isViewOnly=!0}}getComplaint(){this.complaintService.getComplaint(this.ComplaintTrackingNumber,this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent)}get getSampleJson(){return Object(C.a)(l)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(Y.d),n.Ob(o.a),n.Ob(o.f),n.Ob(Q.b),n.Ob(P.c),n.Ob(R.a),n.Ob(x.a),n.Ob(U.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-view-complaint"]],viewQuery:function(t,e){if(1&t&&n.Vc(rt,!0),2&t){let t;n.zc(t=n.dc())&&(e.autosize=t.first)}},features:[n.zb],decls:140,vars:25,consts:[["mode","card"],["current","View",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 1 auto"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],["formControlName","ComplaintCategory","matInput",""],["fxFlex","2 1 auto",4,"ngIf"],["formControlName","OrganisationComplainedTo","matInput",""],["formControlName","ContactFirstName","matInput",""],["formControlName","ContactLastName","matInput",""],["formControlName","ContactEmailAddress","matInput",""],["cols","4","rowHeight","4rem"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","2 1 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","complaintDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/img/pdf.png","alt","",3,"ngStyle"],[4,"ngIf"],["class","no-document-found",4,"ngIf"],["formControlName","TechnicalForwardedComments","matInput",""],["formControlName","LegalForwardedComments","matInput",""],["formControlName","MoreInformationRequired","matInput",""],["formControlName","OrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedTo","matInput",""],[1,"no-document-found"]],template:function(t,e){1&t&&(n.Ub(0,"fury-page-layout",0),n.Ub(1,"fury-page-layout-header"),n.Pb(2,"fury-breadcrumbs",1),n.Tb(),n.Ub(3,"fury-page-layout-content",2),n.Ub(4,"div",3),n.Ub(5,"fury-card",4),n.Ub(6,"fury-card-header"),n.Ub(7,"fury-card-header-heading"),n.Rc(8,"Complaint Information"),n.Tb(),n.Tb(),n.Ub(9,"fury-card-content",5),n.Ub(10,"form",6),n.Ub(11,"fieldset"),n.Ub(12,"legend"),n.Rc(13,"Data Subject Details"),n.Tb(),n.Ub(14,"div",7),n.Ub(15,"mat-form-field",8),n.Ub(16,"mat-label"),n.Rc(17,"Data subject name"),n.Tb(),n.Pb(18,"input",9),n.Tb(),n.Ub(19,"mat-form-field",8),n.Ub(20,"mat-label"),n.Rc(21,"Data Subject Email"),n.Tb(),n.Pb(22,"input",10),n.Tb(),n.Ub(23,"mat-form-field",8),n.Ub(24,"mat-label"),n.Rc(25,"Data Subject Phone"),n.Tb(),n.Pb(26,"input",11),n.Tb(),n.Tb(),n.Tb(),n.Ub(27,"fieldset"),n.Ub(28,"legend"),n.Rc(29,"Data Subject Organisation"),n.Tb(),n.Ub(30,"div",7),n.Ub(31,"mat-form-field",8),n.Ub(32,"mat-label"),n.Rc(33,"Who are you complaining as"),n.Tb(),n.Pb(34,"input",12),n.Tb(),n.Pc(35,ct,4,0,"mat-form-field",13),n.Pc(36,lt,4,0,"mat-form-field",13),n.Tb(),n.Tb(),n.Ub(37,"fieldset"),n.Ub(38,"legend"),n.Rc(39,"Details Organisation complained To"),n.Tb(),n.Ub(40,"div",7),n.Ub(41,"mat-form-field",8),n.Ub(42,"mat-label"),n.Rc(43,"Organisation Complained To"),n.Tb(),n.Pb(44,"input",14),n.Tb(),n.Pc(45,mt,4,0,"mat-form-field",13),n.Tb(),n.Tb(),n.Ub(46,"fieldset"),n.Ub(47,"legend"),n.Rc(48,"Organisation Contact Person Details"),n.Tb(),n.Ub(49,"div",7),n.Ub(50,"mat-form-field",8),n.Ub(51,"mat-label"),n.Rc(52,"Contact First Name"),n.Tb(),n.Pb(53,"input",15),n.Tb(),n.Ub(54,"mat-form-field",8),n.Ub(55,"mat-label"),n.Rc(56,"Contact Last Name"),n.Tb(),n.Pb(57,"input",16),n.Tb(),n.Ub(58,"mat-form-field",8),n.Ub(59,"mat-label"),n.Rc(60,"Contact Email"),n.Tb(),n.Pb(61,"input",17),n.Tb(),n.Tb(),n.Tb(),n.Ub(62,"fieldset"),n.Ub(63,"legend"),n.Rc(64,"Complaint in Brief"),n.Tb(),n.Ub(65,"mat-label"),n.Rc(66,"Personal Data Affected"),n.Tb(),n.Ub(67,"mat-grid-list",18),n.Pc(68,pt,2,1,"mat-grid-tile",19),n.Tb(),n.Tb(),n.Ub(69,"fieldset"),n.Ub(70,"legend"),n.Rc(71,"General Complaint Info"),n.Tb(),n.Ub(72,"div",20),n.Ub(73,"fieldset"),n.Ub(74,"legend"),n.Rc(75,"Complaint Reasons"),n.Tb(),n.Ub(76,"mat-label"),n.Rc(77,"Reasons for complaints"),n.Tb(),n.Ub(78,"mat-grid-list",18),n.Pc(79,bt,2,1,"mat-grid-tile",19),n.Tb(),n.Tb(),n.Ub(80,"div",7),n.Ub(81,"mat-form-field",21),n.Ub(82,"mat-label"),n.Rc(83,"Complaint Details"),n.Tb(),n.Pb(84,"textarea",22,23),n.Tb(),n.Tb(),n.Tb(),n.Ub(86,"fieldset"),n.Ub(87,"legend"),n.Rc(88,"Evidence Of Complaint"),n.Tb(),n.Ub(89,"div",24),n.cc("click",function(){return e.onReadDocument()}),n.Pb(90,"img",25),n.Ub(91,"span"),n.Rc(92),n.Pc(93,dt,2,1,"span",26),n.Tb(),n.Tb(),n.Pc(94,ut,2,0,"p",27),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(95,"fieldset"),n.Ub(96,"legend"),n.Rc(97,"Comments"),n.Tb(),n.Ub(98,"div",20),n.Ub(99,"fieldset"),n.Ub(100,"legend"),n.Rc(101,"Forwarded Comments"),n.Tb(),n.Ub(102,"div"),n.Ub(103,"div"),n.Ub(104,"mat-form-field",8),n.Ub(105,"mat-label"),n.Rc(106,"Technical Comments"),n.Tb(),n.Pb(107,"input",28),n.Tb(),n.Tb(),n.Ub(108,"div"),n.Ub(109,"mat-form-field",8),n.Ub(110,"mat-label"),n.Rc(111,"Legal Comments"),n.Tb(),n.Pb(112,"input",29),n.Tb(),n.Tb(),n.Ub(113,"div"),n.Ub(114,"mat-form-field",8),n.Ub(115,"mat-label"),n.Rc(116,"More Information Required"),n.Tb(),n.Pb(117,"input",30),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(118,"fieldset"),n.Ub(119,"legend"),n.Rc(120,"Investigation Comments"),n.Tb(),n.Ub(121,"textarea",22,23),n.Rc(123),n.Tb(),n.Tb(),n.Ub(124,"fieldset"),n.Ub(125,"legend"),n.Rc(126,"Resolution Comments"),n.Tb(),n.Ub(127,"textarea",22,23),n.Rc(129),n.Tb(),n.Ub(130,"div"),n.Ub(131,"fieldset"),n.Ub(132,"legend"),n.Rc(133,"Resolution Document"),n.Tb(),n.Ub(134,"div",24),n.cc("click",function(){return e.onReadDocument()}),n.Pb(135,"img",25),n.Ub(136,"span"),n.Rc(137),n.Pc(138,gt,2,1,"span",26),n.Tb(),n.Tb(),n.Pc(139,ht,2,0,"p",27),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(2),n.nc("@fadeInRight",void 0)("crumbs",n.qc(22,ft)),n.Cb(1),n.nc("fxLayoutGap",e.gap),n.Cb(1),n.nc("fxLayoutGap",e.gap),n.Cb(1),n.nc("fxFlex.gt-sm",e.col2)("@fadeInUp",void 0),n.Cb(5),n.nc("formGroup",e.complaintForm),n.Cb(25),n.nc("ngIf","individual"===e.application.ComplainerCategory),n.Cb(1),n.nc("ngIf","individual"===e.application.ComplainerCategory),n.Cb(9),n.nc("ngIf",null==e.application.OrganisationComplainedTo),n.Cb(23),n.nc("ngForOf",e.personalData),n.Cb(11),n.nc("ngForOf",e.complaintReasons),n.Cb(11),n.nc("ngStyle",n.qc(23,Ct)),n.Cb(2),n.Tc("Document: ",e.document.Name," "),n.Cb(1),n.nc("ngIf",e.document.Size),n.Cb(1),n.nc("ngIf",e.document&&!e.document.Base64),n.Cb(29),n.Sc(e.application.InvestigationComments),n.Cb(6),n.Sc(e.application.ResolutionComments),n.Cb(6),n.nc("ngStyle",n.qc(24,Ct)),n.Cb(2),n.Tc("Document: ",e.document.Name," "),n.Cb(1),n.nc("ngIf",e.document.Size),n.Cb(1),n.nc("ngIf",e.document&&!e.document.Base64))},directives:[w.a,D.a,F.a,S.a,Z.d,Z.e,Z.b,Z.c,tt.a,tt.d,tt.g,tt.c,Y.v,Y.o,Y.h,et.d,et.h,Y.c,at.b,Y.n,Y.g,i.o,it.a,i.n,ot.b,nt.a,i.p,st.c,it.c],styles:[""],data:{animation:[T.a,y.a]}}),t})();var yt=a("sF9m"),vt=a("KGtp"),Ut=(a("6xCn"),a("JIr8")),Rt=a("7R0Y"),xt=a("H+bZ"),Ot=a("YStQ"),It=a("AytR"),Pt=a("UjNt"),wt=a("1n7x"),Dt=a("tk/3");function Ft(t,e){1&t&&(n.Ub(0,"p",6),n.Rc(1," For: National Personal Data Protection Director "),n.Tb())}function St(t,e){1&t&&(n.Ub(0,"p",6),n.Rc(1," National Personal Data Protection Director "),n.Tb())}let Nt=(()=>{class t{constructor(t,e,a,o,n){this.dialogRef=t,this.http=e,this.service=a,this.endpoints=o,this.parent_data=n,this.downloading=!1,this.processing=!1,this.todayDate=new Date,this.pipe=new i.f("en-US"),this.todayWithPipe=null,this.isDirector=!1}ngOnInit(){this.todayWithPipe=this.pipe.transform(Date.now(),"dd-MM-yyyy"),console.log(this.parent_data)}onCloseWindow(){this.dialogRef.close()}onDownload(){setTimeout(()=>{this.service.openSnackBar("Downloading. Please wait.","success");const t={filename:this.data.ComplaintForm.FirstName+"'s Complaint Letter.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:15},e=document.getElementById("letterBodyContainer");wt().from(e).set(t).save().then(t=>{setTimeout(()=>{this.downloading=!1,this.onCloseWindow(),this.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},500)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.g),n.Ob(Dt.b),n.Ob(xt.a),n.Ob(Rt.a),n.Ob(I.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-appropriate-security-measures-letter"]],decls:28,vars:9,consts:[["mat-button","",1,"close-window-btn",3,"disabled","click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],[1,"letter-body",2,"padding","65px 40px 45px","font-family","none"],[2,"font-weight","700","font-size","17px","text-transform","uppercase","text-align","center","font-family","none","color","#000","margin-top","0px"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000"],[2,"font-size","14px","font-family","none","margin","-3px 5px 0px 2px","text-transform","lowercase"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000","text-align","center"],["style","font-size: 15px;font-family: none;line-height: 21px;color: #000000; text-align: center;",4,"ngIf"]],template:function(t,e){1&t&&(n.Ub(0,"main"),n.Ub(1,"button",0),n.cc("click",function(){return e.onCloseWindow()}),n.Ub(2,"mat-icon"),n.Rc(3,"clear"),n.Tb(),n.Tb(),n.Ub(4,"article",1),n.Ub(5,"section",2),n.Ub(6,"div"),n.Ub(7,"h1",3),n.Rc(8," DECISION ON COMPLAINT CONCERNING PROCESSING PERSONAL DATA WITHOUT APPROPRIATE SECURITY MEASURES "),n.Tb(),n.Tb(),n.Ub(9,"div"),n.Ub(10,"p",4),n.Rc(11),n.Tb(),n.Ub(12,"p",4),n.Rc(13),n.Pb(14,"sup",5),n.Tb(),n.Ub(15,"p",4),n.Rc(16),n.Tb(),n.Ub(17,"p",4),n.Rc(18),n.Tb(),n.Tb(),n.Ub(19,"div"),n.Ub(20,"p"),n.Rc(21),n.Pb(22,"sup",5),n.Tb(),n.Tb(),n.Ub(23,"div"),n.Ub(24,"p",6),n.Rc(25," ...................................................................................... "),n.Tb(),n.Pc(26,Ft,2,0,"p",7),n.Pc(27,St,2,0,"p",7),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(1),n.nc("disabled",e.downloading),n.Cb(10),n.Uc(" TO: ",e.parent_data.complaint.FirstName," ",e.parent_data.complaint.LastName," "),n.Cb(2),n.Tc(" Having reviewed your complaint lodged with the Personal Data Protection Office on ",e.parent_data.complaint.CreatedAt,", concerning; "),n.Cb(3),n.Tc(" ",e.parent_data.complaint.FullDetailsOfComplaint,". "),n.Cb(2),n.Tc(" The decision of the Office is as follows; ",e.parent_data.data.Comments," "),n.Cb(3),n.Tc(" Date of the Decision: ",e.todayWithPipe," "),n.Cb(5),n.nc("ngIf",0==e.parent_data.isDirector),n.Cb(1),n.nc("ngIf",1==e.parent_data.isDirector))},directives:[E.a,M.a,i.o],styles:["main[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;padding:0;z-index:1}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 24px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin:0 0 5px;font-weight:400}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:300;text-align:justify;color:#bf212f;line-height:22px;margin:5px 0 0}main[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{width:100%;margin:30px 0}"]}),t})();function kt(t,e){1&t&&(n.Ub(0,"p",8),n.Rc(1," For: National Personal Data Protection Director "),n.Tb())}function Et(t,e){1&t&&(n.Ub(0,"p",8),n.Rc(1," National Personal Data Protection Director "),n.Tb())}let At=(()=>{class t{constructor(t,e,a,o,n){this.dialogRef=t,this.http=e,this.service=a,this.endpoints=o,this.parent_data=n,this.downloading=!1,this.processing=!1,this.todayDate=new Date,this.pipe=new i.f("en-US"),this.todayWithPipe=null,this.isDirector=!1}ngOnInit(){this.todayWithPipe=this.pipe.transform(Date.now(),"dd-MM-yyyy"),console.log(this.parent_data)}onCloseWindow(){this.dialogRef.close()}onDownload(){setTimeout(()=>{this.service.openSnackBar("Downloading. Please wait.","success");const t={filename:this.data.ComplaintForm.FirstName+"'s Complaint Letter.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:15},e=document.getElementById("letterBodyContainer");wt().from(e).set(t).save().then(t=>{setTimeout(()=>{this.downloading=!1,this.onCloseWindow(),this.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},500)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.g),n.Ob(Dt.b),n.Ob(xt.a),n.Ob(Rt.a),n.Ob(I.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-infringement-letter"]],decls:32,vars:9,consts:[["mat-button","",1,"close-window-btn",3,"disabled","click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],[1,"letter-body",2,"padding","65px 40px 45px","font-family","none"],[2,"text-align","right","font-weight","700","color","#000","font-size","17px","font-family","none"],[2,"text-align","center","font-weight","700","font-size","17px","color","#000"],[2,"font-weight","700","font-size","17px","text-transform","uppercase","text-align","center","font-family","none","color","#000","margin-top","0px"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000"],[2,"font-size","14px","font-family","none","margin","-3px 5px 0px 2px","text-transform","lowercase"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000","text-align","center"],["style","font-size: 15px;font-family: none;line-height: 21px;color: #000000; text-align: center;",4,"ngIf"]],template:function(t,e){1&t&&(n.Ub(0,"main"),n.Ub(1,"button",0),n.cc("click",function(){return e.onCloseWindow()}),n.Ub(2,"mat-icon"),n.Rc(3,"clear"),n.Tb(),n.Tb(),n.Ub(4,"article",1),n.Ub(5,"section",2),n.Ub(6,"h1",3),n.Rc(7,"Regulation 39(5)"),n.Tb(),n.Ub(8,"div"),n.Ub(9,"h1",4),n.Rc(10,"FORM 10"),n.Tb(),n.Ub(11,"h1",5),n.Rc(12," DECISION ON COMPLAINT IN RESPECT OF INACCURATE PERSONAL DATA IN THE POSSESION OF DATA CONTROLLER "),n.Tb(),n.Tb(),n.Ub(13,"div"),n.Ub(14,"p",6),n.Rc(15),n.Tb(),n.Ub(16,"p",6),n.Rc(17),n.Pb(18,"sup",7),n.Tb(),n.Ub(19,"p",6),n.Rc(20),n.Tb(),n.Ub(21,"p",6),n.Rc(22),n.Tb(),n.Tb(),n.Ub(23,"div"),n.Ub(24,"p"),n.Rc(25),n.Pb(26,"sup",7),n.Tb(),n.Tb(),n.Ub(27,"div"),n.Ub(28,"p",8),n.Rc(29," ...................................................................................... "),n.Tb(),n.Pc(30,kt,2,0,"p",9),n.Pc(31,Et,2,0,"p",9),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(1),n.nc("disabled",e.downloading),n.Cb(14),n.Uc(" TO: ",e.parent_data.complaint.FirstName," ",e.parent_data.complaint.LastName," "),n.Cb(2),n.Tc(" Having reviewed your complaint lodged with the Personal Data Protection Office on ",e.parent_data.complaint.CreatedAt,", concerning; "),n.Cb(3),n.Tc(" ",e.parent_data.complaint.FullDetailsOfComplaint,". "),n.Cb(2),n.Tc(" The decision of the Office is as follows; ",e.parent_data.data.Comments," "),n.Cb(3),n.Tc(" Date of the Decision: ",e.todayWithPipe," "),n.Cb(5),n.nc("ngIf",0==e.parent_data.isDirector),n.Cb(1),n.nc("ngIf",1==e.parent_data.isDirector))},directives:[E.a,M.a,i.o],styles:["main[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;padding:0;z-index:1}main[_ngcontent-%COMP%]   button.close-window-btn[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 24px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin:0 0 5px;font-weight:400}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:300;text-align:justify;color:#bf212f;line-height:22px;margin:5px 0 0}main[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{width:100%;margin:30px 0}"]}),t})();function Mt(t,e){1&t&&(n.Ub(0,"p",8),n.Rc(1," For: National Personal Data Protection Director "),n.Tb())}function Lt(t,e){1&t&&(n.Ub(0,"p",8),n.Rc(1," National Personal Data Protection Director "),n.Tb())}let _t=(()=>{class t{constructor(t,e,a,o,n){this.dialogRef=t,this.http=e,this.service=a,this.endpoints=o,this.parent_data=n,this.downloading=!1,this.processing=!1,this.todayDate=new Date,this.pipe=new i.f("en-US"),this.todayWithPipe=null,this.isDirector=!1,this.CreatedAt=null}ngOnInit(){this.todayWithPipe=this.pipe.transform(Date.now(),"dd-MM-yyyy"),console.log(this.parent_data)}onCloseWindow(){this.dialogRef.close()}onDownload(){setTimeout(()=>{this.service.openSnackBar("Downloading. Please wait.","success");const t={filename:this.data.ComplaintForm.FirstName+"'s Complaint Letter.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:15},e=document.getElementById("letterBodyContainer");wt().from(e).set(t).save().then(t=>{setTimeout(()=>{this.downloading=!1,this.onCloseWindow(),this.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},500)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.g),n.Ob(Dt.b),n.Ob(xt.a),n.Ob(Rt.a),n.Ob(I.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-violation-of-the-act-letter"]],decls:32,vars:9,consts:[["mat-button","",1,"close-window-btn",3,"disabled","click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],[1,"letter-body",2,"padding","65px 40px 45px","font-family","none"],[2,"text-align","right","font-weight","700","color","#000","font-size","17px","font-family","none"],[2,"text-align","center","font-weight","700","font-size","17px","color","#000"],[2,"font-weight","700","font-size","17px","text-transform","uppercase","text-align","center","font-family","none","color","#000","margin-top","0px"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000"],[2,"font-size","14px","font-family","none","margin","-3px 5px 0px 2px","text-transform","lowercase"],[2,"font-size","15px","font-family","none","line-height","21px","color","#000000","text-align","center"],["style","font-size: 15px;font-family: none;line-height: 21px;color: #000000; text-align: center;",4,"ngIf"]],template:function(t,e){1&t&&(n.Ub(0,"main"),n.Ub(1,"button",0),n.cc("click",function(){return e.onCloseWindow()}),n.Ub(2,"mat-icon"),n.Rc(3,"clear"),n.Tb(),n.Tb(),n.Ub(4,"article",1),n.Ub(5,"section",2),n.Ub(6,"h1",3),n.Rc(7,"Regulation 45(2)"),n.Tb(),n.Ub(8,"div"),n.Ub(9,"h1",4),n.Rc(10,"FORM 12"),n.Tb(),n.Ub(11,"h1",5),n.Rc(12," DECISION ON COMPLAINT OF COMPLAINT CONCERNING INFRINGEMENT OR VIOLATION OF THE ACT "),n.Tb(),n.Tb(),n.Ub(13,"div"),n.Ub(14,"p",6),n.Rc(15),n.Tb(),n.Ub(16,"p",6),n.Rc(17),n.Pb(18,"sup",7),n.Tb(),n.Ub(19,"p",6),n.Rc(20),n.Tb(),n.Ub(21,"p",6),n.Rc(22),n.Tb(),n.Tb(),n.Ub(23,"div"),n.Ub(24,"p"),n.Rc(25),n.Pb(26,"sup",7),n.Tb(),n.Tb(),n.Ub(27,"div"),n.Ub(28,"p",8),n.Rc(29," ...................................................................................... "),n.Tb(),n.Pc(30,Mt,2,0,"p",9),n.Pc(31,Lt,2,0,"p",9),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(1),n.nc("disabled",e.downloading),n.Cb(14),n.Uc(" TO: ",e.parent_data.complaint.FirstName," ",e.parent_data.complaint.LastName," "),n.Cb(2),n.Tc(" Having reviewed your complaint lodged with the Personal Data Protection Office on ",e.parent_data.complaint.CreatedAt,", concerning; "),n.Cb(3),n.Tc(" ",e.parent_data.complaint.FullDetailsOfComplaint,". "),n.Cb(2),n.Tc(" The decision of the Office is as follows; ",e.parent_data.data.Comments," "),n.Cb(3),n.Tc(" Date of the Decision: ",e.todayWithPipe," "),n.Cb(5),n.nc("ngIf",0==e.parent_data.isDirector),n.Cb(1),n.nc("ngIf",1==e.parent_data.isDirector))},directives:[E.a,M.a,i.o],styles:[""]}),t})();function jt(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",14),n.cc("click",function(){return n.Ec(t),n.gc().onRemoveDocument()}),n.Ub(1,"div",9),n.Ub(2,"mat-icon"),n.Rc(3,"clear"),n.Tb(),n.Ub(4,"span"),n.Rc(5," Remove Document "),n.Tb(),n.Tb(),n.Tb()}}function qt(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",15),n.cc("click",function(){n.Ec(t);const e=n.gc();return e.onReadDocument(e.evidenceDocument)}),n.Pb(1,"img",16),n.Ub(2,"span"),n.Rc(3),n.Ub(4,"span"),n.Rc(5),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc();n.Cb(3),n.Tc("",null==t.evidenceDocument?null:t.evidenceDocument.Name," "),n.Cb(2),n.Tc(" - ",null==t.evidenceDocument?null:t.evidenceDocument.Size," Mbs")}}function zt(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",13),n.cc("click",function(){return n.Ec(t),n.gc().onPreview()}),n.Ub(1,"span"),n.Rc(2,"Preview decision"),n.Tb(),n.Tb()}}const $t=function(){return{"margin-bottom":"20px","margin-top":"20px","background-color":"#ABC334",color:"#000"}};let Gt=(()=>{class t{constructor(t,e,a,i,o,s,r,c){this.fb=t,this.endpoints=e,this.http=a,this.service=i,this.dialog=o,this.route=s,this.allDialogRef=r,this.parent_data=c,this.ComplaintCommentsFormGroup=this.fb.group({}),this.$processingEvent=new n.o,this.$errorsEvent=new n.o,this.$resultComplaintsEvent=new n.o,this.processing=!1}ngOnInit(){this.ComplaintCommentsFormGroup=this.fb.group({Comments:new Y.e("",[Y.u.required])}),console.log(this.parent_data)}getFormData(){return{Comments:this.ComplaintCommentsFormGroup.get("Comments").value,ComplaintTrackingNo:this.parent_data.ComplaintTrackingNumber,Status:this.parent_data.Status,RequestInformation:0,EvidenceFile:""}}onPreview(){const t=this.getFormData();this.httpSub=this.http.get(this.endpoints.getComplaint,{params:{ComplaintTrackingNo:t.ComplaintTrackingNo}}).pipe(Object(Ut.a)(this.service.handleError)).subscribe(e=>{this.previewDialog=this.dialog.open(6==e.FormID?Nt:9==e.FormID?At:_t,{panelClass:["complaint-letter-dialog","dialogs"],disableClose:!0,data:{data:t,complaint:e,isDirector:this.parent_data.isDirector}}),this.processing=!1},t=>{this.processing=!1,this.service.determineErrorResponse(t)})}onSubmit(){this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.updateComplaintStatus,this.getFormData()).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:t.message,status:200===t.code}}),this.dialogRef.afterClosed().subscribe(()=>{this.allDialogRef.closeAll(),this.route.navigate(["/complaints/find"])}),this.processing=!1},t=>{this.processing=!1,t.error.message?this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:t.error.message.title?t.error.message.title:"Operation Failed",message:t.error.message.body?t.error.message.body:It.a.technicalErrorResponse,status:!1}}):this.service.determineErrorResponse(t)})}onUploadAttachments(){this.dialogRef=this.dialog.open(Pt.a,{panelClass:["resolution-upload-dialog","dialogs"],disableClose:!0,data:{multiple:!1,maxSize:3}}),this.dialogRef.afterClosed().subscribe(t=>{t.status&&(this.evidenceDocument=t.row,console.log(this.evidenceDocument))})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(Y.d),n.Ob(Rt.a),n.Ob(Dt.c),n.Ob(xt.a),n.Ob(I.b),n.Ob(o.f),n.Ob(I.b),n.Ob(I.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-complaint-comments"]],decls:27,vars:7,consts:[[2,"padding","10px"],["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],[1,"buttons"],["mat-button","","color","primary",1,"add-item-button",3,"ngStyle","click"],[1,"button-label"],["mat-button","","color","primary","class","remove-button",3,"click",4,"ngIf"],["class","uploaded-document","matTooltip","Open Document",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",1,"remove-button",3,"click"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/images/pdf.png","alt",""]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Rc(2,"Make Comments"),n.Tb(),n.Ub(3,"form",2),n.Ub(4,"mat-dialog-content"),n.Ub(5,"div",3),n.Ub(6,"div",4),n.Ub(7,"mat-form-field",5),n.Ub(8,"mat-label"),n.Rc(9,"Provide Comments"),n.Tb(),n.Pb(10,"textarea",6),n.Ub(11,"mat-hint"),n.Rc(12,"Review Comments"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(13,"section"),n.Ub(14,"div",7),n.Ub(15,"button",8),n.cc("click",function(){return e.onUploadAttachments()}),n.Ub(16,"div",9),n.Ub(17,"span"),n.Rc(18),n.Tb(),n.Tb(),n.Tb(),n.Pc(19,jt,6,0,"button",10),n.Tb(),n.Pc(20,qt,6,2,"div",11),n.Tb(),n.Pc(21,zt,3,0,"button",12),n.Rc(22,"\xa0 "),n.Ub(23,"button",13),n.cc("click",function(){return e.onSubmit()}),n.Ub(24,"span"),n.Rc(25,"Submit"),n.Tb(),n.Tb(),n.Rc(26,"\xa0 "),n.Tb(),n.Tb()),2&t&&(n.Cb(3),n.nc("formGroup",e.ComplaintCommentsFormGroup),n.Cb(12),n.nc("ngStyle",n.qc(6,$t)),n.Cb(3),n.Tc(" ",e.evidenceDocument?"Replace Document":"Upload A Document"," "),n.Cb(1),n.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Name),n.Cb(1),n.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Base64),n.Cb(1),n.nc("ngIf",6===e.parent_data.Status))},directives:[I.h,Y.v,Y.o,Y.h,I.e,Z.d,Z.e,et.d,Z.b,et.h,at.b,ot.b,Y.c,Y.n,Y.g,et.g,E.a,i.p,st.c,i.o,M.a,nt.a],styles:[""]}),t})();var Vt=a("Nd1k"),Bt=a("CKU1");let Wt=(()=>{class t{constructor(t,e,a,i,o,n,s,r){this.fb=t,this.endpoints=e,this.http=a,this.service=i,this.dialog=o,this.route=n,this.allDialogRef=s,this.parent_data=r,this.processing=!1,this.ComplaintCommentsFormGroup=this.fb.group({}),this.BreachCommentsFormGroup=this.fb.group({})}ngOnInit(){this.ComplaintCommentsFormGroup=this.fb.group({Comments:new Y.e("",[Y.u.required]),RequestedInformation:new Y.e}),this.ComplaintCommentsFormGroup.get("RequestedInformation").setValue(this.parent_data.RequestedInformation)}getFormData(){return{Comments:this.ComplaintCommentsFormGroup.get("Comments").value,ComplaintTrackingNo:this.parent_data.ComplaintTrackingNumber}}onSubmit(){(this.processing=!0)&&(console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.CheckComplaintRequestForInfo,this.getFormData()).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Updated information ",message:"Updated information successfully",status:200===t.code}}),this.dialogRef.afterClosed().subscribe(()=>{this.allDialogRef.closeAll(),this.route.navigate(["/complaints/find/"])}),this.processing=!1},t=>{this.processing=!1,t.error.message?this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:t.error.message.title?t.error.message.title:"Operation Failed",message:t.error.message.body?t.error.message.body:It.a.technicalErrorResponse,status:!1}}):this.service.determineErrorResponse(t)}))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(Y.d),n.Ob(Rt.a),n.Ob(Dt.c),n.Ob(xt.a),n.Ob(I.b),n.Ob(o.f),n.Ob(I.b),n.Ob(I.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-complaint-manage-more-information"]],decls:22,vars:2,consts:[[2,"padding","10px"],["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","2 1 auto"],["formControlName","RequestedInformation","matInput","",3,"readonly"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Rc(2,"Make Comments"),n.Tb(),n.Ub(3,"form",2),n.Ub(4,"mat-dialog-content"),n.Ub(5,"div",3),n.Ub(6,"div"),n.Ub(7,"mat-form-field",4),n.Ub(8,"mat-label"),n.Rc(9,"Requested Information"),n.Tb(),n.Pb(10,"input",5),n.Tb(),n.Tb(),n.Ub(11,"div",6),n.Ub(12,"mat-form-field",7),n.Ub(13,"mat-label"),n.Rc(14,"Provide Comments"),n.Tb(),n.Pb(15,"textarea",8),n.Ub(16,"mat-hint"),n.Rc(17,"Review Comments"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(18,"button",9),n.cc("click",function(){return e.onSubmit()}),n.Ub(19,"span"),n.Rc(20,"Submit"),n.Tb(),n.Tb(),n.Rc(21,"\xa0 "),n.Tb(),n.Tb()),2&t&&(n.Cb(3),n.nc("formGroup",e.ComplaintCommentsFormGroup),n.Cb(7),n.nc("readonly",!0))},directives:[I.h,Y.v,Y.o,Y.h,I.e,Z.d,Z.e,et.d,Z.b,et.h,Y.c,at.b,Y.n,Y.g,ot.b,et.g,E.a],styles:[""]}),t})();var Ht=a("zqeb"),Kt=a("aViL"),Xt=a("QibW");let Yt=(()=>{class t{constructor(t,e,a,i,o,n,s,r){this.fb=t,this.endpoints=e,this.http=a,this.service=i,this.dialog=o,this.route=n,this.allDialogRef=s,this.parent_data=r,this.processing=!1,this.ComplaintCommentsFormGroup=this.fb.group({})}ngOnInit(){this.ComplaintCommentsFormGroup=this.fb.group({Comments:new Y.e("",[Y.u.required]),Status:new Y.e("",[Y.u.required])})}getFormData(){return{Comments:this.ComplaintCommentsFormGroup.get("Comments").value,ComplaintTrackingNo:this.parent_data.ComplaintTrackingNumber,Status:parseInt(this.ComplaintCommentsFormGroup.get("Status").value)}}onSubmit(){this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.updateComplaintStatus,this.getFormData()).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:"More information required successfully",status:200===t.code}}),this.dialogRef.afterClosed().subscribe(()=>{this.allDialogRef.closeAll(),this.route.navigate(["/complaints/find"])}),this.processing=!1},t=>{this.processing=!1,t.error.message?this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:t.error.message.title?t.error.message.title:"Operation Failed",message:t.error.message.body?t.error.message.body:It.a.technicalErrorResponse,status:!1}}):this.service.determineErrorResponse(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(Y.d),n.Ob(Rt.a),n.Ob(Dt.c),n.Ob(xt.a),n.Ob(I.b),n.Ob(o.f),n.Ob(I.b),n.Ob(I.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-more-information"]],decls:26,vars:1,consts:[[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],[1,"grouped-items"],["color","primary","formControlName","Status"],["value","8"],["value","9"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(n.Ub(0,"div"),n.Ub(1,"form",0),n.Ub(2,"mat-dialog-content"),n.Ub(3,"div",1),n.Ub(4,"div",2),n.Ub(5,"mat-form-field",3),n.Ub(6,"mat-label"),n.Rc(7,"What more information is needed"),n.Tb(),n.Pb(8,"textarea",4),n.Ub(9,"mat-hint"),n.Rc(10,"Request more Information"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Pb(11,"br"),n.Ub(12,"div",5),n.Ub(13,"h3"),n.Rc(14,"More information from:"),n.Tb(),n.Ub(15,"mat-radio-group",6),n.Ub(16,"mat-radio-button",7),n.Rc(17,"Technical"),n.Tb(),n.Ub(18,"mat-radio-button",8),n.Rc(19,"Legal"),n.Tb(),n.Tb(),n.Tb(),n.Pb(20,"br"),n.Ub(21,"div"),n.Ub(22,"button",9),n.cc("click",function(){return e.onSubmit()}),n.Ub(23,"span"),n.Rc(24,"Submit"),n.Tb(),n.Tb(),n.Rc(25,"\xa0 "),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(1),n.nc("formGroup",e.ComplaintCommentsFormGroup))},directives:[Y.v,Y.o,Y.h,I.e,Z.d,Z.e,et.d,Z.b,et.h,at.b,ot.b,Y.c,Y.n,Y.g,et.g,Xt.b,Xt.a,E.a],styles:[""]}),t})();var Jt=a("jm8W"),Qt=a("bv9b");function Zt(t,e){1&t&&n.Pb(0,"mat-progress-bar",5)}const te=function(t,e){return{"status-true":t,"status-false":e}};let ee=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e,this.processing=!1}ngOnInit(){}onCloseDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.a),n.Ob(I.g))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-save-message"]],decls:10,vars:7,consts:[[3,"ngClass"],[1,"mat-progress-bar-container"],["mode","indeterminate",4,"ngIf"],[3,"innerHTML"],["mat-button","",3,"click"],["mode","indeterminate"]],template:function(t,e){1&t&&(n.Ub(0,"main",0),n.Ub(1,"div",1),n.Pc(2,Zt,1,0,"mat-progress-bar",2),n.Tb(),n.Ub(3,"header"),n.Pb(4,"h1",3),n.Ub(5,"button",4),n.cc("click",function(){return e.onCloseDialog()}),n.Ub(6,"mat-icon"),n.Rc(7,"clear"),n.Tb(),n.Tb(),n.Tb(),n.Ub(8,"section"),n.Pb(9,"p",3),n.Tb(),n.Tb()),2&t&&(n.nc("ngClass",n.sc(4,te,!0===e.data.status,!1===e.data.status)),n.Cb(2),n.nc("ngIf",e.processing),n.Cb(2),n.nc("innerHTML",e.data.title,n.Fc),n.Cb(5),n.nc("innerHTML",e.data.message,n.Fc))},directives:[i.m,st.a,i.o,E.a,M.a,Qt.a],styles:["main[_ngcontent-%COMP%]{position:relative;flex-direction:column}main[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;height:56px;margin-bottom:-10px;margin-top:10px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin:0;font-weight:300}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;display:flex;align-items:center;justify-content:center;padding:0}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 20px 20px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;font-size:13px;font-weight:500;color:#373636}main.status-true[_ngcontent-%COMP%]{border:3px solid #6cbd45}main.status-true[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#6cbd45}main.status-false[_ngcontent-%COMP%]{border:3px solid #f44336}main.status-false[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f44336}"]}),t})();function ae(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",14),n.cc("click",function(){return n.Ec(t),n.gc().onDownloadLetter()}),n.Ub(1,"div",15),n.Ub(2,"mat-icon"),n.Rc(3,"cloud_download"),n.Tb(),n.Ub(4,"span"),n.Rc(5,"Download "),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc();n.nc("disabled",t.downloading)}}function ie(t,e){if(1&t&&(n.Ub(0,"span"),n.Ub(1,"span",16),n.Rc(2),n.Tb(),n.Rc(3),n.Tb()),2&t){const t=e.$implicit,a=e.index;n.Cb(2),n.Sc(a>0?",":""),n.Cb(1),n.Tc(" ",t.ComplaintReasonName," ")}}function oe(t,e){if(1&t&&(n.Ub(0,"span"),n.Ub(1,"span",16),n.Rc(2),n.Tb(),n.Rc(3),n.Tb()),2&t){const t=e.$implicit,a=e.index;n.Cb(2),n.Sc(a>0?",":""),n.Cb(1),n.Tc(" ",t.DataSubCategoryName," ")}}let ne=(()=>{class t{constructor(t,e,a,i){this.dialog=t,this.dialogRef=e,this.data=a,this.service=i,this.downloading=!1}ngOnInit(){console.log("data:",this.data),this.data.download&&this.onDownloadLetter()}onCloseWindow(){this.dialogRef.close()}onDownloadLetter(){this.downloading=!0,setTimeout(()=>{this.service.openSnackBar("Downloading. Please wait.","nuetral");const t={filename:this.data.row.ComplaintTrackingNo+" - Complaint.pdf",image:{type:"jpeg",quality:1},html2canvas:{scale:2,backgroundColor:null},jspdf:{unit:"in",format:"letter",orientation:"portrait"},margin:[10,2,2,2]},e=document.getElementById("letterBodyContainer");wt().from(e).set(t).save().then(t=>{setTimeout(()=>{this.downloading=!1,this.data.download&&this.onCloseWindow(),this.service.openSnackBar("Downloaded. Please check in your downloads.","success-lg")},1e3)})},1e3)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.b),n.Ob(I.g),n.Ob(I.a),n.Ob(xt.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-download-complaint"]],decls:102,vars:18,consts:[[2,"border","1px solid red"],["mat-button","",1,"close-window-btn",3,"click"],["id","letterBodyContainer",2,"width","100%","margin","0px 0px 30px","position","relative"],["mat-button","","color","primary","class","download-button",3,"disabled","click",4,"ngIf"],[1,"letter-body",2,"padding","0px 40px 45px"],[2,"margin-bottom","20px"],[2,"font-weight","700","font-size","14px","text-transform","uppercase","text-align","center","color","#000","margin-top","0px","margin","-30px 0px 25px 0px"],[2,"font-weight","700","letter-spacing","1px","font-size","14px","text-transform","uppercase","text-align","left","color","#000","margin","0px 0px -10px 0px"],[2,"font-size","11px","line-height","14px","font-weight","400","color","#000","text-align","left","display","flex","flex-direction","column","gap","3px","margin","0px"],[2,"font-weight","600"],[2,"margin","15px 0px","display","grid","grid-template-columns","repeat(auto-fit,minmax(200px, 1fr))","gap","20px 25px"],[2,"grid-column","1/-1","font-size","11px","line-height","14px","font-weight","400","color","#000","text-align","left","display","flex","flex-direction","column","gap","3px","margin","0px"],[2,"font-weight","600","margin-left","3px","text-align","justify"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",1,"download-button",3,"disabled","click"],[1,"button-label"],[2,"margin-left","-3px"]],template:function(t,e){1&t&&(n.Ub(0,"main",0),n.Ub(1,"button",1),n.cc("click",function(){return e.onCloseWindow()}),n.Ub(2,"mat-icon"),n.Rc(3,"clear"),n.Tb(),n.Tb(),n.Ub(4,"article",2),n.Pc(5,ae,6,1,"button",3),n.Ub(6,"section",4),n.Ub(7,"div",5),n.Ub(8,"h1",6),n.Rc(9," Complaint Information "),n.Tb(),n.Tb(),n.Ub(10,"div"),n.Ub(11,"h3",7),n.Rc(12," Complaint Information "),n.Tb(),n.Tb(),n.Ub(13,"div"),n.Ub(14,"p",8),n.Ub(15,"span"),n.Rc(16,"Source of complaint"),n.Tb(),n.Ub(17,"b",9),n.Rc(18),n.Tb(),n.Tb(),n.Tb(),n.Ub(19,"div"),n.Ub(20,"p",8),n.Ub(21,"span"),n.Rc(22,"Complaint Tracking Number"),n.Tb(),n.Ub(23,"b",9),n.Rc(24),n.Tb(),n.Tb(),n.Tb(),n.Ub(25,"div"),n.Ub(26,"h3",7),n.Rc(27," Complainant Details "),n.Tb(),n.Tb(),n.Ub(28,"div",10),n.Ub(29,"p",8),n.Ub(30,"span"),n.Rc(31,"Name of Complainant"),n.Tb(),n.Ub(32,"b",9),n.Rc(33),n.Tb(),n.Tb(),n.Ub(34,"p",8),n.Ub(35,"span"),n.Rc(36,"Email Address of Complainant"),n.Tb(),n.Ub(37,"b",9),n.Rc(38),n.Tb(),n.Tb(),n.Ub(39,"p",8),n.Ub(40,"span"),n.Rc(41,"Contact of Complainant"),n.Tb(),n.Ub(42,"b",9),n.Rc(43),n.Tb(),n.Tb(),n.Ub(44,"h3",7),n.Rc(45," Organisation Complained To "),n.Tb(),n.Ub(46,"p",8),n.Ub(47,"span"),n.Rc(48,"Organisation"),n.Tb(),n.Ub(49,"b",9),n.Rc(50),n.Tb(),n.Tb(),n.Ub(51,"h3",7),n.Rc(52," Organisation Contact Person Details "),n.Tb(),n.Ub(53,"p",8),n.Ub(54,"span"),n.Rc(55,"Name of contact person"),n.Tb(),n.Ub(56,"b",9),n.Rc(57),n.Tb(),n.Tb(),n.Ub(58,"p",8),n.Ub(59,"span"),n.Rc(60,"Email Address of contact person"),n.Tb(),n.Ub(61,"b",9),n.Rc(62),n.Tb(),n.Tb(),n.Ub(63,"p",8),n.Ub(64,"span"),n.Rc(65,"Contact of contact person"),n.Tb(),n.Ub(66,"b",9),n.Rc(67),n.Tb(),n.Tb(),n.Ub(68,"h3",7),n.Rc(69," Type of complaint "),n.Tb(),n.Ub(70,"p",8),n.Ub(71,"b",9),n.Rc(72),n.Tb(),n.Tb(),n.Ub(73,"h3",7),n.Rc(74," Reasons for complaint "),n.Tb(),n.Ub(75,"p",11),n.Ub(76,"b",12),n.Pc(77,ie,4,2,"span",13),n.Tb(),n.Tb(),n.Ub(78,"h3",7),n.Rc(79," Personal Data Affected "),n.Tb(),n.Ub(80,"p",11),n.Ub(81,"b",12),n.Pc(82,oe,4,2,"span",13),n.Tb(),n.Tb(),n.Ub(83,"h3",7),n.Rc(84," Details of complaint "),n.Tb(),n.Ub(85,"p",8),n.Ub(86,"span"),n.Rc(87,"Full details of complaint"),n.Tb(),n.Ub(88,"b",9),n.Rc(89),n.Tb(),n.Tb(),n.Ub(90,"h3",7),n.Rc(91," Comments "),n.Tb(),n.Ub(92,"p",8),n.Ub(93,"span"),n.Rc(94,"Technical comments"),n.Tb(),n.Ub(95,"b",9),n.Rc(96),n.Tb(),n.Tb(),n.Ub(97,"p",8),n.Ub(98,"span"),n.Rc(99,"Legal comments"),n.Tb(),n.Ub(100,"b",9),n.Rc(101),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(5),n.nc("ngIf",!e.downloading),n.Cb(13),n.Sc(e.data.row.ComplaintSourceName),n.Cb(6),n.Sc(e.data.row.ComplaintTrackingNo),n.Cb(9),n.Uc("",e.data.row.FirstName," ",e.data.row.LastName,""),n.Cb(5),n.Sc(e.data.row.EmailAddress),n.Cb(5),n.Sc(e.data.row.PhoneNumber),n.Cb(7),n.Sc(e.data.row.OrganisationComplainedToName),n.Cb(7),n.Uc("",e.data.row.ContactPersonFirstName," ",e.data.row.ContactPersonLastName,""),n.Cb(5),n.Sc(e.data.row.ContactPersonEmailAddress),n.Cb(5),n.Sc(e.data.row.ContactPersonPhoneNumber),n.Cb(5),n.Sc(e.data.row.FormName),n.Cb(5),n.nc("ngForOf",e.data.row.ReasonsForComplaint),n.Cb(5),n.nc("ngForOf",e.data.row.PersonalDataAffected),n.Cb(7),n.Sc(e.data.row.FullDetailsOfComplaint),n.Cb(7),n.Sc(e.data.row.TechnicalComments),n.Cb(5),n.Sc(e.data.row.LegalComments))},directives:[E.a,M.a,i.o,i.n],styles:[""]}),t})();var se=a("/t3+");const re=["autosize"],ce=function(){return{"margin-left":"30px"}};function le(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",42),n.cc("click",function(){return n.Ec(t),n.gc(2).manageRequestForMoreInfo()}),n.Ub(1,"span"),n.Rc(2,"Manage request for more information"),n.Tb(),n.Tb()}2&t&&n.nc("ngStyle",n.qc(1,ce))}const me=function(){return{"margin-left":"500px"}};function pe(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",42),n.cc("click",function(){return n.Ec(t),n.gc(2).onSave()}),n.Ub(1,"span"),n.Rc(2,"Save Changes"),n.Tb(),n.Tb()}2&t&&n.nc("ngStyle",n.qc(1,me))}function be(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",37),n.Ub(1,"mat-toolbar"),n.Ub(2,"mat-toolbar-row"),n.Pb(3,"span",38),n.Ub(4,"button",39),n.cc("click",function(){return n.Ec(t),n.gc().markAsResolved()}),n.Ub(5,"span"),n.Rc(6,"Mark as resolved"),n.Tb(),n.Tb(),n.Ub(7,"button",40),n.cc("click",function(){return n.Ec(t),n.gc().forwardComplaint()}),n.Ub(8,"span"),n.Rc(9,"Forward Complaint"),n.Tb(),n.Tb(),n.Pc(10,le,3,2,"button",41),n.Pc(11,pe,3,2,"button",41),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc();n.Cb(4),n.nc("disabled",1==t.disableResolve),n.Cb(3),n.nc("disabled",1==t.disableForward)("ngStyle",n.qc(5,ce)),n.Cb(3),n.nc("ngIf",1==t.manageRequestForInfo),n.Cb(1),n.nc("ngIf",1==t.application.ComplaintSourceID)}}const de=function(){return{"margin-right":"30px"}};function ue(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",37),n.Ub(1,"mat-toolbar"),n.Ub(2,"mat-toolbar-row"),n.Ub(3,"button",43),n.cc("click",function(){return n.Ec(t),n.gc().markUnderInvestigation()}),n.Ub(4,"span"),n.Rc(5," Investigate "),n.Tb(),n.Tb(),n.Ub(6,"button",39),n.cc("click",function(){return n.Ec(t),n.gc().markAsResolved()}),n.Ub(7,"span"),n.Rc(8,"Mark as resolved"),n.Tb(),n.Tb(),n.Ub(9,"button",44),n.cc("click",function(){return n.Ec(t),n.gc().moreInformation()}),n.Ub(10,"span"),n.Rc(11,"Request for more information"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc();n.Cb(3),n.nc("ngStyle",n.qc(5,de))("disabled",1==t.disableResolve),n.Cb(3),n.nc("disabled",1==t.disableResolve),n.Cb(3),n.nc("disabled",1==t.disableResolve)("ngStyle",n.qc(6,ce))}}function ge(t,e){1&t&&(n.Ub(0,"mat-form-field",9),n.Ub(1,"mat-label"),n.Rc(2,"Who are you complaining as"),n.Tb(),n.Pb(3,"input",45),n.Tb())}function he(t,e){1&t&&(n.Ub(0,"mat-form-field",9),n.Ub(1,"mat-label"),n.Rc(2,"Who are you complaining as"),n.Tb(),n.Pb(3,"input",46),n.Tb()),2&t&&(n.Cb(3),n.nc("disabled",!0))}function fe(t,e){1&t&&(n.Ub(0,"mat-form-field",9),n.Ub(1,"mat-label"),n.Rc(2,"Organisation Complained From"),n.Tb(),n.Pb(3,"input",47),n.Tb())}function Ce(t,e){1&t&&(n.Ub(0,"mat-form-field",9),n.Ub(1,"mat-label"),n.Rc(2,"Other Organisation"),n.Tb(),n.Pb(3,"input",48),n.Tb())}function Te(t,e){1&t&&(n.Ub(0,"mat-form-field",9),n.Ub(1,"mat-label"),n.Rc(2,"Other Organisation Complained To"),n.Tb(),n.Pb(3,"input",49),n.Tb())}function ye(t,e){if(1&t&&(n.Ub(0,"mat-grid-tile"),n.Rc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Tc(" ",t.DataSubCategoryName," ")}}function ve(t,e){if(1&t&&(n.Ub(0,"fieldset"),n.Ub(1,"legend"),n.Rc(2,"Complaint in Brief"),n.Tb(),n.Ub(3,"mat-label"),n.Rc(4,"Personal Data Affected"),n.Tb(),n.Ub(5,"mat-grid-list",21),n.Pc(6,ye,2,1,"mat-grid-tile",22),n.Tb(),n.Tb()),2&t){const t=n.gc();n.Cb(6),n.nc("ngForOf",t.personalData)}}function Ue(t,e){1&t&&n.Pb(0,"mat-grid-tile")}function Re(t,e){if(1&t&&(n.Ub(0,"span"),n.Rc(1),n.Tb()),2&t){const t=n.gc(3);n.Cb(1),n.Tc(" - ",t.ComplaintEvidence.Size," Mbs")}}function xe(t,e){if(1&t&&(n.Ub(0,"span"),n.Rc(1),n.Pc(2,Re,2,1,"span",19),n.Tb()),2&t){const t=n.gc(2);n.Cb(1),n.Tc("Document: ",t.ComplaintEvidence.Name," "),n.Cb(1),n.nc("ngIf",t.ComplaintEvidence&&t.ComplaintEvidence.Size)}}function Oe(t,e){1&t&&(n.Ub(0,"p",50),n.Rc(1,"No document found. Please attach"),n.Tb())}const Ie=function(){return{width:"100px",height:"100px"}};function Pe(t,e){if(1&t){const t=n.Vb();n.Ub(0,"fieldset"),n.Ub(1,"legend"),n.Rc(2,"Evidence Of Complaint"),n.Tb(),n.Ub(3,"div",30),n.cc("click",function(){return n.Ec(t),n.gc().onReadDocument()}),n.Pb(4,"img",31),n.Pc(5,xe,3,2,"span",19),n.Tb(),n.Pc(6,Oe,2,0,"p",32),n.Tb()}if(2&t){const t=n.gc();n.Cb(4),n.nc("ngStyle",n.qc(3,Ie)),n.Cb(1),n.nc("ngIf",t.ComplaintEvidence&&t.ComplaintEvidence.Name),n.Cb(1),n.nc("ngIf",t.ComplaintEvidence&&!t.ComplaintEvidence.Base64)}}function we(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",54),n.cc("click",function(){return n.Ec(t),n.gc(2).onRemoveDocument()}),n.Ub(1,"div",35),n.Ub(2,"mat-icon"),n.Rc(3,"clear"),n.Tb(),n.Ub(4,"span"),n.Rc(5," Remove Document "),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc(2);n.nc("disabled",t.processing)}}function De(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",30),n.cc("click",function(){n.Ec(t);const e=n.gc(2);return e.onReadDocument(e.ComplaintEvidence)}),n.Pb(1,"img",55),n.Ub(2,"span"),n.Rc(3),n.Ub(4,"span"),n.Rc(5),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc(2);n.Cb(3),n.Tc("Document: ",t.ComplaintEvidence.Name," "),n.Cb(2),n.Tc(" - ",t.ComplaintEvidence.Size," Mbs")}}function Fe(t,e){if(1&t){const t=n.Vb();n.Ub(0,"fieldset"),n.Ub(1,"div",33),n.Ub(2,"button",51),n.cc("click",function(){return n.Ec(t),n.gc().onUploadAttachments()}),n.Ub(3,"div",35),n.Ub(4,"mat-icon"),n.Rc(5,"add"),n.Tb(),n.Ub(6,"span"),n.Rc(7),n.Tb(),n.Tb(),n.Tb(),n.Pc(8,we,6,1,"button",52),n.Tb(),n.Pc(9,De,6,2,"div",53),n.Tb()}if(2&t){const t=n.gc();n.Cb(2),n.nc("disabled",t.processing),n.Cb(5),n.Tc(" ",t.ComplaintEvidence.Base64?"Replace Document":"Upload Attachment"," "),n.Cb(1),n.nc("ngIf",t.ComplaintEvidence.Base64),n.Cb(1),n.nc("ngIf",t.ComplaintEvidence.Base64)}}function Se(t,e){1&t&&(n.Ub(0,"span"),n.Rc(1,"(To, Technical)"),n.Tb())}function Ne(t,e){1&t&&(n.Ub(0,"span"),n.Rc(1,"(To, Legal)"),n.Tb())}function ke(t,e){if(1&t&&(n.Ub(0,"mat-grid-tile",58),n.Ub(1,"mat-grid-tile-header"),n.Rc(2),n.Pc(3,Se,2,0,"span",19),n.Pc(4,Ne,2,0,"span",19),n.Tb(),n.Ub(5,"p"),n.Rc(6),n.Tb(),n.Tb()),2&t){const t=e.$implicit;n.Cb(2),n.Tc(" ",t.Comments," "),n.Cb(1),n.nc("ngIf",8==t.ComplaintStatus),n.Cb(1),n.nc("ngIf",9==t.ComplaintStatus),n.Cb(2),n.Tc(" ",t.Feedback," ")}}function Ee(t,e){if(1&t&&(n.Ub(0,"mat-grid-list",56),n.Rc(1," test "),n.Pc(2,ke,7,4,"mat-grid-tile",57),n.Tb()),2&t){const t=n.gc();n.Cb(2),n.nc("ngForOf",t.RequestedInforamationTrack)}}function Ae(t,e){if(1&t&&(n.Ub(0,"span"),n.Rc(1),n.Tb()),2&t){const t=n.gc(2);n.Cb(1),n.Tc(" - ",t.document.Size," Mbs")}}function Me(t,e){if(1&t&&(n.Ub(0,"span"),n.Rc(1),n.Pc(2,Ae,2,1,"span",19),n.Tb()),2&t){const t=n.gc();n.Cb(1),n.Tc("Document: ",t.document.Name," "),n.Cb(1),n.nc("ngIf",t.document.Size)}}function Le(t,e){1&t&&(n.Ub(0,"p",50),n.Rc(1,"No document found. Please attach"),n.Tb())}const _e=function(){return["Complaints"]};let je=(()=>{class t extends v.a{constructor(t,e,a,i,o,r,c,l,m,p,b,d,u,g,h,C){super(u,g,h,C),this.formBuilder=t,this.activateRoute=e,this.route=a,this.dialog=i,this.bottomsheet=o,this.endpoints=r,this.http=c,this.service=l,this.allDialogRef=m,this.auth=p,this.utilService=b,this.snackBar=d,this.authService=u,this._workflowService=g,this.registrationService=h,this.complaintService=C,this.subject$=new f.a(1),this.data$=this.subject$.asObservable(),this.sub$=new f.a(1),this.dat$=this.sub$.asObservable(),this.$processingEvent=new n.o,this.$errorsEvent=new n.o,this.$resultComplaintsEvent=new n.o,this.subscriptions=[],this.ActionTakenCheckboxValue=0,this.disableResolve=!0,this.disableForward=!1,this.processing=!1,this.isDirector=!1,this.manageRequestForInfo=!1,this.RequestedInforamationTrack=[],this.application=new s,this.DataSubjectsCategories=[],this.personalDataAffected=[],this.complaintReasons=[],this.list=[],this.displayColumns=["nber","personalDataCategory","personalDataSubCategory","actions"],this.permittedActions=[],this.dataCategories=[],this.$dataCategories=[],this.$subCategories=[],this.dataCategory=new Y.e,this.dataSubCategory=new Y.e,this.buttonIcon="add_circle_outline",this.buttonLabel="Add",this.isEditingPersonalData=!1,this.tableEditable=!0,this.personalDataIndex=0,this.personalNumber=1,this._gap=16,this.gap=this._gap+"px",this.col2=`1 1 calc(50% - ${this._gap/2}px)`,this.col3=`1 1 calc(33.3333% - ${this._gap/1.5}px)`,this.accesses=u.getKeycloakInstance().resourceAccess["dps-frontend"].roles,console.log(this.accesses),this.operationType=e.routeConfig.data.action,this.ComplaintTrackingNumber=this.route.getCurrentNavigation().extras.state.ComplaintTrackingNumber,this.ComplaintSourceID=this.route.getCurrentNavigation().extras.state.ComplaintSourceID,console.log(this.operationType),"EDIT"===this.operationType?(this.isEditMode=!0,this.application.comments=[],this.application.personalDataAffected=[]):"CREATE"===this.operationType?(this.isEditMode=!1,this.application.comments=[],this.application.personalDataAffected=[]):"VIEW"===this.operationType&&(1==this.ComplaintSourceID?(this.isEditMode=!0,this.isViewOnly=!1):(this.isEditMode=!1,this.isViewOnly=!0))}ngOnInit(){this.initForm(),console.log(this.sampleJson),this.sampleJson().subscribe(t=>{this.$dataCategories=t}),this.accesses.includes("resolve.director.complaint")&&(this.isDirector=!0),console.log(this.$dataCategories),this.getComplaint(),this.subscriptions.$resultComplaintsEvent=this.$resultComplaintsEvent.subscribe(t=>{t&&(this.httpSub=this.http.get(this.endpoints.GetComplaintRequestForInfo+"?ComplaintTrackingNo="+this.ComplaintTrackingNumber).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{this.RequestedInforamationTrack=t.data,this.processing=!1},t=>{this.processing=!1}),this.application=t,console.log(this.application),this.accesses.includes("resolve.technical.complaint")?2==this.application.StatusID?this.disableForward=!1:8==this.application.StatusID?(this.manageRequestForInfo=!0,this.disableForward=!0):this.disableForward=!0:this.accesses.includes("resolve.legal.complaint")?3==this.application.StatusID?this.disableForward=!1:9==this.application.StatusID?(this.manageRequestForInfo=!0,this.disableForward=!0):this.disableForward=!0:this.disableForward=!0,4==this.application.StatusID&&this.accesses.includes("resolve.director.complaint")?this.disableResolve=!1:6==this.application.FormID?this.disableResolve=!this.accesses.includes("resolve.technical.complaint"):9!=this.application.FormID&&11!=this.application.FormID||(this.disableResolve=!this.accesses.includes("resolve.legal.complaint")||3!=this.application.StatusID),this.mapFields()),t&&(this.application=t,console.log(this.application),this.mapFields())}),this.disableFieldsByStatus(),this.isViewOnly&&this.disableAllControls()}mapFields(){this.isApplicationValid=!0,this.personalData=this.application.PersonalDataAffected,this.complaintReasons=this.application.ReasonsForComplaint,console.log(this.application),this.complaintForm.get("reasonForTheComplaint").setValue(this.application.ReasonsForComplaint),this.complaintForm.get("complaintDetails").setValue(this.application.FullDetailsOfComplaint),this.complaintForm.get("remedialActions").setValue(this.application.RemedialActions),this.complaintForm.get("lastModificationDate").setValue(this.application.FirstName),this.complaintForm.get("dataSubjectName").setValue(this.application.FirstName+" "+this.application.LastName),this.complaintForm.get("dataSubjectPhone").setValue(this.application.PhoneNumber),this.complaintForm.get("dataSubjectEmail").setValue(this.application.EmailAddress),this.complaintForm.get("ComplaintCategory").setValue(this.application.ComplainerCategory),this.complaintForm.get("OrganisationComplainedTo").setValue(this.application.OrganisationComplainedToName),this.complaintForm.get("ContactFirstName").setValue(this.application.ContactPersonFirstName),this.complaintForm.get("ContactLastName").setValue(this.application.ContactPersonLastName),this.complaintForm.get("ContactEmailAddress").setValue(this.application.ContactPersonEmailAddress),this.complaintForm.get("TechnicalForwardedComments").setValue(this.application.TechnicalComments),this.complaintForm.get("LegalForwardedComments").setValue(this.application.LegalComments),this.complaintForm.get("MoreInformationRequired").setValue(this.application.MoreInformation),this.isApplicationValid=!0,this.personalData=this.application.PersonalDataAffected,this.complaintReasons=this.application.ReasonsForComplaint,console.log(this.application.EvidenceOfComplaint),this.ComplaintEvidence={Document:null,Name:"Complaint Evidence.pdf",Size:null,Base64:this.application.EvidenceOfComplaint}}initForm(){this.complaintForm=this.formBuilder.group({personalDataAffected:["",Y.u.compose([Y.u.required])],reasonForTheComplaint:["",Y.u.compose([Y.u.required])],complaintDetails:["",Y.u.compose([Y.u.required])],remedialActions:["",Y.u.compose([Y.u.required])],dataSubjectName:["",Y.u.compose([Y.u.required])],dataSubjectPhone:["",Y.u.compose([Y.u.required])],dataSubjectEmail:["",Y.u.compose([Y.u.required])],ContactFirstName:["",Y.u.compose([Y.u.required])],ContactLastName:["",Y.u.compose([Y.u.required])],ContactEmailAddress:["",Y.u.compose([Y.u.required])],OrganisationComplainedTo:["",Y.u.compose([Y.u.required])],OtherOrganisationComplainedTo:["",Y.u.compose([Y.u.required])],ComplaintCategory:["",Y.u.compose([Y.u.required])],OrganisationComplainedFrom:["",Y.u.compose([Y.u.required])],OtherOrganisationComplainedFrom:["",Y.u.compose([Y.u.required])],TechnicalForwardedComments:["",Y.u.compose([Y.u.required])],LegalForwardedComments:["",Y.u.compose([Y.u.required])],MoreInformationRequired:["",Y.u.compose([Y.u.required])],lastModificationDate:[]}),this.personalDataFormGroup=this.formBuilder.group({dataCategory:[null,Y.u.required],dataSubCategory:[null,Y.u.required]})}ActionTakenCheckboxChange(t){this.ActionTakenCheckboxValue=t.checked?1:0}onReadDocument(){this.bottomsheetRef=this.bottomsheet.open(J.a,{disableClose:!0,panelClass:["view-pdf-document-bottomsheet","bottomsheets"],data:{url:this.ComplaintEvidence.Base64,title:this.ComplaintEvidence.Name}})}disableFieldsByStatus(){this.application&&"NEW"!==this.application.status&&"STORED"!==this.application.status&&"ISSUED"===this.application.status&&this.disableAllControls()}disableAllControls(){this.complaintForm.disable()}onCommentChange(t){t&&(this.application.comments=t)}onPersonalDataChange(t){this.personalDataAffected=t}acceptData(t){this.personalDataAffected=t}formTriggler(t){switch(t){case"EDIT":case"CREATE":break;case"VIEW":this.isViewOnly=!0}}get getData(){return Object(C.a)(b)}getFormData(){const t=(this.complaintForm.get("dataSubjectName").value?this.complaintForm.get("dataSubjectName").value:"").split(" "),e=t[0],a=t[1];return console.log(t),{ComplainantFirstName:e,ComplainantLastName:a,ComplainantEmailAddress:this.complaintForm.get("dataSubjectEmail").value?this.complaintForm.get("dataSubjectEmail").value:"",ComplainantPhoneNumber:this.complaintForm.get("dataSubjectPhone").value?this.complaintForm.get("dataSubjectPhone").value:"",ComplainantPhysicalAddress:"",ComplainerCategory:"Individual",IsCustomerToOrganisation:"Yes",Organisation:this.complaintForm.get("OrganisationComplainedTo").value?this.complaintForm.get("OrganisationComplainedTo").value:"",ComplaintTrackingNo:this.ComplaintTrackingNumber,ComplaintEvidence:this.ComplaintEvidence.Base64?this.ComplaintEvidence.Base64:"",ContactFirstName:this.complaintForm.get("ContactFirstName").value?this.complaintForm.get("ContactFirstName").value:"",ContactLastName:this.complaintForm.get("ContactLastName").value?this.complaintForm.get("ContactLastName").value:"",ContactEmailAddress:this.complaintForm.get("ContactEmailAddress").value?this.complaintForm.get("ContactEmailAddress").value:"",ContactPhoneNumber:"",FullDetailsOfComplaint:this.complaintForm.get("complaintDetails").value?this.complaintForm.get("complaintDetails").value:"",PersonalDataAffected:this.personalDataFormGroup.get("dataCategory").value?this.personalDataFormGroup.get("dataCategory").value:""}}get getSampleJson(){return Object(C.a)(l)}get getSamplJson(){return Object(C.a)(p)}getComplaint(){this.complaintService.getComplaint(this.ComplaintTrackingNumber,this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent)}initForms(){this.personalDataFormGroup=this.formBuilder.group({dataCategory:[null,Y.u.required],dataSubCategory:[null,Y.u.required]})}markUnderInvestigation(){this.dialog.open(Gt,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,Status:5}}).afterClosed().subscribe(t=>{})}markAsResolved(){this.dialog.open(Gt,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,Status:6,isDirector:this.isDirector}})}onForward(){this.processing=!0,this.httpSub=this.http.post(this.endpoints.updateComplaintStatus,this.getFormData()).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{this.dialogRef=this.dialog.open(Vt.a,{panelClass:["forward-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:"Forwarded successfully",status:200===t.code}}),this.dialogRef.afterClosed().subscribe(()=>{this.allDialogRef.closeAll(),this.route.navigate(["/complaints/find"])}),this.processing=!1},t=>{this.processing=!1,t.error.message?this.dialogRef=this.dialog.open(Vt.a,{panelClass:["forward-message-dialog","dialogs"],disableClose:!0,data:{title:t.error.message.title?t.error.message.title:"Operation Failed",message:t.error.message.body?t.error.message.body:It.a.technicalErrorResponse,status:!1}}):this.service.determineErrorResponse(t)})}forwardComplaint(){let t;this.accesses.includes("resolve.technical.complaint")?t=3:this.accesses.includes("resolve.legal.complaint")&&(t=4),this.dialog.open(Gt,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,Status:t}})}moreInformation(){this.dialog.open(Yt,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber}}).afterClosed().subscribe(t=>{})}onSave(){const t=this.getFormData();console.log(t),this.processing=!0,this.httpSub=this.http.post(this.endpoints.updateComplaint,this.getFormData()).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{this.dialogRef=this.dialog.open(ee,{panelClass:["save-message-dialog","dialogs"],disableClose:!0,data:{title:"Save Message",message:"Edit saved successfully",status:200===t.code}}),this.dialogRef.afterClosed().subscribe(()=>{this.allDialogRef.closeAll(),this.route.navigate(["/complaints/find"])}),this.processing=!1},t=>{this.processing=!1,t.error.message?this.dialogRef=this.dialog.open(Vt.a,{panelClass:["forward-message-dialog","dialogs"],disableClose:!0,data:{title:t.error.message.title?t.error.message.title:"Operation Failed",message:t.error.message.body?t.error.message.body:It.a.technicalErrorResponse,status:!1}}):this.service.determineErrorResponse(t)})}ChildrenDataSubjectCategoryChange(t){if(t.checked)-1==this.DataSubjectsCategories.indexOf("children")&&this.DataSubjectsCategories.push("children"),console.log("here1");else{var e=this.DataSubjectsCategories.indexOf("children");-1!==e&&this.DataSubjectsCategories.splice(e,1)}}AdultDataSubjectCategoryChange(t){if(t.checked)-1==this.DataSubjectsCategories.indexOf("adults")&&this.DataSubjectsCategories.push("adults"),console.log("here1");else{var e=this.DataSubjectsCategories.indexOf("adults");-1!==e&&this.DataSubjectsCategories.splice(e,1)}}onSelectCategory(t){this.$subCategories=[],this.$dataCategories.find(e=>e===t.value).subCategories.forEach(t=>this.$subCategories.push(t)),this.personalDataFormGroup.get("dataSubCategory").enable()}disableSubCategories(){0===this.$subCategories.length&&this.personalDataFormGroup.get("dataSubCategory").disable()}sampleJson(){return Object(C.a)(Bt.a.map(t=>t))}onUploadAttachments(){this.dialogRef=this.dialog.open(Jt.a,{panelClass:["organisation-upload-dialog","dialogs"],disableClose:!0,data:{multiple:!1}}),this.dialogRef.afterClosed().subscribe(t=>{console.log("row:",t.row),t.status&&(this.ComplaintEvidence=t.row),console.log(this.ComplaintEvidence)})}manageRequestForMoreInfo(){this.httpSub=this.http.get(this.endpoints.CheckComplaintRequestForInfo+"?ComplaintTrackingNo="+this.ComplaintTrackingNumber).pipe(Object(Ut.a)(this.service.handleError)).subscribe(t=>{console.log(t.data.Comments),this.dialogRef=this.dialog.open(Wt,{width:"1391px",height:"595px",data:{ComplaintTrackingNumber:this.ComplaintTrackingNumber,RequestedInformation:t.data.Comments}}),this.dialogRef.afterClosed().subscribe(()=>{this.allDialogRef.closeAll(),this.route.navigate(["/complaints/find"])}),this.processing=!1},t=>{this.processing=!1,t.error.message?this.dialogRef=this.dialog.open(Ot.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:t.error.message.title?t.error.message.title:"Operation Failed",message:t.error.message.body?t.error.message.body:It.a.technicalErrorResponse,status:!1}}):this.service.determineErrorResponse(t)})}getRequestInfoData(){return{ComplaintTrackingNo:this.ComplaintTrackingNumber,RequestCategory:"Complaints"}}onPreviewForm(t){this.dialogRef=this.dialog.open(ne,{panelClass:["download-complaint-dialog","dialogs"],disableClose:!0,data:{download:t,row:this.application}})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(Y.d),n.Ob(o.a),n.Ob(o.f),n.Ob(I.b),n.Ob(Q.b),n.Ob(Rt.a),n.Ob(Dt.c),n.Ob(xt.a),n.Ob(I.b),n.Ob(P.c),n.Ob(Ht.a),n.Ob(Kt.a),n.Ob(P.c),n.Ob(R.a),n.Ob(x.a),n.Ob(U.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-complaints-edit"]],viewQuery:function(t,e){if(1&t&&n.Vc(re,!0),2&t){let t;n.zc(t=n.dc())&&(e.autosize=t.first)}},features:[n.zb],decls:138,vars:28,consts:[["mode","card"],["current","Manage",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],["class","actions-button-padding",4,"ngIf"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 1 auto"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],["fxFlex","2 1 auto",4,"ngIf"],["formControlName","ContactFirstName","matInput",""],["formControlName","ContactLastName","matInput",""],["formControlName","ContactEmailAddress","matInput",""],["formControlName","OrganisationComplainedTo","matInput",""],["fxFlex","2 1 auto",4,"ngIfOrganisation","ngIf"],[4,"ngIf"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["cols","4","rowHeight","4rem"],[4,"ngFor","ngForOf"],["fxFlex","2 1 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","complaintDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["formControlName","TechnicalForwardedComments","matInput","",3,"disabled"],["formControlName","LegalForwardedComments","matInput","",3,"disabled"],["cols","4","rowHeight","10rem","gutterSize","20px",4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/img/pdf.png","alt","",3,"ngStyle"],["class","no-document-found",4,"ngIf"],[1,"buttons"],["mat-button","","color","primary","matTooltip","Keep a copy of the information you have filled in",1,"download",3,"click"],[1,"button-label"],["mat-button","","color","primary","matTooltip","Have a look at all the information you have filled in before sending.",1,"preview",3,"click"],[1,"actions-button-padding"],[1,"example-spacer"],["mat-raised-button","","matTooltip","View Timeline","color","primary",1,"actions-button-padding",3,"disabled","click"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"disabled","ngStyle","click"],["mat-raised-button","","class","actions-button-padding","color","primary",3,"ngStyle","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"ngStyle","click"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"ngStyle","disabled","click"],["mat-raised-button","","matTooltip","View Timeline","color","primary",1,"actions-button-padding",3,"disabled","ngStyle","click"],["formControlName","ComplaintCategory","matInput",""],["value","Individual","matInput","",3,"disabled"],["formControlName","OrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedFrom","matInput",""],["formControlName","OtherOrganisationComplainedTo","matInput",""],[1,"no-document-found"],["mat-button","","color","primary",1,"add-item-button",3,"disabled","click"],["mat-button","","color","primary","class","remove-button",3,"disabled","click",4,"ngIf"],["class","uploaded-document","matTooltip","Open Document",3,"click",4,"ngIf"],["mat-button","","color","primary",1,"remove-button",3,"disabled","click"],["src","./assets/img/pdf.png","alt",""],["cols","4","rowHeight","10rem","gutterSize","20px"],["style","background-color: rgb(153, 216, 245)",4,"ngFor","ngForOf"],[2,"background-color","rgb(153, 216, 245)"]],template:function(t,e){1&t&&(n.Ub(0,"fury-page-layout",0),n.Ub(1,"fury-page-layout-header"),n.Pb(2,"fury-breadcrumbs",1),n.Tb(),n.Ub(3,"fury-page-layout-content",2),n.Pc(4,be,12,6,"div",3),n.Pc(5,ue,12,7,"div",3),n.Ub(6,"div",4),n.Ub(7,"fury-card",5),n.Ub(8,"fury-card-header"),n.Ub(9,"fury-card-header-heading"),n.Rc(10,"Complaint Information"),n.Tb(),n.Tb(),n.Ub(11,"fury-card-content",6),n.Ub(12,"form",7),n.Ub(13,"fieldset"),n.Ub(14,"legend"),n.Rc(15,"Data Subject Details"),n.Tb(),n.Ub(16,"div",8),n.Ub(17,"mat-form-field",9),n.Ub(18,"mat-label"),n.Rc(19,"Data subject name"),n.Tb(),n.Pb(20,"input",10),n.Tb(),n.Ub(21,"mat-form-field",9),n.Ub(22,"mat-label"),n.Rc(23,"Data Subject Email"),n.Tb(),n.Pb(24,"input",11),n.Tb(),n.Ub(25,"mat-form-field",9),n.Ub(26,"mat-label"),n.Rc(27,"Data Subject Phone"),n.Tb(),n.Pb(28,"input",12),n.Tb(),n.Tb(),n.Tb(),n.Ub(29,"fieldset"),n.Ub(30,"legend"),n.Rc(31,"Data Subject Organisation"),n.Tb(),n.Pc(32,ge,4,0,"mat-form-field",13),n.Pc(33,he,4,1,"mat-form-field",13),n.Pc(34,fe,4,0,"mat-form-field",13),n.Pc(35,Ce,4,0,"mat-form-field",13),n.Tb(),n.Ub(36,"fieldset"),n.Ub(37,"legend"),n.Rc(38,"Organisation Contact Person Details"),n.Tb(),n.Ub(39,"div",8),n.Ub(40,"mat-form-field",9),n.Ub(41,"mat-label"),n.Rc(42,"Contact First Name"),n.Tb(),n.Pb(43,"input",14),n.Tb(),n.Ub(44,"mat-form-field",9),n.Ub(45,"mat-label"),n.Rc(46,"Contact Last Name"),n.Tb(),n.Pb(47,"input",15),n.Tb(),n.Ub(48,"mat-form-field",9),n.Ub(49,"mat-label"),n.Rc(50,"Contact Email"),n.Tb(),n.Pb(51,"input",16),n.Tb(),n.Tb(),n.Tb(),n.Ub(52,"fieldset"),n.Ub(53,"legend"),n.Rc(54,"Details Organisation Complained To"),n.Tb(),n.Ub(55,"div",8),n.Ub(56,"mat-form-field",9),n.Ub(57,"mat-label"),n.Rc(58,"Organisation Complained To"),n.Tb(),n.Pb(59,"input",17),n.Tb(),n.Pc(60,Te,4,0,"mat-form-field",18),n.Tb(),n.Tb(),n.Pc(61,ve,7,1,"fieldset",19),n.Ub(62,"fieldset"),n.Ub(63,"legend"),n.Rc(64,"General Complaint Info"),n.Tb(),n.Ub(65,"div",20),n.Ub(66,"fieldset"),n.Ub(67,"legend"),n.Rc(68,"Complaint Reasons"),n.Tb(),n.Ub(69,"mat-label"),n.Rc(70,"Reasons for complaints"),n.Tb(),n.Ub(71,"mat-grid-list",21),n.Pc(72,Ue,1,0,"mat-grid-tile",22),n.Tb(),n.Tb(),n.Ub(73,"div",8),n.Ub(74,"mat-form-field",23),n.Ub(75,"mat-label"),n.Rc(76,"Complaint Details"),n.Tb(),n.Pb(77,"textarea",24,25),n.Tb(),n.Tb(),n.Pc(79,Pe,7,4,"fieldset",19),n.Pc(80,Fe,10,4,"fieldset",19),n.Tb(),n.Tb(),n.Ub(81,"fieldset"),n.Ub(82,"legend"),n.Rc(83,"Forwarded Comments"),n.Tb(),n.Ub(84,"div"),n.Ub(85,"div"),n.Ub(86,"mat-form-field",9),n.Ub(87,"mat-label"),n.Rc(88,"Technical Comments"),n.Tb(),n.Pb(89,"input",26),n.Tb(),n.Tb(),n.Ub(90,"div"),n.Ub(91,"mat-form-field",9),n.Ub(92,"mat-label"),n.Rc(93,"Legal Comments"),n.Tb(),n.Pb(94,"input",27),n.Tb(),n.Tb(),n.Ub(95,"fieldset"),n.Ub(96,"legend"),n.Rc(97,"More Information"),n.Tb(),n.Ub(98,"mat-label"),n.Rc(99,"Requested Information"),n.Tb(),n.Pc(100,Ee,3,1,"mat-grid-list",28),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(101,"fieldset"),n.Ub(102,"legend"),n.Rc(103,"Comments"),n.Tb(),n.Ub(104,"div",20),n.Ub(105,"fieldset"),n.Ub(106,"legend"),n.Rc(107,"Investigation Comments"),n.Tb(),n.Ub(108,"textarea",29,25),n.Rc(110),n.Tb(),n.Tb(),n.Ub(111,"fieldset"),n.Ub(112,"legend"),n.Rc(113,"Resolution Comments"),n.Tb(),n.Ub(114,"textarea",29,25),n.Rc(116),n.Tb(),n.Ub(117,"div"),n.Ub(118,"fieldset"),n.Ub(119,"legend"),n.Rc(120,"Resolution Document"),n.Tb(),n.Ub(121,"div",30),n.cc("click",function(){return e.onReadDocument()}),n.Pb(122,"img",31),n.Pc(123,Me,3,2,"span",19),n.Tb(),n.Pc(124,Le,2,0,"p",32),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(125,"div",33),n.Ub(126,"button",34),n.cc("click",function(){return e.onPreviewForm(!0)}),n.Ub(127,"div",35),n.Ub(128,"mat-icon"),n.Rc(129,"sim_card_download"),n.Tb(),n.Ub(130,"span"),n.Rc(131,"Download"),n.Tb(),n.Tb(),n.Tb(),n.Ub(132,"button",36),n.cc("click",function(){return e.onPreviewForm(!1)}),n.Ub(133,"div",35),n.Ub(134,"mat-icon"),n.Rc(135,"visibility"),n.Tb(),n.Ub(136,"span"),n.Rc(137,"Preview"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(2),n.nc("@fadeInRight",void 0)("crumbs",n.qc(26,_e)),n.Cb(1),n.nc("fxLayoutGap",e.gap),n.Cb(1),n.nc("ngIf",0==e.isDirector),n.Cb(1),n.nc("ngIf",1==e.isDirector),n.Cb(1),n.nc("fxLayoutGap",e.gap),n.Cb(1),n.nc("fxFlex.gt-sm",e.col2)("@fadeInUp",void 0),n.Cb(5),n.nc("formGroup",e.complaintForm),n.Cb(20),n.nc("ngIf",2==e.application.ComplaintSourceID),n.Cb(1),n.nc("ngIf",1==e.application.ComplaintSourceID),n.Cb(1),n.nc("ngIf","individual"===e.application.ComplainerCategory),n.Cb(1),n.nc("ngIf","individual"===e.application.ComplainerCategory),n.Cb(25),n.nc("ngIf",null==e.application.OrganisationComplainedToName),n.Cb(1),n.nc("ngIf",2==e.application.ComplaintSourceID),n.Cb(11),n.nc("ngForOf",e.complaintReasons),n.Cb(7),n.nc("ngIf",2==e.application.ComplaintSourceID),n.Cb(1),n.nc("ngIf",1==e.application.ComplaintSourceID),n.Cb(9),n.nc("disabled",!0),n.Cb(5),n.nc("disabled",!0),n.Cb(6),n.nc("ngIf",e.RequestedInforamationTrack.length>0),n.Cb(10),n.Sc(e.application.InvestigationComments),n.Cb(6),n.Sc(e.application.ResolutionComments),n.Cb(6),n.nc("ngStyle",n.qc(27,Ie)),n.Cb(1),n.nc("ngIf",e.document&&e.document.Name),n.Cb(1),n.nc("ngIf",e.document&&!e.document.Base64))},directives:[w.a,D.a,F.a,S.a,Z.d,Z.e,i.o,Z.b,Z.c,tt.a,tt.d,tt.g,tt.c,Y.v,Y.o,Y.h,et.d,et.h,Y.c,at.b,Y.n,Y.g,it.a,i.n,ot.b,nt.a,i.p,st.c,E.a,M.a,se.a,se.c,it.c,it.e,it.d],styles:[".source[_ngcontent-%COMP%]{margin-bottom:12px;margin-left:-24px;margin-right:-24px}.result[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:0 0 8px}.form-padding[_ngcontent-%COMP%]{padding-top:15px}.title[_ngcontent-%COMP%]{color:#fff}tr.mat-header-row[_ngcontent-%COMP%]{height:30px;background:#e0e0e0!important}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}fieldset[_ngcontent-%COMP%]{border-width:1px!important;border-color:#f5f5f5!important}.hide[_ngcontent-%COMP%]{display:none}legend[_ngcontent-%COMP%]{padding:5px}.copyright[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;color:#fff}"],data:{animation:[T.a,y.a,vt.a]}}),t})();const qe=["autosize"];function ze(t,e){1&t&&(n.Ub(0,"th",13),n.Ub(1,"mat-checkbox",14),n.cc("click",function(t){return t.stopPropagation()}),n.Tb(),n.Tb())}function $e(t,e){1&t&&(n.Ub(0,"td",15),n.Ub(1,"mat-checkbox",14),n.cc("click",function(t){return t.stopPropagation()}),n.Tb(),n.Tb())}function Ge(t,e){if(1&t&&(n.Ub(0,"th",20),n.Rc(1),n.Tb()),2&t){const t=n.gc(2).$implicit;n.Cb(1),n.Tc(" ",t.name,"")}}function Ve(t,e){if(1&t&&(n.Ub(0,"td",21),n.Rc(1),n.Tb()),2&t){const t=e.$implicit,a=n.gc(2).$implicit;n.Cb(1),n.Tc(" ",t[a.property]," ")}}function Be(t,e){if(1&t&&(n.Sb(0,17),n.Pc(1,Ge,2,1,"th",18),n.Pc(2,Ve,2,1,"td",19),n.Rb()),2&t){const t=n.gc().$implicit;n.nc("matColumnDef",t.property)}}function We(t,e){if(1&t&&(n.Sb(0),n.Pc(1,Be,3,1,"ng-container",16),n.Rb()),2&t){const t=e.$implicit;n.Cb(1),n.nc("ngIf",t.isModelProperty)}}function He(t,e){1&t&&n.Pb(0,"th",22)}function Ke(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",15),n.Ub(1,"button",23),n.cc("click",function(t){return t.stopPropagation()}),n.Ub(2,"mat-icon"),n.Rc(3,"more_vert"),n.Tb(),n.Tb(),n.Ub(4,"mat-menu",24,25),n.Ub(6,"button",26),n.cc("click",function(a){n.Ec(t);const i=e.$implicit;return n.gc().manageComplaint(i,a)}),n.Ub(7,"mat-icon"),n.Rc(8,"settings"),n.Tb(),n.Ub(9,"span"),n.Rc(10,"Manage"),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.Ac(5);n.Cb(1),n.nc("matMenuTriggerFor",t)}}function Xe(t,e){1&t&&n.Pb(0,"tr",27)}function Ye(t,e){1&t&&n.Pb(0,"tr",28)}const Je=function(){return["Complaints"]},Qe=[{path:"find",component:X,canActivate:[yt.a],data:{roles:["view.complaint","find.complaint"],action:"FIND"}},{path:"pending-tasks",component:(()=>{class t extends v.a{constructor(t,e,a,i,o,s,r,c){super(a,o,s,r),this.dialog=t,this.route=e,this.authService=a,this.router=i,this._workflowService=o,this.registrationService=s,this.complaintService=r,this.routingService=c,this.subject$=new f.a(1),this.data$=this.subject$.asObservable(),this.$processingEvent=new n.o,this.$errorsEvent=new n.o,this.$resultComplaintsEvent=new n.o,this.statusList=[],this.pageIndex=this.routingService.complaintsTablePageIndex,this.pageSize=10,this.subscriptions=[],this.statuses=[{code:"001",description:"Form 9"},{code:"002",description:"FORM 6"},{code:"003",description:"FORM 11"}],this.columns=[{name:"Complaint Tracking Number",property:"ComplaintTrackingNo",visible:!0,isModelProperty:!0},{name:"Complaint Source",property:"ComplaintSourceName",visible:!0,isModelProperty:!0},{name:"Type of Complaint",property:"FormName",visible:!0,isModelProperty:!0},{name:"Email Address",property:"EmailAddress",visible:!0,isModelProperty:!0},{name:"First Name",property:"FirstName",visible:!0,isModelProperty:!0},{name:"Last Name",property:"LastName",visible:!0,isModelProperty:!0},{name:"Phone Number",property:"PhoneNumber",visible:!0,isModelProperty:!0},{name:"Have Complained to Organisation?",property:"HaveComplainedToOrganisationAlready",visible:!0,isModelProperty:!0},{name:"Organisation Complained To",property:"OrganisationComplainedToName",visible:!0,isModelProperty:!0},{name:"Complaint Timeline",property:"Status",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.dataSource=new u.o}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){return Object(C.a)(m.map(t=>new r(t)))}ngOnInit(){console.log(this.authService.getKeycloakInstance()),this.realmRole=this.authService.getKeycloakInstance().realmAccess.roles[0],console.log(this.realmRole),console.log(this.pageIndex),this.dataSource.paginator=this.paginator,this.getComplaints(),console.log(this.getComplaints),this.route.paramMap.subscribe(t=>{console.log(t.has("navigationPrams"))}),this.statusList=this.getGenericDDL(this.statuses,{key:"code",label:"description"},!1),this.defineSearchFields()}ngAfterViewInit(){setTimeout(()=>{this.paginator.pageIndex=this.pageIndex,this.subscriptions.$resultComplaintsEvent=this.$resultComplaintsEvent.subscribe(t=>{t?(this.complaints=t,this.dataSource.data=t,this.isLoaded=!0):console.log("expected")})},0)}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}defineSearchFields(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:d.e,dataType:d.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:d.e,dataType:d.a.TEXT},{label:"Form Types",fieldName:"Form",operators:d.d,dataType:d.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:d.e,dataType:d.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:d.e,dataType:d.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:d.c,dataType:d.a.DATETIME}]}getComplaints(){this.complaintService.getComplaintPendingTasks(this.$processingEvent,this.$resultComplaintsEvent,this.$errorsEvent,this.realmRole)}viewComplaint(t){this.router.navigate(["/complaints/view-complaint"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo}}).then()}manageComplaint(t){this.routingService.complaintsTablePageIndex=this.pageIndex,this.router.navigate(["/complaints/complaints-edit"],{state:{ComplaintTrackingNumber:t.ComplaintTrackingNo,ComplaintSourceID:t.ComplaintSourceID}}).then()}onPaginateChange(t){this.pageIndex=t.pageIndex,console.log(this.pageIndex)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(I.b),n.Ob(o.a),n.Ob(P.c),n.Ob(o.f),n.Ob(R.a),n.Ob(x.a),n.Ob(U.a),n.Ob(O.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["fury-complaint-pending-tasks"]],viewQuery:function(t,e){if(1&t&&(n.Kc(g.a,!0),n.Kc(h.a,!0),n.Vc(qe,!0)),2&t){let t;n.zc(t=n.dc())&&(e.paginator=t.first),n.zc(t=n.dc())&&(e.sort=t.first),n.zc(t=n.dc())&&(e.autosize=t.first)}},inputs:{columns:"columns"},features:[n.zb],decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Complaints","finderDialogTitle","Complaints Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","page"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(n.Ub(0,"fury-page-layout",0),n.Ub(1,"fury-page-layout-header"),n.Pb(2,"fury-breadcrumbs",1),n.Tb(),n.Ub(3,"fury-page-layout-content"),n.Ub(4,"fury-list",2),n.cc("filterChange",function(t){return e.onFilterChange(t)}),n.Ub(5,"table",3),n.Sb(6,4),n.Pc(7,ze,2,0,"th",5),n.Pc(8,$e,2,0,"td",6),n.Rb(),n.Pc(9,We,2,1,"ng-container",7),n.Sb(10,8),n.Pc(11,He,1,0,"th",9),n.Pc(12,Ke,11,1,"td",6),n.Rb(),n.Pc(13,Xe,1,0,"tr",10),n.Pc(14,Ye,1,0,"tr",11),n.Tb(),n.Ub(15,"mat-paginator",12),n.cc("page",function(t){return e.onPaginateChange(t)}),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Cb(2),n.nc("@fadeInRight",void 0)("crumbs",n.qc(10,Je)),n.Cb(1),n.nc("@fadeInUp",void 0),n.Cb(1),n.nc("columns",e.columns)("searchFields",e.searchFields),n.Cb(1),n.nc("dataSource",e.dataSource),n.Cb(4),n.nc("ngForOf",e.columns),n.Cb(4),n.nc("matHeaderRowDef",e.visibleColumns),n.Cb(1),n.nc("matRowDefColumns",e.visibleColumns),n.Cb(1),n.nc("pageSize",e.pageSize))},directives:[w.a,D.a,F.a,S.a,N.a,u.n,h.a,u.c,u.i,u.b,i.n,u.k,u.m,g.a,u.h,k.a,u.a,i.o,h.b,E.a,A.e,M.a,A.a,A.c,o.h,u.j,u.l],styles:[""],data:{animation:[T.a,y.a]}}),t})(),canActivate:[yt.a],data:{roles:["view.complaint","find.complaint"],action:"FIND"}},{path:"view-complaint",component:Tt,canActivate:[yt.a],data:{roles:["view.complaint"],action:"VIEW"}},{path:"complaints-edit",component:je,canActivate:[yt.a],data:{roles:["view.complaint"],action:"VIEW"}}];let Ze=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(Qe)],o.j]}),t})();var ta=a("q8Jb"),ea=a("WCGO"),aa=a("0jmt"),ia=a("6BeY"),oa=a("KthW"),na=a("AyUp"),sa=a("QMK6"),ra=a("VE2z"),ca=a("hVPj"),la=a("VCcF");let ma=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[u.p,i.c,Ze,oa.a,ea.a,na.a,Y.s,la.a,it.b,aa.a,ca.a,sa.a,ra.a,ia.a,ta.a]]}),t})()}}]);