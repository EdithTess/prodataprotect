!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"6BeY":function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n("ofXK"),a=n("YUcS"),o=n("3Pt+"),s=n("bTqV"),c=n("0IaG"),u=n("NFeN"),l=n("qFsG"),b=n("QibW"),m=n("d3UM"),g=n("fXoL"),d=function(){var t=function t(){r(this,t)};return t.\u0275mod=g.Mb({type:t}),t.\u0275inj=g.Lb({factory:function(e){return new(e||t)},imports:[[i.c,o.i,o.s,a.a,c.f,l.c,s.b,u.b,b.c,m.b]]}),t}()},"8JRu":function(t,i,o){"use strict";o.r(i),o.d(i,"InvestigationsModule",function(){return de});var s,c=o("ofXK"),u=o("tyNb"),l=o("fXoL"),b=o("0/vc"),m=o("pbD1"),g=o("+0xr"),d=o("M9IT"),f=o("Dh3D"),p=o("jtHE"),v=o("3eU1"),h=o("j7tn"),T=o("3fLY"),C=o("WVpI"),U=o("AytR"),y=o("aTx8"),I=o("tk/3"),R=((s=function(t){n(o,t);var i=a(o);function o(t,e){var n;return r(this,o),(n=i.call(this)).auth=t,n.http=e,n.baseAPIUri=U.a.backend,n.httpUtils=new T.a(t,e),n}return e(o,[{key:"getInvestigations",value:function(t,e,n){return this.httpUtils.invokeGet(this.baseAPIUri+"v1.0/investigations",t,e,n,this.handleError)}},{key:"getInvestigation",value:function(t,e,n,i){return this.httpUtils.invokeGet(this.baseAPIUri+"v1.0/investigations/single?InvestigationTrackingNo="+t,e,n,i,this.handleError)}},{key:"updateInvestigationStatus",value:function(t,e,n){}}]),o}(C.a)).\u0275fac=function(t){return new(t||s)(l.Yb(y.c),l.Yb(I.c))},s.\u0275prov=l.Kb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),k=o("2nsv"),x=(o("6xCn"),o("0IaG")),O=o("xBcV"),w=o("Hbgg"),P=o("rnAf"),D=o("rvYj"),N=o("a+RD"),S=o("bSwM"),F=o("bTqV"),A=o("STbY"),M=o("NFeN"),E=["autosize"];function z(t,e){1&t&&(l.Ub(0,"th",13),l.Ub(1,"mat-checkbox",14),l.cc("click",function(t){return t.stopPropagation()}),l.Tb(),l.Tb())}function L(t,e){1&t&&(l.Ub(0,"td",15),l.Ub(1,"mat-checkbox",14),l.cc("click",function(t){return t.stopPropagation()}),l.Tb(),l.Tb())}function j(t,e){if(1&t&&(l.Ub(0,"th",20),l.Rc(1),l.Tb()),2&t){var n=l.gc(2).$implicit;l.Cb(1),l.Tc(" ",n.name,"")}}function _(t,e){if(1&t&&(l.Ub(0,"td",21),l.Rc(1),l.Tb()),2&t){var n=e.$implicit,i=l.gc(2).$implicit;l.Cb(1),l.Tc(" ",n[i.property]," ")}}function q(t,e){if(1&t&&(l.Sb(0,17),l.Pc(1,j,2,1,"th",18),l.Pc(2,_,2,1,"td",19),l.Rb()),2&t){var n=l.gc().$implicit;l.nc("matColumnDef",n.property)}}function G(t,e){if(1&t&&(l.Sb(0),l.Pc(1,q,3,1,"ng-container",16),l.Rb()),2&t){var n=e.$implicit;l.Cb(1),l.nc("ngIf",n.isModelProperty)}}function V(t,e){1&t&&l.Pb(0,"th",22)}function $(t,e){if(1&t){var n=l.Vb();l.Ub(0,"td",15),l.Ub(1,"button",23),l.cc("click",function(t){return t.stopPropagation()}),l.Ub(2,"mat-icon"),l.Rc(3,"more_vert"),l.Tb(),l.Tb(),l.Ub(4,"mat-menu",24,25),l.Ub(6,"button",26),l.cc("click",function(){l.Ec(n);var t=e.$implicit;return l.gc().manageInvestigation(t)}),l.Ub(7,"mat-icon"),l.Rc(8,"settings"),l.Tb(),l.Ub(9,"span"),l.Rc(10,"Manage"),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var i=l.Ac(5);l.Cb(1),l.nc("matMenuTriggerFor",i)}}function B(t,e){1&t&&l.Pb(0,"tr",27)}function X(t,e){1&t&&l.Pb(0,"tr",28)}var H,Y=function(){return["Investigations"]},K=((H=function(){function t(e,n,i,a,o,s,c){r(this,t),this.dialog=e,this.route=n,this.authService=i,this.router=a,this._workflowService=o,this.registrationService=s,this.investigationService=c,this.subject$=new p.a(1),this.data$=this.subject$.asObservable(),this.$processingEvent=new l.o,this.$errorsEvent=new l.o,this.$resultInvestigationsEvent=new l.o,this.statusList=[],this.subscriptions=[],this.workflowID="1",this.columns=[{name:"Investigation ID",property:"InvestigationID",isModelProperty:!0,visible:!1},{name:"Investigation Tracking Number",property:"InvestigationTrackingNo",visible:!0,isModelProperty:!0},{name:"Organisation",property:"Organisation",visible:!0,isModelProperty:!0},{name:"Type of Investigation",property:"InvestigationType",visible:!0,isModelProperty:!0},{name:"Investigation Status",property:"InvestigationStatus",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.dataSource=new g.o,console.log("here"),this.getInvestigations(),console.log(this.getInvestigations),this.subscriptions.$resultInvestigationsEvent=this.$resultInvestigationsEvent.subscribe(function(e){e?(t.investigations=e,t.dataSource.data=e):console.log("expected")}),this.route.paramMap.subscribe(function(t){console.log(t.has("navigationPrams"))}),this.defineSearchFields()}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"onFilterChange",value:function(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}},{key:"ngOnDestroy",value:function(){}},{key:"defineSearchFields",value:function(){this.searchFields=[{label:"Complaint reference #",fieldName:"complaintReference",operators:m.e,dataType:m.a.TEXT},{label:"Data subject",fieldName:"subjectNames",operators:m.e,dataType:m.a.TEXT},{label:"Form Types",fieldName:"Form",operators:m.d,dataType:m.a.TEXT,lookupOptions:this.statusList,multiple:!0},{label:"Reason for the complaint",fieldName:"type",operators:m.e,dataType:m.a.TEXT},{label:"Filed Against",fieldName:"compliantAgainst",operators:m.e,dataType:m.a.TEXT},{label:"Registration date",fieldName:"registrationDate",operators:m.c,dataType:m.a.DATETIME}]}},{key:"getInvestigations",value:function(){this.investigationService.getInvestigations(this.$processingEvent,this.$resultInvestigationsEvent,this.$errorsEvent)}},{key:"viewInvestigation",value:function(t){this.router.navigate(["/investigations/view-investigation"],{state:{InvestigationTrackingNumber:t.InvestigationTrackingNo}}).then()}},{key:"manageInvestigation",value:function(t){this.router.navigate(["/investigations/investigations-edit"],{state:{InvestigationTrackingNumber:t.InvestigationTrackingNo,InvestigationID:t.InvestigationID}}).then()}},{key:"viewApplicationTimeLine",value:function(){this.dialog.open(k.a,{width:"941px",height:"595px",data:this.workflowTimeLine})}},{key:"visibleColumns",get:function(){return this.columns.filter(function(t){return t.visible}).map(function(t){return t.property})}}]),t}()).\u0275fac=function(t){return new(t||H)(l.Ob(x.b),l.Ob(u.a),l.Ob(y.c),l.Ob(u.f),l.Ob(v.a),l.Ob(h.a),l.Ob(R))},H.\u0275cmp=l.Ib({type:H,selectors:[["fury-investigations-find"]],viewQuery:function(t,e){var n;1&t&&(l.Kc(d.a,!0),l.Kc(f.a,!0),l.Vc(E,!0)),2&t&&(l.zc(n=l.dc())&&(e.paginator=n.first),l.zc(n=l.dc())&&(e.sort=n.first),l.zc(n=l.dc())&&(e.autosize=n.first))},inputs:{columns:"columns"},decls:16,vars:11,consts:[["mode","card"],["current","Find",3,"crumbs"],["name","Investigations","finderDialogTitle","Investigations Finder",3,"columns","searchFields","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(l.Ub(0,"fury-page-layout",0),l.Ub(1,"fury-page-layout-header"),l.Pb(2,"fury-breadcrumbs",1),l.Tb(),l.Ub(3,"fury-page-layout-content"),l.Ub(4,"fury-list",2),l.cc("filterChange",function(t){return e.onFilterChange(t)}),l.Ub(5,"table",3),l.Sb(6,4),l.Pc(7,z,2,0,"th",5),l.Pc(8,L,2,0,"td",6),l.Rb(),l.Pc(9,G,2,1,"ng-container",7),l.Sb(10,8),l.Pc(11,V,1,0,"th",9),l.Pc(12,$,11,1,"td",6),l.Rb(),l.Pc(13,B,1,0,"tr",10),l.Pc(14,X,1,0,"tr",11),l.Tb(),l.Pb(15,"mat-paginator",12),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(2),l.nc("@fadeInRight",void 0)("crumbs",l.qc(10,Y)),l.Cb(1),l.nc("@fadeInUp",void 0),l.Cb(1),l.nc("columns",e.columns)("searchFields",e.searchFields),l.Cb(1),l.nc("dataSource",e.dataSource),l.Cb(4),l.nc("ngForOf",e.columns),l.Cb(4),l.nc("matHeaderRowDef",e.visibleColumns),l.Cb(1),l.nc("matRowDefColumns",e.visibleColumns),l.Cb(1),l.nc("pageSize",e.pageSize))},directives:[O.a,w.a,P.a,D.a,N.a,g.n,f.a,g.c,g.i,g.b,c.n,g.k,g.m,d.a,g.h,S.a,g.a,c.o,f.b,F.a,A.e,M.a,A.a,A.c,u.h,g.j,g.l],styles:[""]}),H),Q=o("sF9m"),W=o("3Pt+"),J=o("M2Gj"),Z=o("LRne"),tt=o("r9HN"),et=(o("+eXY"),o("7R0Y")),nt=o("JIr8"),it=o("H+bZ"),at=(o("CKU1"),o("YStQ")),ot=o("UjNt"),st=o("XiUz"),rt=o("kmnG"),ct=o("qFsG"),ut=o("ihCf"),lt=o("znSr"),bt=o("Qu3c");function mt(t,e){if(1&t){var n=l.Vb();l.Ub(0,"button",13),l.cc("click",function(){return l.Ec(n),l.gc().onRemoveDocument()}),l.Ub(1,"div",9),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Ub(4,"span"),l.Rc(5," Remove Document "),l.Tb(),l.Tb(),l.Tb()}}function gt(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",14),l.cc("click",function(){l.Ec(n);var t=l.gc();return t.onReadDocument(t.evidenceDocument)}),l.Pb(1,"img",15),l.Ub(2,"span"),l.Rc(3),l.Ub(4,"span"),l.Rc(5),l.Tb(),l.Tb(),l.Tb()}if(2&t){var i=l.gc();l.Cb(3),l.Tc("",null==i.evidenceDocument?null:i.evidenceDocument.Name," "),l.Cb(2),l.Tc(" - ",null==i.evidenceDocument?null:i.evidenceDocument.Size," Mbs")}}var dt,ft=function(){return{"margin-bottom":"20px","margin-top":"20px","background-color":"#ABC334",color:"#000"}},pt=((dt=function(){function t(e,n,i,a,o,s,c,u){r(this,t),this.fb=e,this.endpoints=n,this.http=i,this.service=a,this.dialog=o,this.route=s,this.allDialogRef=c,this.parent_data=u,this.InvestigationCommentsFormGroup=this.fb.group({Comments:["",W.u.compose([W.u.required])]}),this.$processingEvent=new l.o,this.$errorsEvent=new l.o,this.processing=!1}return e(t,[{key:"ngOnInit",value:function(){}},{key:"onUploadAttachments",value:function(){var t=this;this.dialogRef=this.dialog.open(ot.a,{panelClass:["resolution-upload-dialog","dialogs"],disableClose:!0,data:{multiple:!1,maxSize:3}}),this.dialogRef.afterClosed().subscribe(function(e){e.status&&(t.evidenceDocument=e.row,console.log(t.evidenceDocument))})}},{key:"getFormData",value:function(){return{ClosingRemarks:this.InvestigationCommentsFormGroup.get("Comments").value,InvestigationTrackingNo:this.parent_data.InvestigationTrackingNumber,InvestigationStatus:this.parent_data.Status,User:this.parent_data.ClosingRemarksOwner,EvidenceFile:""}}},{key:"onSubmit",value:function(){var t=this;this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.updateInvestigationStatus,this.getFormData()).pipe(Object(nt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Complaint Status",message:e.message,status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/complaints/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:U.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}}]),t}()).\u0275fac=function(t){return new(t||dt)(l.Ob(W.d),l.Ob(et.a),l.Ob(I.c),l.Ob(it.a),l.Ob(x.b),l.Ob(u.f),l.Ob(x.b),l.Ob(x.a))},dt.\u0275cmp=l.Ib({type:dt,selectors:[["fury-investigation-comments"]],decls:25,vars:6,consts:[[2,"padding","10px"],["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","Comments","cdkAutosizeMaxRows","10","formControlName","Comments"],[1,"buttons"],["mat-button","","color","primary",1,"add-item-button",3,"ngStyle","click"],[1,"button-label"],["mat-button","","color","primary","class","remove-button",3,"click",4,"ngIf"],["class","uploaded-document","matTooltip","Open Document",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",1,"remove-button",3,"click"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/images/pdf.png","alt",""]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Rc(2,"Make Comments"),l.Tb(),l.Ub(3,"form",2),l.Ub(4,"mat-dialog-content"),l.Ub(5,"div",3),l.Ub(6,"div",4),l.Ub(7,"mat-form-field",5),l.Ub(8,"mat-label"),l.Rc(9,"Provide Comments"),l.Tb(),l.Pb(10,"textarea",6),l.Ub(11,"mat-hint"),l.Rc(12,"Review Comments"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"section"),l.Ub(14,"div",7),l.Ub(15,"button",8),l.cc("click",function(){return e.onUploadAttachments()}),l.Ub(16,"div",9),l.Ub(17,"span"),l.Rc(18),l.Tb(),l.Tb(),l.Tb(),l.Pc(19,mt,6,0,"button",10),l.Tb(),l.Pc(20,gt,6,2,"div",11),l.Tb(),l.Ub(21,"button",12),l.cc("click",function(){return e.onSubmit()}),l.Ub(22,"span"),l.Rc(23,"Submit"),l.Tb(),l.Tb(),l.Rc(24,"\xa0 "),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.nc("formGroup",e.InvestigationCommentsFormGroup),l.Cb(12),l.nc("ngStyle",l.qc(5,ft)),l.Cb(3),l.Tc(" ",e.evidenceDocument?"Replace Document":"Upload A Document"," "),l.Cb(1),l.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Name),l.Cb(1),l.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Base64))},directives:[x.h,W.v,W.o,W.h,x.e,st.d,st.e,rt.d,st.b,rt.h,ct.b,ut.b,W.c,W.n,W.g,rt.g,F.a,c.p,lt.c,c.o,M.a,bt.a],styles:[""]}),dt),vt=o("zqeb"),ht=o("aViL"),Tt=o("aYi0");function Ct(t,e){if(1&t){var n=l.Vb();l.Ub(0,"button",13),l.cc("click",function(){return l.Ec(n),l.gc().onRemoveDocument()}),l.Ub(1,"div",9),l.Ub(2,"mat-icon"),l.Rc(3,"clear"),l.Tb(),l.Ub(4,"span"),l.Rc(5," Remove Document "),l.Tb(),l.Tb(),l.Tb()}}function Ut(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",14),l.cc("click",function(){l.Ec(n);var t=l.gc();return t.onReadDocument(t.evidenceDocument)}),l.Pb(1,"img",15),l.Ub(2,"span"),l.Rc(3),l.Ub(4,"span"),l.Rc(5),l.Tb(),l.Tb(),l.Tb()}if(2&t){var i=l.gc();l.Cb(3),l.Tc("",null==i.evidenceDocument?null:i.evidenceDocument.Name," "),l.Cb(2),l.Tc(" - ",null==i.evidenceDocument?null:i.evidenceDocument.Size," Mbs")}}var yt,It,Rt,kt=function(){return{"margin-bottom":"20px","margin-top":"20px","background-color":"#ABC334",color:"#000"}},xt=((yt=function(){function t(e,n,i,a,o,s,c,u){r(this,t),this.fb=e,this.endpoints=n,this.http=i,this.service=a,this.dialog=o,this.route=s,this.allDialogRef=c,this.parent_data=u,this.InvestigationCommentsFormGroup=this.fb.group({}),this.$processingEvent=new l.o,this.$errorsEvent=new l.o,this.$resultComplaintsEvent=new l.o,this.processing=!1}return e(t,[{key:"ngOnInit",value:function(){this.InvestigationCommentsFormGroup=this.fb.group({Comments:new W.e("",[W.u.required])}),console.log(this.parent_data)}},{key:"getFormData",value:function(){return{Notes:this.InvestigationCommentsFormGroup.get("Comments").value,InvestigationTrackingNo:this.parent_data.InvestigationTrackingNumber,InvestigationStatus:this.parent_data.Status,InvestigationEvidenceFile:"",RequestInformation:0,RequestInformtationQuery:"",EvidenceOwner:this.parent_data.EvidenceOwner}}},{key:"onSubmit",value:function(){var t=this;this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.makeInvestigationNotes,this.getFormData()).pipe(Object(nt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Make Investigation Notes",message:e.message,status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/investigations/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:U.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}},{key:"onUploadAttachments",value:function(){var t=this;this.dialogRef=this.dialog.open(ot.a,{panelClass:["resolution-upload-dialog","dialogs"],disableClose:!0,data:{multiple:!1,maxSize:3}}),this.dialogRef.afterClosed().subscribe(function(e){e.status&&(t.evidenceDocument=e.row,console.log(t.evidenceDocument))})}}]),t}()).\u0275fac=function(t){return new(t||yt)(l.Ob(W.d),l.Ob(et.a),l.Ob(I.c),l.Ob(it.a),l.Ob(x.b),l.Ob(u.f),l.Ob(x.b),l.Ob(x.a))},yt.\u0275cmp=l.Ib({type:yt,selectors:[["fury-investigation-notes"]],decls:25,vars:6,consts:[[2,"padding","10px"],["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],[1,"buttons"],["mat-button","","color","primary",1,"add-item-button",3,"ngStyle","click"],[1,"button-label"],["mat-button","","color","primary","class","remove-button",3,"click",4,"ngIf"],["class","uploaded-document","matTooltip","Open Document",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",1,"remove-button",3,"click"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/images/pdf.png","alt",""]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Rc(2,"Make Investigation Notes"),l.Tb(),l.Ub(3,"form",2),l.Ub(4,"mat-dialog-content"),l.Ub(5,"div",3),l.Ub(6,"div",4),l.Ub(7,"mat-form-field",5),l.Ub(8,"mat-label"),l.Rc(9,"Provide Notes"),l.Tb(),l.Pb(10,"textarea",6),l.Ub(11,"mat-hint"),l.Rc(12,"Review Notes"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"section"),l.Ub(14,"div",7),l.Ub(15,"button",8),l.cc("click",function(){return e.onUploadAttachments()}),l.Ub(16,"div",9),l.Ub(17,"span"),l.Rc(18),l.Tb(),l.Tb(),l.Tb(),l.Pc(19,Ct,6,0,"button",10),l.Tb(),l.Pc(20,Ut,6,2,"div",11),l.Tb(),l.Ub(21,"button",12),l.cc("click",function(){return e.onSubmit()}),l.Ub(22,"span"),l.Rc(23,"Submit"),l.Tb(),l.Tb(),l.Rc(24,"\xa0 "),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.nc("formGroup",e.InvestigationCommentsFormGroup),l.Cb(12),l.nc("ngStyle",l.qc(5,kt)),l.Cb(3),l.Tc(" ",e.evidenceDocument?"Replace Document":"Upload A Document"," "),l.Cb(1),l.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Name),l.Cb(1),l.nc("ngIf",null==e.evidenceDocument?null:e.evidenceDocument.Base64))},directives:[x.h,W.v,W.o,W.h,x.e,st.d,st.e,rt.d,st.b,rt.h,ct.b,ut.b,W.c,W.n,W.g,rt.g,F.a,c.p,lt.c,c.o,M.a,bt.a],styles:[""]}),yt),Ot=function(){return{"text-align":"center"}},wt=((It=function(){function t(e,n,i,a,o,s,c,u){r(this,t),this.fb=e,this.endpoints=n,this.http=i,this.service=a,this.dialog=o,this.route=s,this.allDialogRef=c,this.parent_data=u,this.processing=!1,this.InvestigationCommentsFormGroup=this.fb.group({})}return e(t,[{key:"ngOnInit",value:function(){this.InvestigationCommentsFormGroup=this.fb.group({Comments:new W.e("",[W.u.required]),InvestigationForwardedComments:new W.e("")}),this.InvestigationCommentsFormGroup.get("InvestigationForwardedComments").setValue(this.parent_data.TechnicalComments)}},{key:"getInvestigationData",value:function(){return{InvestigationTrackingNo:this.parent_data.InvestigationTrackingNumber,InvestigationStatus:this.parent_data.Status,User:this.parent_data.User,ClosingRemarks:"",ClosingRemarksOwner:this.parent_data.User}}},{key:"onSubmit",value:function(){var t=this;(this.processing=!0)&&(console.log("Comments:",this.getInvestigationData()),this.httpSub=this.http.post(this.endpoints.updateInvestigationStatus,this.getInvestigationData()).pipe(Object(nt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Investigation Status",message:"Investigation forwarded successfully",status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/investigations/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:U.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)}))}},{key:"onCancel",value:function(){var t=this;this.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/investigations/manage"])})}}]),t}()).\u0275fac=function(t){return new(t||It)(l.Ob(W.d),l.Ob(et.a),l.Ob(I.c),l.Ob(it.a),l.Ob(x.b),l.Ob(u.f),l.Ob(x.b),l.Ob(x.a))},It.\u0275cmp=l.Ib({type:It,selectors:[["fury-forward-investigations"]],decls:15,vars:5,consts:[[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content",3,"ngStyle"],[3,"ngStyle"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"div"),l.Ub(1,"form",0),l.Ub(2,"mat-dialog-content"),l.Ub(3,"div",1),l.Ub(4,"p"),l.Rc(5,"Are you sure you want to forward?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(6,"div",2),l.Ub(7,"button",3),l.cc("click",function(){return e.onCancel()}),l.Ub(8,"span"),l.Rc(9,"Cancel"),l.Tb(),l.Tb(),l.Rc(10,"\xa0 "),l.Ub(11,"button",3),l.cc("click",function(){return e.onSubmit()}),l.Ub(12,"span"),l.Rc(13,"Confirm"),l.Tb(),l.Tb(),l.Rc(14,"\xa0 "),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.nc("formGroup",e.InvestigationCommentsFormGroup),l.Cb(2),l.nc("ngStyle",l.qc(3,Ot)),l.Cb(3),l.nc("ngStyle",l.qc(4,Ot)))},directives:[W.v,W.o,W.h,x.e,st.d,st.e,c.p,lt.c,F.a],styles:[""]}),It),Pt=o("9Ku7"),Dt=((Rt=function(){function t(e,n,i,a,o,s,c,u){r(this,t),this.fb=e,this.endpoints=n,this.http=i,this.service=a,this.dialog=o,this.route=s,this.allDialogRef=c,this.parent_data=u,this.processing=!1,this.InvestigationFormGroup=this.fb.group({})}return e(t,[{key:"ngOnInit",value:function(){this.InvestigationFormGroup=this.fb.group({Comments:new W.e("",[W.u.required]),Status:new W.e("",[W.u.required])})}},{key:"getFormData",value:function(){return{Comments:this.InvestigationFormGroup.get("Comments").value,InvestigationTrackingNo:this.parent_data.InvestigationTrackingNumber,Status:parseInt(this.InvestigationFormGroup.get("Status").value)}}},{key:"onSubmit",value:function(){var t=this;this.processing=!0,console.log("Comments:",this.getFormData()),this.httpSub=this.http.post(this.endpoints.updateInvestigationStatus,this.getFormData()).pipe(Object(nt.a)(this.service.handleError)).subscribe(function(e){t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:"Update Investigation Status",message:"More information required successfully",status:200===e.code}}),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/investigations/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message?t.dialogRef=t.dialog.open(at.a,{panelClass:["successful-message-dialog","dialogs"],disableClose:!0,data:{title:e.error.message.title?e.error.message.title:"Operation Failed",message:e.error.message.body?e.error.message.body:U.a.technicalErrorResponse,status:!1}}):t.service.determineErrorResponse(e)})}}]),t}()).\u0275fac=function(t){return new(t||Rt)(l.Ob(W.d),l.Ob(et.a),l.Ob(I.c),l.Ob(it.a),l.Ob(x.b),l.Ob(u.f),l.Ob(x.b),l.Ob(x.a))},Rt.\u0275cmp=l.Ib({type:Rt,selectors:[["fury-gather-more-information"]],decls:17,vars:1,consts:[[3,"formGroup"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","formControlName","comments","cdkAutosizeMaxRows","10","formControlName","Comments"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"div"),l.Ub(1,"form",0),l.Ub(2,"mat-dialog-content"),l.Ub(3,"div",1),l.Ub(4,"div",2),l.Ub(5,"mat-form-field",3),l.Ub(6,"mat-label"),l.Rc(7,"What more information is needed"),l.Tb(),l.Pb(8,"textarea",4),l.Ub(9,"mat-hint"),l.Rc(10,"Request more Information"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(11,"br"),l.Ub(12,"div"),l.Ub(13,"button",5),l.cc("click",function(){return e.onSubmit()}),l.Ub(14,"span"),l.Rc(15,"Submit"),l.Tb(),l.Tb(),l.Rc(16,"\xa0 "),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(1),l.nc("formGroup",e.InvestigationFormGroup))},directives:[W.v,W.o,W.h,x.e,st.d,st.e,rt.d,st.b,rt.h,ct.b,ut.b,W.c,W.n,W.g,rt.g,F.a],styles:[""]}),Rt),Nt=o("2ChS"),St=o("/t3+"),Ft=o("4FRi"),At=o("zkoq"),Mt=["autosize"];function Et(t,e){if(1&t){var n=l.Vb();l.Ub(0,"button",11),l.cc("click",function(){return l.Ec(n),l.gc().markAsResolved()}),l.Ub(1,"span"),l.Rc(2,"Close file"),l.Tb(),l.Tb()}}var zt=function(){return{"margin-left":"10px"}};function Lt(t,e){if(1&t){var n=l.Vb();l.Ub(0,"button",8),l.cc("click",function(){return l.Ec(n),l.gc().forwardInvestigation()}),l.Ub(1,"span"),l.Rc(2,"Forward To ODPP"),l.Tb(),l.Tb()}2&t&&l.nc("ngStyle",l.qc(1,zt))}function jt(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"p"),l.Rc(2),l.Tb(),l.Pb(3,"br"),l.Ub(4,"span"),l.Rc(5),l.Tb(),l.Tb()),2&t){var n=e.$implicit;l.Cb(2),l.Sc(n.InvestigationNotes),l.Cb(3),l.Uc("",n.FirstName," ",n.LastName,"")}}function _t(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&t){var n=l.gc(3);l.Cb(1),l.Tc(" - ",n.document.Size," Mbs")}}function qt(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Pc(2,_t,2,1,"span",10),l.Tb()),2&t){var n=l.gc(2);l.Cb(1),l.Tc("Document: ",n.document.Name," "),l.Cb(1),l.nc("ngIf",n.document&&n.document.Size)}}function Gt(t,e){1&t&&(l.Ub(0,"p",36),l.Rc(1,"No document found. Please attach"),l.Tb())}var Vt=function(){return{width:"100px",height:"100px"}};function $t(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",12),l.Ub(1,"fury-card",13),l.Ub(2,"fury-card-header"),l.Ub(3,"fury-card-header-heading"),l.Rc(4,"Investigation Information"),l.Tb(),l.Tb(),l.Ub(5,"fury-card-content",14),l.Ub(6,"form",15),l.Ub(7,"fieldset"),l.Ub(8,"legend"),l.Rc(9,"Data Subject Details"),l.Tb(),l.Ub(10,"div",16),l.Ub(11,"mat-form-field",17),l.Ub(12,"mat-label"),l.Rc(13,"Data subject name"),l.Tb(),l.Pb(14,"input",18),l.Tb(),l.Ub(15,"mat-form-field",17),l.Ub(16,"mat-label"),l.Rc(17,"Data Subject Email"),l.Tb(),l.Pb(18,"input",19),l.Tb(),l.Ub(19,"mat-form-field",17),l.Ub(20,"mat-label"),l.Rc(21,"Data Subject Phone"),l.Tb(),l.Pb(22,"input",20),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"fieldset"),l.Ub(24,"legend"),l.Rc(25,"Organisation"),l.Tb(),l.Ub(26,"mat-form-field",17),l.Ub(27,"mat-label"),l.Rc(28,"Organisation under investigation"),l.Tb(),l.Pb(29,"input",21),l.Tb(),l.Tb(),l.Ub(30,"fieldset"),l.Ub(31,"legend"),l.Rc(32,"Organisation Contact Person Details"),l.Tb(),l.Ub(33,"div",16),l.Ub(34,"mat-form-field",17),l.Ub(35,"mat-label"),l.Rc(36,"Contact First Name"),l.Tb(),l.Pb(37,"input",22),l.Tb(),l.Ub(38,"mat-form-field",17),l.Ub(39,"mat-label"),l.Rc(40,"Contact Last Name"),l.Tb(),l.Pb(41,"input",23),l.Tb(),l.Ub(42,"mat-form-field",17),l.Ub(43,"mat-label"),l.Rc(44,"Contact Email"),l.Tb(),l.Pb(45,"input",24),l.Tb(),l.Tb(),l.Tb(),l.Ub(46,"fieldset"),l.Ub(47,"legend"),l.Rc(48,"General Investigation Info"),l.Tb(),l.Ub(49,"div",25),l.Ub(50,"fieldset"),l.Ub(51,"legend"),l.Rc(52,"Initial Investigation Notes"),l.Tb(),l.Ub(53,"mat-label"),l.Rc(54,"PDPO Director's investigation notes"),l.Tb(),l.Ub(55,"mat-grid-list",26),l.Ub(56,"mat-grid-tile"),l.Pb(57,"textarea",27,28),l.Tb(),l.Tb(),l.Tb(),l.Ub(59,"div",16),l.Ub(60,"mat-form-field",29),l.Ub(61,"mat-label"),l.Rc(62,"Police Investigation Notes"),l.Tb(),l.Pc(63,jt,6,3,"div",30),l.Pb(64,"textarea",31,28),l.Tb(),l.Tb(),l.Ub(66,"div",16),l.Ub(67,"mat-form-field",29),l.Ub(68,"mat-label"),l.Rc(69,"DPP Investigation Notes"),l.Tb(),l.Pb(70,"textarea",32,28),l.Tb(),l.Tb(),l.Ub(72,"fieldset"),l.Ub(73,"legend"),l.Rc(74,"Evidence Of Investigation"),l.Tb(),l.Ub(75,"div",33),l.cc("click",function(){return l.Ec(n),l.gc().onReadDocument()}),l.Pb(76,"img",34),l.Pc(77,qt,3,2,"span",10),l.Tb(),l.Pc(78,Gt,2,0,"p",35),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var i=l.gc();l.nc("fxLayoutGap",i.gap),l.Cb(1),l.nc("fxFlex.gt-sm",i.col2)("@fadeInUp",void 0),l.Cb(5),l.nc("formGroup",i.investigationForm),l.Cb(57),l.nc("ngForOf",i.InvestigationNotes),l.Cb(13),l.nc("ngStyle",l.qc(8,Vt)),l.Cb(1),l.nc("ngIf",i.document&&i.document.Name),l.Cb(1),l.nc("ngIf",i.document&&!i.document.Base64)}}function Bt(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"p"),l.Rc(2),l.Tb(),l.Pb(3,"br"),l.Ub(4,"span"),l.Rc(5),l.Tb(),l.Tb()),2&t){var n=e.$implicit;l.Cb(2),l.Sc(n.InvestigationNotes),l.Cb(3),l.Uc("",n.FirstName," ",n.LastName,"")}}function Xt(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&t){var n=l.gc(3);l.Cb(1),l.Tc(" - ",n.document.Size," Mbs")}}function Ht(t,e){if(1&t&&(l.Ub(0,"span"),l.Rc(1),l.Pc(2,Xt,2,1,"span",10),l.Tb()),2&t){var n=l.gc(2);l.Cb(1),l.Tc("Document: ",n.document.Name," "),l.Cb(1),l.nc("ngIf",n.document&&n.document.Size)}}function Yt(t,e){1&t&&(l.Ub(0,"p",36),l.Rc(1,"No document found. Please attach"),l.Tb())}var Kt=function(){return{"margin-right":"20px"}};function Qt(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div"),l.Ub(1,"fury-card",13),l.Ub(2,"fury-card-header"),l.Ub(3,"fury-card-header-heading"),l.Rc(4,"Investigation Information"),l.Tb(),l.Tb(),l.Ub(5,"fury-card-content",14),l.Ub(6,"form",15),l.Ub(7,"fieldset"),l.Ub(8,"legend"),l.Rc(9,"Organisation"),l.Tb(),l.Ub(10,"div",16),l.Ub(11,"mat-form-field",37),l.Ub(12,"mat-label"),l.Rc(13,"Name of Organisation"),l.Ub(14,"span",38),l.Rc(15,"required"),l.Tb(),l.Tb(),l.Pb(16,"textarea",39,28),l.Ub(18,"mat-hint"),l.Rc(19,"Organisation that is affected"),l.Tb(),l.Tb(),l.Ub(20,"mat-form-field",37),l.Ub(21,"mat-label"),l.Rc(22,"Registration Number"),l.Tb(),l.Pb(23,"textarea",40,28),l.Ub(25,"mat-hint"),l.Rc(26,"The number assigned after registration"),l.Tb(),l.Tb(),l.Ub(27,"mat-form-field",37),l.Ub(28,"mat-label"),l.Rc(29,"Email Address of Organisation"),l.Ub(30,"span",38),l.Rc(31,"required"),l.Tb(),l.Tb(),l.Pb(32,"textarea",41,28),l.Ub(34,"mat-hint"),l.Rc(35,"Contact Email of Organisation"),l.Tb(),l.Tb(),l.Ub(36,"mat-form-field",42),l.Ub(37,"mat-label"),l.Rc(38,"Telephone Number of Organisation"),l.Ub(39,"span",38),l.Rc(40,"required"),l.Tb(),l.Tb(),l.Pb(41,"textarea",43,28),l.Ub(43,"mat-hint"),l.Rc(44,"Contact Number of Organisation"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(45,"fieldset"),l.Ub(46,"legend"),l.Rc(47,"Causes of Breach"),l.Tb(),l.Ub(48,"mat-form-field",44),l.Ub(49,"mat-label"),l.Rc(50,"Likely Causes of the breach"),l.Tb(),l.Ub(51,"textarea",45,28),l.Rc(53,"                                "),l.Tb(),l.Ub(54,"mat-hint"),l.Rc(55,"Please specify if any financial or sensitive personal data that has been affected "),l.Tb(),l.Tb(),l.Ub(56,"mat-form-field",44),l.Ub(57,"mat-label"),l.Rc(58,"Number of data Subjects"),l.Tb(),l.Pb(59,"textarea",46,28),l.Ub(61,"mat-hint"),l.Rc(62,"Subjects affected by breach"),l.Tb(),l.Tb(),l.Ub(63,"mat-form-field",44),l.Ub(64,"mat-label"),l.Rc(65,"Total Number of Records held"),l.Tb(),l.Pb(66,"textarea",47,28),l.Ub(68,"mat-hint"),l.Rc(69,"Breached records as a percentage"),l.Tb(),l.Tb(),l.Tb(),l.Ub(70,"fieldset"),l.Ub(71,"legend"),l.Rc(72,"Recovery Details"),l.Tb(),l.Ub(73,"div",16),l.Ub(74,"mat-form-field",44),l.Ub(75,"mat-label"),l.Rc(76,"Data recovery details"),l.Tb(),l.Pb(77,"textarea",48,28),l.Ub(79,"mat-hint"),l.Rc(80,"If so, please provide details of how and when this occurred. "),l.Tb(),l.Tb(),l.Ub(81,"mat-form-field",44),l.Ub(82,"mat-label"),l.Rc(83,"Prevention Steps"),l.Tb(),l.Pb(84,"textarea",49,28),l.Ub(86,"mat-hint"),l.Rc(87,"What steps have been taken to prevent a recurrence of this incident ? "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(88,"fieldset"),l.Ub(89,"legend"),l.Rc(90,"General Investigation Info"),l.Tb(),l.Ub(91,"div",25),l.Ub(92,"fieldset"),l.Ub(93,"legend"),l.Rc(94,"Initial Investigation Notes"),l.Tb(),l.Ub(95,"mat-label"),l.Rc(96,"PDPO Director's investigation notes"),l.Tb(),l.Ub(97,"mat-grid-list",26),l.Ub(98,"mat-grid-tile"),l.Pb(99,"textarea",50,28),l.Tb(),l.Tb(),l.Tb(),l.Ub(101,"div",16),l.Ub(102,"mat-form-field",29),l.Ub(103,"mat-label"),l.Rc(104,"Police Investigation Notes"),l.Tb(),l.Pc(105,Bt,6,3,"div",30),l.Pb(106,"textarea",31,28),l.Tb(),l.Tb(),l.Ub(108,"div",16),l.Ub(109,"mat-form-field",29),l.Ub(110,"mat-label"),l.Rc(111,"DPP Investigation Notes"),l.Tb(),l.Pb(112,"textarea",32,28),l.Tb(),l.Tb(),l.Ub(114,"fieldset"),l.Ub(115,"legend"),l.Rc(116,"Evidence Of Investigation"),l.Tb(),l.Ub(117,"div",33),l.cc("click",function(){return l.Ec(n),l.gc().onReadDocument()}),l.Pb(118,"img",34),l.Pc(119,Ht,3,2,"span",10),l.Tb(),l.Pc(120,Yt,2,0,"p",35),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var i=l.gc();l.Cb(1),l.nc("fxFlex.gt-sm",i.col2)("@fadeInUp",void 0),l.Cb(5),l.nc("formGroup",i.investigationForm),l.Cb(5),l.nc("ngStyle",l.qc(10,Kt)),l.Cb(9),l.nc("ngStyle",l.qc(11,Kt)),l.Cb(7),l.nc("ngStyle",l.qc(12,Kt)),l.Cb(78),l.nc("ngForOf",i.InvestigationNotes),l.Cb(13),l.nc("ngStyle",l.qc(13,Vt)),l.Cb(1),l.nc("ngIf",i.document&&i.document.Name),l.Cb(1),l.nc("ngIf",i.document&&!i.document.Base64)}}var Wt,Jt,Zt,te=function(){return["Investigations"]},ee=function(){return{"margin-left":"300px"}},ne=[{path:"find",component:K,canActivate:[Q.a],data:{roles:["view.investigation","find.investigation"],action:"FIND"}},{path:"investigations-edit",component:(Wt=function(t){n(o,t);var i=a(o);function o(t,e,n,a,s,c,u,m,g,d,f,v,h,T,C,U,y,I){var R;return r(this,o),(R=i.call(this,T,C,U,I)).formBuilder=t,R.activateRoute=e,R.route=n,R.dialog=a,R.bottomsheet=s,R.endpoints=c,R.http=u,R.service=m,R.allDialogRef=g,R.auth=d,R.utilService=f,R._auth=v,R.snackBar=h,R.authService=T,R._workflowService=C,R.registrationService=U,R.investigationService=y,R.complaintService=I,R.subject$=new p.a(1),R.data$=R.subject$.asObservable(),R.personalDataEvent=new l.o,R.PersonalDataAffected=new l.o,R.investigationDetails=new l.o,R.$processingEvent=new l.o,R.$errorsEvent=new l.o,R.$resultInvestigationsEvent=new l.o,R.subscriptions=[],R.workflowID="1",R.ActionTakenCheckboxValue=0,R.disableResolve=!0,R.disableForward=!1,R.processing=!1,R.isDirector=!1,R.isPolice=!1,R.isODPP=!1,R.isTechnical=!1,R.isLegal=!1,R.InvestigationNotes=new b.c,R.application=new b.b,R.DataSubjectsCategories=[],R.investigationReasons=[],R.list=[],R.permittedActions=[],R.dataCategories=[],R.$dataCategories=[],R.$subCategories=[],R.dataSubcategories=[],R.dataCategory=new W.e,R.dataSubCategory=new W.e,R.buttonIcon="add_circle_outline",R.buttonLabel="Add",R.isEditingPersonalData=!1,R.tableEditable=!0,R.ResolveInvestigation=!1,R.CanForwardToDPP=!1,R.personalDataIndex=0,R.personalNumber=1,R._gap=16,R.gap=R._gap+"px",R.col2="1 1 calc(50% - ".concat(R._gap/2,"px)"),R.col3="1 1 calc(33.3333% - ".concat(R._gap/1.5,"px)"),R.InvestigationTrackingNumber=R.route.getCurrentNavigation().extras.state.InvestigationTrackingNumber,console.log(R.InvestigationTrackingNumber),R.InvestigationID=R.route.getCurrentNavigation().extras.state.InvestigationID,console.log(R.InvestigationID),R.accesses=T.getKeycloakInstance().resourceAccess["dps-frontend"].roles,console.log(R.accesses),console.log(v.getUser().id),R.accesses.includes("resolve.investigation")&&(R.ResolveInvestigation=!0),R.accesses.includes("forward.investigation")&&(R.CanForwardToDPP=!0),R}return e(o,[{key:"ngOnInit",value:function(){var t=this;this.initForm(),this.getInvestigation(),this.subscriptions.$resultComplaintsEvent=this.$resultInvestigationsEvent.subscribe(function(e){e&&(t.httpSub=t.http.get(t.endpoints.getInvestigationNotes+"?InvestigationTrackingNo="+t.InvestigationTrackingNumber).pipe(Object(nt.a)(t.service.handleError)).subscribe(function(n){console.log(n),t.application=e,t.InvestigationNotes=n,console.log(t.InvestigationNotes),console.log(t.application),t.mapFields(),t.dialogRef.afterClosed().subscribe(function(){t.allDialogRef.closeAll(),t.route.navigate(["/investigations/find"])}),t.processing=!1},function(e){t.processing=!1,e.error.message||t.service.determineErrorResponse(e)}))})}},{key:"initForm",value:function(){this.investigationForm=this.formBuilder.group({reasonForTheInvestigation:["",W.u.compose([W.u.required])],InvestigationDetails:["",W.u.compose([W.u.required])],dataSubjectName:["",W.u.compose([W.u.required])],dataSubjectPhone:["",W.u.compose([W.u.required])],dataSubjectEmail:["",W.u.compose([W.u.required])],ContactFirstName:["",W.u.compose([W.u.required])],ContactLastName:["",W.u.compose([W.u.required])],ContactEmailAddress:["",W.u.compose([W.u.required])],Organisation:["",W.u.compose([W.u.required])],lastModificationDate:[],OrganisationName:["",W.u.compose([W.u.required])],RegNo:["",W.u.compose([W.u.required])],OrganisationEmail:["",W.u.compose([W.u.required])],OrganisationNumber:["",W.u.compose([W.u.required])],BreachCauses:["",W.u.compose([W.u.required])],DataSubjects:["",W.u.compose([W.u.required])],measures:["",W.u.compose([W.u.required])],detailsOfRecovery:["",W.u.compose([W.u.required])],preventionSteps:["",W.u.compose([W.u.required])],investigationDetails:["",W.u.compose([W.u.required])],PoliceNotes:["",W.u.compose([W.u.required])],DPPNotes:["",W.u.compose([W.u.required])]})}},{key:"getFormData",value:function(){return{SubjectName:this.investigationForm.get("dataSubjectName").value?this.investigationForm.get("dataSubjectName").value:"",SubjectEmail:this.investigationForm.get("dataSubjectEmail").value?this.investigationForm.get("dataSubjectEmail").value:"",SubjectPhone:this.investigationForm.get("dataSubjectPhone").value?this.investigationForm.get("dataSubjectPhone").value:"",SubjectOrganisation:this.investigationForm.get("InvestigationCategory").value?this.investigationForm.get("InvestigationCategory").value:"",InvestigationInformation:this.investigationForm.get("investigationDetails").value?this.investigationForm.get("investigationDetails").value:""}}},{key:"getInvestigation",value:function(){this.investigationService.getInvestigation(this.InvestigationTrackingNumber,this.$processingEvent,this.$resultInvestigationsEvent,this.$errorsEvent)}},{key:"markAsResolved",value:function(){this.dialog.open(pt,{width:"1391px",height:"595px",data:{InvestigationTrackingNumber:this.InvestigationTrackingNumber,Status:4,ClosingRemarksOwner:this._auth.getUser().id}})}},{key:"mapFields",value:function(){this.investigationForm.get("dataSubjectName").setValue(this.application[0].FirstName+" "+this.application[0].LastName),this.investigationForm.get("dataSubjectPhone").setValue(this.application[0].PhoneNumber),this.investigationForm.get("dataSubjectEmail").setValue(this.application[0].EmailAddress),this.investigationForm.get("Organisation").setValue(this.application[0].Organisation),this.investigationForm.get("ContactFirstName").setValue(this.application[0].ContactPersonFirstName),this.investigationForm.get("ContactLastName").setValue(this.application[0].ContactPersonLastName),this.investigationForm.get("ContactEmailAddress").setValue(this.application[0].ContactPersonEmailAddress),this.investigationForm.get("InvestigationDetails").setValue(this.application[0].InvestigationNotes),this.investigationForm.get("OrganisationName").setValue(this.application[0].OrganisationName),this.investigationForm.get("RegNo").setValue(this.application[0].RegNo),this.investigationForm.get("OrganisationEmail").setValue(this.application[0].OrganisationEmail),this.investigationForm.get("OrganisationNumber").setValue(this.application[0].OrganisationNumber),this.investigationForm.get("BreachCauses").setValue(this.application[0].BreachCauses),this.investigationForm.get("DataSubjects").setValue(this.application[0].DataSubjects),this.investigationForm.get("measures").setValue(this.application[0].measures),this.investigationForm.get("detailsOfRecovery").setValue(this.application[0].detailsOfRecovery),this.investigationForm.get("preventionSteps").setValue(this.application[0].preventionSteps),this.investigationForm.get("investigationDetails").setValue(this.application[0].investigationDetails),this.investigationForm.get("PoliceNotes").setValue(this.application[0].PoliceNotes),this.investigationForm.get("DPPNotes").setValue(this.application[0].DPPNotes)}},{key:"makeNotes",value:function(){var t;t=1==this.ResolveInvestigation?3:2,this.dialog.open(xt,{width:"1391px",height:"595px",data:{InvestigationTrackingNumber:this.InvestigationTrackingNumber,Status:t,EvidenceOwner:this._auth.getUser().id}})}},{key:"onReadDocument",value:function(){this.bottomsheetRef=this.bottomsheet.open(tt.a,{disableClose:!0,panelClass:["view-pdf-document-bottomsheet","bottomsheets"],data:{url:this.document.Base64,title:this.document.Name}})}},{key:"viewApplicationTimeLine",value:function(){this.dialog.open(k.a,{width:"941px",height:"595px",data:this.workflowTimeLine})}},{key:"forwardInvestigation",value:function(){var t;t=1==this.ResolveInvestigation?4:3,this.dialog.open(wt,{width:"500px",height:"200px",data:{InvestigationTrackingNumber:this.InvestigationTrackingNumber,Status:t,User:this._auth.getUser().id}})}},{key:"moreInformation",value:function(){this.dialog.open(Dt,{width:"1391px",height:"595px",data:{InvestigationTrackingNumber:this.InvestigationTrackingNumber}}).afterClosed().subscribe(function(t){})}},{key:"getSamplJson",get:function(){return Object(Z.a)(b.a)}}]),o}(J.a),Wt.\u0275fac=function(t){return new(t||Wt)(l.Ob(W.d),l.Ob(u.a),l.Ob(u.f),l.Ob(x.b),l.Ob(Nt.b),l.Ob(et.a),l.Ob(I.c),l.Ob(it.a),l.Ob(x.b),l.Ob(y.c),l.Ob(vt.a),l.Ob(Pt.a),l.Ob(ht.a),l.Ob(y.c),l.Ob(v.a),l.Ob(h.a),l.Ob(R),l.Ob(Tt.a))},Wt.\u0275cmp=l.Ib({type:Wt,selectors:[["fury-investigations-edit"]],viewQuery:function(t,e){var n;1&t&&l.Vc(Mt,!0),2&t&&l.zc(n=l.dc())&&(e.autosize=n.first)},inputs:{personalDataList:"personalDataList",isViewOnly:"isViewOnly",personalDataEvent:"personalDataEvent"},outputs:{PersonalDataAffected:"PersonalDataAffected",investigationDetails:"investigationDetails"},features:[l.zb],decls:23,vars:14,consts:[["mode","card"],["current","Manage",3,"crumbs"],["fxLayout","column",3,"fxLayoutGap"],[1,"actions-button-padding"],[1,"example-spacer"],["mat-raised-button","","matTooltip","View Timeline","class","actions-button-padding","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","class","actions-button-padding","color","primary",3,"ngStyle","click",4,"ngIf"],["mat-raised-button","","matTooltip","View Timeline","color","primary",1,"actions-button-padding",3,"ngStyle","click"],["mat-raised-button","","color","primary",1,"actions-button-padding",3,"ngStyle","click"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","matTooltip","View Timeline","color","primary",1,"actions-button-padding",3,"click"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start stretch",3,"fxLayoutGap"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"form-padding"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","2 1 auto"],["formControlName","dataSubjectName","matInput",""],["formControlName","dataSubjectEmail","matInput",""],["formControlName","dataSubjectPhone","matInput",""],["formControlName","Organisation","matInput",""],["formControlName","ContactFirstName","matInput",""],["formControlName","ContactLastName","matInput",""],["formControlName","ContactEmailAddress","matInput",""],["fxLayout","column","fxLayoutGap","8px",1,"content"],["cols","4","rowHeight","4rem"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","InvestigationDetails","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"],["fxFlex","2 1 auto","appearance","fill"],[4,"ngFor","ngForOf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","PoliceNotes","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","DPPNotes","cdkAutosizeMaxRows","5"],["matTooltip","Open Document",1,"uploaded-document",3,"click"],["src","./assets/img/pdf.png","alt","",3,"ngStyle"],["class","no-document-found",4,"ngIf"],[1,"no-document-found"],["fxFlex","2 2 auto",3,"ngStyle"],[1,"required-field"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","OrganisationName","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","RegNo","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","OrganisationEmail","cdkAutosizeMaxRows","5"],["fxFlex","2 2 auto"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","OrganisationNumber","cdkAutosizeMaxRows","5"],["fxFlex","2 2 auto","appearance","fill"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","BreachCauses","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","DataSubjects","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","measures","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","detailsOfRecovery","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","preventionSteps","cdkAutosizeMaxRows","5"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","formControlName","investigationDetails","cdkAutosizeMaxRows","5"]],template:function(t,e){1&t&&(l.Ub(0,"fury-page-layout",0),l.Ub(1,"fury-page-layout-header"),l.Pb(2,"fury-breadcrumbs",1),l.Tb(),l.Ub(3,"fury-page-layout-content",2),l.Ub(4,"div",3),l.Ub(5,"mat-toolbar"),l.Ub(6,"mat-toolbar-row"),l.Pb(7,"span",4),l.Pc(8,Et,3,0,"button",5),l.Pc(9,Lt,3,2,"button",6),l.Ub(10,"button",7),l.cc("click",function(){return e.moreInformation()}),l.Ub(11,"span"),l.Rc(12,"Request for further investigation"),l.Tb(),l.Tb(),l.Ub(13,"button",8),l.cc("click",function(){return e.makeNotes()}),l.Ub(14,"span"),l.Rc(15,"Make Notes"),l.Tb(),l.Tb(),l.Ub(16,"button",7),l.cc("click",function(){return e.viewApplicationTimeLine()}),l.Ub(17,"mat-icon"),l.Rc(18,"view_timeline"),l.Tb(),l.Ub(19,"span"),l.Rc(20,"Application Timeline"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pc(21,$t,79,9,"div",9),l.Pc(22,Qt,121,14,"div",10),l.Tb(),l.Tb()),2&t&&(l.Cb(2),l.nc("@fadeInRight",void 0)("crumbs",l.qc(10,te)),l.Cb(1),l.nc("fxLayoutGap",e.gap),l.Cb(5),l.nc("ngIf",1==e.ResolveInvestigation),l.Cb(1),l.nc("ngIf",1==e.CanForwardToDPP),l.Cb(1),l.nc("ngStyle",l.qc(11,zt)),l.Cb(3),l.nc("ngStyle",l.qc(12,ee)),l.Cb(3),l.nc("ngStyle",l.qc(13,zt)),l.Cb(5),l.nc("ngIf",null!==e.application[0].InvestigationComplaintID),l.Cb(1),l.nc("ngIf",null!==e.application[0].InvestigationDataBreachID))},directives:[O.a,w.a,P.a,D.a,st.d,st.e,St.a,St.c,c.o,F.a,bt.a,c.p,lt.c,M.a,st.b,st.c,Ft.a,Ft.d,Ft.g,Ft.c,W.v,W.o,W.h,rt.d,rt.h,W.c,ct.b,W.n,W.g,At.a,At.c,ut.b,c.n,rt.g],styles:[""]}),Wt),canActivate:[Q.a],data:{roles:["view.investigation"],action:"VIEW"}}],ie=((Jt=function t(){r(this,t)}).\u0275mod=l.Mb({type:Jt}),Jt.\u0275inj=l.Lb({factory:function(t){return new(t||Jt)},imports:[[u.j.forChild(ne)],u.j]}),Jt),ae=o("q8Jb"),oe=o("WCGO"),se=o("0jmt"),re=o("6BeY"),ce=o("KthW"),ue=o("AyUp"),le=o("QMK6"),be=o("VE2z"),me=o("hVPj"),ge=o("VCcF"),de=((Zt=function t(){r(this,t)}).\u0275mod=l.Mb({type:Zt}),Zt.\u0275inj=l.Lb({factory:function(t){return new(t||Zt)},imports:[[c.c,ie,ce.a,oe.a,ue.a,W.s,ge.a,se.a,me.a,le.a,be.a,re.a,ae.a]]}),Zt)},QMK6:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("fXoL"),a=function(){var t=function t(){r(this,t)};return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[]]}),t}()},YStQ:function(t,n,i){"use strict";i.d(n,"a",function(){return g});var a=i("0IaG"),o=i("fXoL"),s=i("ofXK"),c=i("bTqV"),u=i("NFeN"),l=i("bv9b");function b(t,e){1&t&&o.Pb(0,"mat-progress-bar",5)}var m=function(t,e){return{"status-true":t,"status-false":e}},g=function(){var t=function(){function t(e,n){r(this,t),this.data=e,this.dialogRef=n,this.processing=!1}return e(t,[{key:"ngOnInit",value:function(){}},{key:"onCloseDialog",value:function(){this.dialogRef.close()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ob(a.a),o.Ob(a.g))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-successful-message-dialog"]],decls:10,vars:7,consts:[[3,"ngClass"],[1,"mat-progress-bar-container"],["mode","indeterminate",4,"ngIf"],[3,"innerHTML"],["mat-button","",3,"click"],["mode","indeterminate"]],template:function(t,e){1&t&&(o.Ub(0,"main",0),o.Ub(1,"div",1),o.Pc(2,b,1,0,"mat-progress-bar",2),o.Tb(),o.Ub(3,"header"),o.Pb(4,"h1",3),o.Ub(5,"button",4),o.cc("click",function(){return e.onCloseDialog()}),o.Ub(6,"mat-icon"),o.Rc(7,"clear"),o.Tb(),o.Tb(),o.Tb(),o.Ub(8,"section"),o.Pb(9,"p",3),o.Tb(),o.Tb()),2&t&&(o.nc("ngClass",o.sc(4,m,!0===e.data.status,!1===e.data.status)),o.Cb(2),o.nc("ngIf",e.processing),o.Cb(2),o.nc("innerHTML",e.data.title,o.Fc),o.Cb(5),o.nc("innerHTML",e.data.message,o.Fc))},directives:[s.m,s.o,c.a,u.a,l.a],styles:["main[_ngcontent-%COMP%]{position:relative;flex-direction:column}main[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:center}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;height:56px;margin-bottom:-10px;margin-top:10px}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin:0;font-weight:300}main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0;width:44px;height:44px;min-width:0;display:flex;align-items:center;justify-content:center;padding:0}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 20px 20px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;font-size:13px;font-weight:500;color:#373636}main.status-true[_ngcontent-%COMP%]{border:3px solid #6cbd45}main.status-true[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#6cbd45}main.status-false[_ngcontent-%COMP%]{border:3px solid #f44336}main.status-false[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f44336}"]}),t}()}}])}();